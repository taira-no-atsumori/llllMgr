# lefthook.yml
# See https://github.com/evilmartians/lefthook/blob/master/docs/configuration.md

# pre-commitフック: `git commit` を実行する前に走るコマンド
pre-commit:
  parallel: false
  skip:
    - ref: backup
  commands:
    # eslint:
    #   glob: '**/*.{js,ts,vue}'
    #   run: npx eslint --fix {staged_files} --fix --max-warnings 0 --no-warn-ignored
    #   exclude: '*.config.{js,mjs,cjs}'
    # prettier:
    #   glob: "*.{js,ts,vue,css,scss,json,md}"
    #   run: npx prettier --write {staged_files}

    test:
      run: npm run test -- --run
      skip_output: false
      # 警告のみの場合はコミットを許可
      fail_on_warnings: false

    build-and-stage:
      # テストが成功した後、ビルドを実行し、成果物をステージングします。
      run: npm run build && git add docs
