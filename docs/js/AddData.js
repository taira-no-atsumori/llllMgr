import{g as Tl,I as gl,u as $l,a as Ll,b as Bl,c as Fl,r as p,w as jl,o as Ze,d as be,e as Hl,f as ql,h as Kl,V as kl,i as Vl,j as e,k as g,F as se,l as Gl,m as Re,n as Dl,v as Jl,p as El,q as ul,s as zl,t as ze,x as Xl,y as le,z as Yl,A as Wl,B as Ql,C as Zl,D as ea,E as la,G as aa,H as ta,J as Ie,K as vl,L as x,M as $,N as Ce,O as l,P as J,Q as oe,R as N,S as n,T as ua,U as Q,W as K,X as oa,Y as ve,Z as Ye,_ as ia,$ as He,a0 as sa,a1 as ie,a2 as ge,a3 as xe,a4 as he,a5 as Ke,a6 as Se,a7 as Ge,a8 as $e,a9 as qe,aa as pe,ab as Te,ac as pl,ad as Me,ae as we,af as fe,ag as na,ah as W,ai as L,aj as Nl,ak as De,al as nl,am as rl,an as dl,ao as cl,ap as ye,aq as Oe,ar as fl,as as Be,at as Sl,au as xl,av as ol,aw as Qe,ax as ke,ay as Ml,az as ml,aA as el,aB as je,aC as hl,aD as ra,aE as da,aF as ca,aG as ma,aH as Cl,aI as Fe,aJ as va,aK as Al,aL as Ul,aM as Ee,aN as pa,aO as Xe,aP as fa,aQ as ya,aR as Ve,aS as We,aT as il,aU as wl,aV as yl,aW as ba,aX as Il,aY as ga,aZ as ka,a_ as Va,a$ as Da,b0 as _e,b1 as Sa,b2 as Ne,b3 as xa,b4 as ha}from"./index.js";const Ca=Zl({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:f=>!isNaN(parseFloat(f))},maxHeight:{type:[Number,String],validator:f=>!isNaN(parseFloat(f))},maxRows:{type:[Number,String],validator:f=>!isNaN(parseFloat(f))},suffix:String,modelModifiers:Object,...ta(),...la(aa(),["direction"]),...ea()},"VTextarea"),Ue=Tl()({name:"VTextarea",directives:{vIntersect:gl},inheritAttrs:!1,props:Ca(),emits:{"click:control":f=>!0,"mousedown:control":f=>!0,"update:focused":f=>!0,"update:modelValue":f=>!0,"update:rows":f=>!0},setup(f,R){let{attrs:U,emit:P,slots:w}=R;const v=$l(f,"modelValue"),{isFocused:F,focus:j,blur:E}=Ll(f),{onIntersect:D}=Ql(f),T=le(()=>typeof f.counterValue=="function"?f.counterValue(v.value):(v.value||"").toString().length),_=le(()=>{if(U.maxlength)return U.maxlength;if(!(!f.counter||typeof f.counter!="number"&&typeof f.counter!="string"))return f.counter}),y=p(),C=p(),k=Wl(""),b=p(),O=p(0),{platform:M}=Bl(),d=Fl(f),s=le(()=>f.persistentPlaceholder||F.value||f.active);function h(){d.isSuppressing.value&&d.update(),b.value!==document.activeElement&&b.value?.focus(),F.value||j()}function a(m){h(),P("click:control",m)}function V(m){P("mousedown:control",m)}function z(m){m.stopPropagation(),h(),ze(()=>{v.value="",Yl(f["onClick:clear"],m)})}function ae(m){const S=m.target;if(!f.modelModifiers?.trim){v.value=S.value;return}const q=S.value,Z=S.selectionStart,X=S.selectionEnd;v.value=q,ze(()=>{let ue=0;q.trimStart().length===S.value.length&&(ue=q.length-S.value.length),Z!=null&&(S.selectionStart=Z-ue),X!=null&&(S.selectionEnd=X-ue)})}const ne=p(),de=p(Number(f.rows)),te=le(()=>["plain","underlined"].includes(f.variant));jl(()=>{f.autoGrow||(de.value=Number(f.rows))});function re(){ze(()=>{if(!b.value)return;if(M.value.firefox){O.value=12;return}const{offsetWidth:m,clientWidth:S}=b.value;O.value=Math.max(0,m-S)}),f.autoGrow&&ze(()=>{if(!ne.value||!C.value)return;const m=getComputedStyle(ne.value),S=getComputedStyle(C.value.$el),q=parseFloat(m.getPropertyValue("--v-field-padding-top"))+parseFloat(m.getPropertyValue("--v-input-padding-top"))+parseFloat(m.getPropertyValue("--v-field-padding-bottom")),Z=ne.value.scrollHeight,X=parseFloat(m.lineHeight),ue=Math.max(parseFloat(f.rows)*X+q,parseFloat(S.getPropertyValue("--v-input-control-height"))),c=f.maxHeight?parseFloat(f.maxHeight):parseFloat(f.maxRows)*X+q||1/0,o=Xl(Z??0,ue,c);de.value=Math.floor((o-q)/X),k.value=ul(o)})}Ze(re),be(v,re),be(()=>f.rows,re),be(()=>f.maxHeight,re),be(()=>f.maxRows,re),be(()=>f.density,re),be(de,m=>{P("update:rows",m)});let B;return be(ne,m=>{m?(B=new ResizeObserver(re),B.observe(ne.value)):B?.disconnect()}),Hl(()=>{B?.disconnect()}),ql(()=>{const m=!!(w.counter||f.counter||f.counterValue),S=!!(m||w.details),[q,Z]=Kl(U),{modelValue:X,...ue}=kl.filterProps(f),c={...Vl.filterProps(f),"onClick:clear":z};return e(kl,Re({ref:y,modelValue:v.value,"onUpdate:modelValue":o=>v.value=o,class:["v-textarea v-text-field",{"v-textarea--prefixed":f.prefix,"v-textarea--suffixed":f.suffix,"v-text-field--prefixed":f.prefix,"v-text-field--suffixed":f.suffix,"v-textarea--auto-grow":f.autoGrow,"v-textarea--no-resize":f.noResize||f.autoGrow,"v-input--plain-underlined":te.value},f.class],style:[{"--v-textarea-max-height":f.maxHeight?ul(f.maxHeight):void 0,"--v-textarea-scroll-bar-width":ul(O.value)},f.style]},q,ue,{centerAffix:de.value===1&&!te.value,focused:F.value}),{...w,default:o=>{let{id:r,isDisabled:G,isDirty:Y,isReadonly:ce,isValid:i,hasDetails:Ae}=o;return e(Vl,Re({ref:C,style:{"--v-textarea-control-height":k.value},onClick:a,onMousedown:V,"onClick:prependInner":f["onClick:prependInner"],"onClick:appendInner":f["onClick:appendInner"]},c,{id:r.value,active:s.value||Y.value,labelId:`${r.value}-label`,centerAffix:de.value===1&&!te.value,dirty:Y.value||f.dirty,disabled:G.value,focused:F.value,details:Ae.value,error:i.value===!1}),{...w,default:ll=>{let{props:{class:Je,...Pe},controlRef:al}=ll;return g(se,null,[f.prefix&&g("span",{class:"v-text-field__prefix"},[f.prefix]),Dl(g("textarea",Re({ref:Le=>b.value=al.value=Le,class:Je,value:v.value,onInput:ae,autofocus:f.autofocus,readonly:ce.value,disabled:G.value,placeholder:f.placeholder,rows:f.rows,name:d.fieldName.value,autocomplete:d.fieldAutocomplete.value,onFocus:h,onBlur:E,"aria-labelledby":`${r.value}-label`},Pe,Z),null),[[gl,{handler:D},null,{once:!0}]]),f.autoGrow&&Dl(g("textarea",{class:El([Je,"v-textarea__sizer"]),id:`${Pe.id}-sizer`,"onUpdate:modelValue":Le=>v.value=Le,ref:ne,readonly:!0,"aria-hidden":"true"},null),[[Jl,v.value]]),f.suffix&&g("span",{class:"v-text-field__suffix"},[f.suffix])])}})},details:S?o=>g(se,null,[w.details?.(o),m&&g(se,null,[g("span",null,null),e(Gl,{active:f.persistentCounter||F.value,value:T.value,max:_.value,disabled:f.disabled},w.counter)])]):void 0})}),zl({},y,C,b)}}),Aa={key:0,class:"mb-4 text-grey"},Ua={key:1},wa={class:"text-caption mr-2"},Ia={class:"text-caption"},_a=Ie({__name:"PendingData",emits:["edit"],setup(f,{emit:R}){const U=vl(),P=p(!1),w=p(""),v=p(""),F=p([]),j=p(!1),E=p(!1),D=p(""),T=R,_=k=>{U.setEditTarget(k.type,k.key),T("edit",k.type)},y=k=>{if(v.value=JSON.stringify(k.data,null,2),k.status==="update"){let b=null;k.type==="music"?b=U.prodData.music[k.key]:k.type==="card"&&(b=U.flattenCards(U.prodData.card)[k.key]?.data),w.value=JSON.stringify(b,null,2)}else w.value="New Data"},C=async()=>{if(F.value.length===0)return;P.value=!0;const k=qe(pe.app);try{const b={};for(const O of F.value){const M=U.diffList.find(h=>h.key===O);if(!M)continue;const d=JSON.parse(JSON.stringify(M.data));let s=null;if(M.type==="music"?s=U.prodData.music[M.key]:M.type==="card"&&(s=U.flattenCards(U.prodData.card)[M.key]?.data),d.imageURL&&d.imageURL.startsWith("http")&&(!s||!s.imageURL))try{const a=await(await fetch(d.imageURL)).blob();let V="webp";try{const re=new URL(d.imageURL),m=decodeURIComponent(re.pathname).match(/\.([a-zA-Z0-9]+)$/);m&&(V=m[1])}catch{}const z=`${O}.${V}`,ae=M.type==="card"?"cardIllust":M.type==="music"?"cdJacket":"eventInformation",ne=Te(k,`${ae}/${z}`),de=await pl(ne,a),te=await Me(de.ref);d.imageURL=te}catch(h){console.error(`Failed to copy image for ${O}:`,h)}b[M.path]=d}await we(fe(pe),b),j.value=!0,F.value=[],w.value="",v.value=""}catch(b){console.error("Upload failed:",b),D.value=String(b),E.value=!0}finally{P.value=!1}};return(k,b)=>(x(),$(Ce,{fluid:"",class:"pa-0"},{default:l(()=>[J(U).diffList.length===0?(x(),oe("div",Aa," Dev環境と本番環境のデータに差分はありません。 ")):(x(),oe("div",Ua,[e(N,{text:"Deploy to Prod",color:"primary","prepend-icon":"mdi-cloud-upload",loading:P.value,disabled:F.value.length===0,onClick:C},null,8,["loading","disabled"]),e(ie,{class:"mt-0"},{default:l(()=>[e(n,{cols:"4"},{default:l(()=>[e(ua,null,{default:l(()=>[Q(" Diff: "+K(J(U).diffList.length),1)]),_:1}),e(oa,{variant:"flat",class:"mb-4"},{default:l(()=>[(x(!0),oe(se,null,ve(J(U).diffList,O=>(x(),$(Ye,{key:O.key,class:El(O.status==="new"?"bg-blue-lighten-4":"bg-yellow-lighten-4"),onClick:M=>y(O)},{prepend:l(()=>[e(sa,{modelValue:F.value,"onUpdate:modelValue":b[0]||(b[0]=M=>F.value=M),value:O.key,color:"pink",onClick:b[1]||(b[1]=He(()=>{},["stop"]))},null,8,["modelValue","value"])]),append:l(()=>[e(N,{icon:"mdi-pencil",variant:"text",density:"compact",onClick:He(M=>_(O),["stop"])},null,8,["onClick"])]),default:l(()=>[e(ia,null,{default:l(()=>[g("span",wa,"["+K(O.type)+"]",1),Q(" "+K(O.data.title||O.data.cardName||O.key)+" ",1),g("span",Ia,"("+K(O.status)+")",1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(Ue,{modelValue:w.value,"onUpdate:modelValue":b[2]||(b[2]=O=>w.value=O),label:"Prod (Before)","auto-grow":"",readonly:"",variant:"solo"},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(Ue,{modelValue:v.value,"onUpdate:modelValue":b[3]||(b[3]=O=>v.value=O),label:"Dev (After)","auto-grow":"",readonly:"",variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1})])),e(Ge,{modelValue:E.value,"onUpdate:modelValue":b[5]||(b[5]=O=>E.value=O),"max-width":"600"},{default:l(()=>[e(ge,null,{default:l(()=>[e(xe,{class:"text-h5 bg-error"},{default:l(()=>[...b[8]||(b[8]=[Q("Upload Failed",-1)])]),_:1}),e(he,{class:"pt-4"},{default:l(()=>[b[9]||(b[9]=g("p",null," アップロードに失敗しました。コンソールで詳細を確認してください。 ",-1)),b[10]||(b[10]=g("p",{class:"mt-4 font-weight-bold"},"エラーメッセージ:",-1)),e(Ue,{"model-value":D.value,readonly:"",variant:"outlined",rows:"5","auto-grow":"",class:"mt-2"},null,8,["model-value"])]),_:1}),e(Ke,null,{default:l(()=>[e(Se),e(N,{color:"primary",text:"Close",onClick:b[4]||(b[4]=O=>E.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($e,{modelValue:j.value,"onUpdate:modelValue":b[7]||(b[7]=O=>j.value=O),timeout:3e3,color:"success"},{actions:l(()=>[e(N,{variant:"text",text:"Close",onClick:b[6]||(b[6]=O=>j.value=!1)})]),default:l(()=>[b[11]||(b[11]=Q(" Upload Completed! ",-1))]),_:1},8,["modelValue"])]),_:1}))}}),Ea={class:"text-subtitle-1"},sl=Ie({__name:"SkillFormComponent",props:{modelValue:{},type:{},index:{},autoCompleteAp:{type:Function}},emits:["update:modelValue","open-detail"],setup(f,{emit:R}){const U=p(!1),P=f,w=R,v=le({get:()=>P.modelValue,set:d=>w("update:modelValue",d)}),F=Object.keys(ye),j=le(()=>P.type==="SA"?"Special Appeal":P.type==="skill"?"Skill":P.type==="addSA"?"Add Special Appeal":"Skill"),E=le(()=>{const d=v.value.name;return!d||!(d in ye)?[]:Object.keys(ye[d])}),D=le(()=>{const d=v.value.name,s=v.value.ID;return d&&s&&d in ye?ye[d][s]?.detail?.type||[]:[]}),T=d=>{if(!d||!(d in ye))return;const s=Object.keys(ye[d]);s.length>0&&(v.value.ID=s[0],_(s[0]))},_=d=>{if(!d)return;const s=v.value.name;if(s&&s in ye){const h=ye[s][d];if(h&&h.text){const a=Math.max(0,h.text.length-1),V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0];v.value.detail=new Array(a).fill(null).map(()=>[...V])}}if(P.autoCompleteAp){const h=P.autoCompleteAp(d);h!==void 0&&(v.value.AP=h)}},y={ID:"",name:"",AP:0,detail:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},C={...y,characteristic:{name:"",detail:"",type:[""]}},k=()=>{v.value.addSA||(v.value.addSA=[]),v.value.addSA.push(JSON.parse(JSON.stringify(y)))},b=()=>{v.value.addSkill||(v.value.addSkill=[]),v.value.addSkill.push(JSON.parse(JSON.stringify(C)))},O=d=>{v.value.addSA.splice(d,1)},M=d=>{v.value.addSkill.splice(d,1)};return(d,s)=>{const h=na("SkillForm");return x(),$(ie,null,{default:l(()=>[e(n,{cols:"5"},{default:l(()=>[e(W,{modelValue:v.value.name,"onUpdate:modelValue":[s[0]||(s[0]=a=>v.value.name=a),T],items:J(F),label:`${j.value} Name`,required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),_:1}),e(n,{cols:"5"},{default:l(()=>[e(W,{modelValue:v.value.ID,"onUpdate:modelValue":[s[1]||(s[1]=a=>v.value.ID=a),_],items:E.value,label:`${j.value} ID`,required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:v.value.AP,"onUpdate:modelValue":s[2]||(s[2]=a=>v.value.AP=a),modelModifiers:{number:!0},label:"AP",type:"number",max:"999",min:"0",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),f.type==="SA"&&v.value.ID?(x(),$(n,{key:0,cols:"12"},{default:l(()=>[U.value?(x(),$(L,{key:1,modelValue:v.value.EXAP,"onUpdate:modelValue":s[5]||(s[5]=a=>v.value.EXAP=a),modelModifiers:{number:!0},label:"SA EXAP",type:"number",max:"999",min:"0",required:"",variant:"outlined",density:"compact","hide-details":""},{append:l(()=>[e(Nl,{color:"error",icon:"mdi-delete",onClick:s[4]||(s[4]=a=>U.value=!1)})]),_:1},8,["modelValue"])):(x(),$(N,{key:0,text:"Add EXAP","prepend-icon":"mdi-plus",block:"",onClick:s[3]||(s[3]=a=>U.value=!0)}))]),_:1})):De("",!0),v.value.detail&&v.value.detail.length>0?(x(),$(n,{key:1,cols:"12",class:"d-flex align-center"},{default:l(()=>[g("span",Ea,K(j.value)+" Detail",1)]),_:1})):De("",!0),(x(!0),oe(se,null,ve(v.value.detail,(a,V)=>(x(),$(n,{key:V,cols:"12"},{default:l(()=>[e(L,{modelValue:v.value.detail[V],"onUpdate:modelValue":z=>v.value.detail[V]=z,label:`Detail ${V+1}`,variant:"underlined",density:"compact","hide-details":"",readonly:"","append-icon":"mdi-pencil","onClick:append":z=>d.$emit("open-detail",v.value.detail,V)},null,8,["modelValue","onUpdate:modelValue","label","onClick:append"])]),_:2},1024))),128)),v.value.addSA?(x(!0),oe(se,{key:2},ve(v.value.addSA,(a,V)=>(x(),$(n,{key:V,cols:"12"},{default:l(()=>[e(nl,{color:"yellow"},{default:l(()=>[e(rl,null,{default:l(()=>[e(dl,null,{default:l(()=>[Q(K(`Add Special Appeal ${V+1}`)+" ",1),e(Se),e(N,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",onClick:He(z=>O(V),["stop"])},null,8,["onClick"])]),_:2},1024),e(cl,null,{default:l(()=>[e(h,{modelValue:v.value.addSA[V],"onUpdate:modelValue":z=>v.value.addSA[V]=z,type:"addSA",index:V,"auto-complete-ap":f.autoCompleteAp,onOpenDetail:s[6]||(s[6]=(z,ae)=>d.$emit("open-detail",z,ae))},null,8,["modelValue","onUpdate:modelValue","index","auto-complete-ap"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):De("",!0),v.value.addSA&&D.value.includes("addSA")?(x(),$(n,{key:3,cols:"12"},{default:l(()=>[e(N,{color:"yellow","prepend-icon":"mdi-plus",text:"Add SA",block:"",onClick:k})]),_:1})):De("",!0),v.value.addSkill?(x(!0),oe(se,{key:4},ve(v.value.addSkill,(a,V)=>(x(),$(n,{key:V,cols:"12"},{default:l(()=>[e(nl,{color:"yellow"},{default:l(()=>[e(rl,null,{default:l(()=>[e(dl,null,{default:l(()=>[Q(K(`Add Skill ${V+1}`)+" ",1),e(Se),e(N,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",onClick:He(z=>M(V),["stop"])},null,8,["onClick"])]),_:2},1024),e(cl,null,{default:l(()=>[e(h,{modelValue:v.value.addSkill[V],"onUpdate:modelValue":z=>v.value.addSkill[V]=z,type:"addSkill",index:V,"auto-complete-ap":f.autoCompleteAp,onOpenDetail:s[7]||(s[7]=(z,ae)=>d.$emit("open-detail",z,ae))},null,8,["modelValue","onUpdate:modelValue","index","auto-complete-ap"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):De("",!0),v.value.addSkill&&D.value.includes("addCard")?(x(),$(n,{key:5,cols:"12"},{default:l(()=>[e(N,{color:"yellow","prepend-icon":"mdi-plus",text:"Add Skill",block:"",onClick:b})]),_:1})):De("",!0)]),_:1})}}}),Na={style:{width:"calc(100% / 6)"}},Ma={class:"mb-3"},Oa={class:"d-flex align-center"},Pa={class:"text-center"},Ra={class:"text-center"},Ta=Ie({__name:"AddCard",setup(f){const R=Oe(),U=fl(),P=[1,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,2,2.1,2.2,2.3,2.5],w={trunc:"整数",floor:"切り捨て",round:"四捨五入",ceil:"切り上げ"},v=le(()=>Object.entries(U.skillDetails).map(([I,t])=>({title:t.skillDetailName,value:I}))),F=(I,t)=>{for(const u in T.value)for(const A in T.value[u]){const H=T.value[u][A];for(const ee in H){const me=H[ee];if(t==="SA"&&me.specialAppeal?.ID===I)return me.specialAppeal.AP;if(t==="skill"&&me.skill?.ID===I)return me.skill.AP}}},j=()=>{V.value=!1},E=()=>{z.value=!1},D=vl(),T=p({}),_=p(""),y=p(!1),C=p(""),k=p("success"),b=p(""),O=p(!1),M=p([]),d=p([]),s=p(null),h=p(0),a=p(!1),V=p(!0),z=p(!0),ae=p([]),ne=p(!1),de=p("ceil"),te=p(2),re=["standard","max"],B=p(re[1]),m=p({smile:0,pure:0,cool:0,mental:0,BP:100});be([m,B],()=>{const I=B.value==="max"?1.2:1;["smile","pure","cool","mental","BP"].forEach(t=>{const u=Number(m.value[t]),A=/mental|BP/.test(t)?1:I;i.value.uniqueStatus[t]=isNaN(u)?0:Math.ceil(u/A)})},{deep:!0});const S=le(()=>a.value?h.value/2.5:h.value),q=I=>{const t=String(M.value[I]||"");ae.value[I]?t.endsWith("?")||(M.value[I]=t+"?"):t.endsWith("?")&&(M.value[I]=t.slice(0,-1))},Z=()=>{ae.value=ae.value.map(()=>ne.value),ae.value.forEach((I,t)=>q(t))},X=I=>parseFloat(I.toFixed(10)),ue=I=>{const t=Math.pow(10,te.value);M.value=P.map((u,A)=>{const H=S.value*u;let ee=0;switch(I){case"trunc":ee=Math.trunc(X(H));break;case"floor":ee=Math.floor(X(H*t))/t;break;case"round":ee=Math.round(X(H*t))/t;break;case"ceil":ee=Math.ceil(X(H*t))/t;break;default:ee=0}return ae.value[A]?String(ee)+"?":ee})},c=(I,t)=>{d.value=I,s.value=t;const u=JSON.parse(JSON.stringify(I[t]));M.value=u.map(A=>A===null?"null":A),ae.value=M.value.map(A=>String(A).endsWith("?")),ne.value=ae.value.every(Boolean),O.value=!0},o=()=>{const I=M.value.map(t=>{const u=String(t);return u==="null"?null:u});s.value!==null?d.value[s.value]=I:d.value.push(I),O.value=!1},r=()=>{i.value.characteristic.addSkill.push(JSON.parse(JSON.stringify(ce)))},G=I=>{i.value.characteristic.addSkill.splice(I,1)},ce={...{ID:"",name:"",AP:0,detail:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},characteristic:{name:"",detail:"",type:[""]}},i=p({cardName:"",member:Qe.KAHO,rare:ol[3],styleType:xl.PERFORMER.en,mood:Sl.HAPPY.en,period:Be.normal.en,season:"",year:2025,sprit:1,series:"",kana:"",uniqueStatus:{smile:0,pure:0,cool:0,mental:0,BP:100},specialAppeal:{ID:"",name:"",AP:0,EXAP:[0,0,0,0,0,0,0,0,0,0,0,0,0,0],detail:[],addSA:[],addSkill:[]},skill:{ID:"",name:"",AP:0,detail:[],addSkill:[]},characteristic:{name:"",detail:"",type:[],addSkill:[]}}),Ae=async()=>{if(!b.value)return;let I;try{I=JSON.parse(b.value)}catch{try{I=new Function("return "+b.value)(),b.value=JSON.stringify(I,null,2)}catch{C.value="JSONのフォーマットが不正です",k.value="error",y.value=!0;return}}try{const t=R.isDev?ke:pe,u=qe(pe.app),A={};for(const[H,ee]of Object.entries(I)){const me=i.value.rare;let tl="",bl="";try{tl=await Me(Te(u,`cardIllust/${H}_before.webp`))}catch{console.warn(`Before image not found for ${H}`)}try{bl=await Me(Te(u,`cardIllust/${H}_after.webp`))}catch{console.warn(`After image not found for ${H}`)}const Pl={...ee,imageUrl:{before:tl,after:bl}};A[`cards/${da(H.split("_")[0])}/${me}/${H}`]=Pl}await we(fe(t),A),C.value=`Uploaded to ${R.isDev?"Dev":"Prod"}`,k.value="success",y.value=!0}catch(t){console.error(t),C.value="Error uploading card data",k.value="error",y.value=!0}};Ze(()=>{const I=fe(ke,"card");Ml(I,t=>{const u=t.val();u&&(T.value=u)})}),be([()=>D.editTarget,T],([I,t])=>{if(I&&I.type==="card"&&I.id&&t&&Object.keys(t).length>0){let u=null,A="",H="";for(const ee in t){for(const me in t[ee])if(t[ee][me][I.id]){u=t[ee][me][I.id],A=ee,H=me;break}if(u)break}if(u){_.value=I.id,i.value.member=A,i.value.rare=H,i.value.cardName=u.cardName,i.value.kana=u.kana,i.value.series=u.series||"",i.value.styleType=u.styleType,i.value.mood=u.mood;const ee=Object.entries(Be).find(([me,tl])=>me===u.gacha.period);i.value.period=ee?ee[1].en:Be.normal.en,i.value.season=u.gacha.addSeason,i.value.uniqueStatus={...u.uniqueStatus},u.specialAppeal&&(i.value.specialAppeal.ID=u.specialAppeal.ID,i.value.specialAppeal.name=u.specialAppeal.name,i.value.specialAppeal.AP=u.specialAppeal.AP,i.value.specialAppeal.detail=u.specialAppeal.detail||[]),u.skill&&(i.value.skill.ID=u.skill.ID,i.value.skill.name=u.skill.name,i.value.skill.AP=u.skill.AP,i.value.skill.detail=u.skill.detail||[]),u.characteristic&&(i.value.characteristic.name=u.characteristic.name,i.value.characteristic.detail=u.characteristic.detail,i.value.characteristic.type=u.characteristic.type||[]),D.setEditTarget("","")}}},{immediate:!0});function ll(){if(_.value)return _.value;const I=i.value.member,t=ca[I];if(!t)return"???_000";let u=0;const A=T.value[I];if(A){for(const H in A)for(const ee in A[H])if(ee.startsWith(t+"_")){const me=parseInt(ee.split("_")[1],10);!isNaN(me)&&me>u&&(u=me)}}return`${t}_${String(u+1).padStart(3,"0")}`}function Je(I){const t=Object.entries(Be).find(([,u])=>u.en===I);return t?t[0]:"normal"}const Pe=le(()=>{const I=ll(),t=Je(i.value.period),u={cardName:i.value.cardName,styleType:i.value.styleType,mood:i.value.mood,...i.value.series&&{series:i.value.series},kana:i.value.kana,gacha:{addSeason:i.value.season,period:t},uniqueStatus:{smile:i.value.uniqueStatus.smile,pure:i.value.uniqueStatus.pure,cool:i.value.uniqueStatus.cool,mental:i.value.uniqueStatus.mental,BP:i.value.uniqueStatus.BP},...V.value&&i.value.specialAppeal.name&&{specialAppeal:{ID:i.value.specialAppeal.ID,name:i.value.specialAppeal.name,AP:i.value.specialAppeal.AP,detail:i.value.specialAppeal.detail}},skill:{ID:i.value.skill.ID,name:i.value.skill.name,AP:i.value.skill.AP,detail:i.value.skill.detail},...z.value&&{characteristic:{name:i.value.characteristic.name,detail:i.value.characteristic.detail,type:i.value.characteristic.type}}},A={[i.value.rare]:{[I]:u}};return JSON.stringify(A,null,2)}),al=async()=>{try{const I=JSON.parse(Pe.value),t=Object.keys(I)[0],u=Object.keys(I[t])[0],A=I[t][u],H=i.value.member,ee={};ee[`card/${H}/${t}/${u}`]=A,await we(fe(ke),ee),C.value="Dev環境にデータをアップロードしました",k.value="success",y.value=!0,_.value=""}catch(I){console.error(I),C.value="アップロードに失敗しました",k.value="error",y.value=!0}},Le={ハートキャプチャ:"はーときゃぷちゃ",ラブアトラクト:"らぶあとらくと",ボルテージゲイン:"ぼるてーじげいん",ボルテージブースト:"ぼるてーじぶーすと",メンタルリカバー:"めんたるりかばー",メンタルプロテクト:"めんたるぷろてくと",エクステンドハンド:"えくすてんどはんど",ドロー:"どろー",HP回復:"えいちぴーかいふく",HPゲイン:"えいちぴーげいん",ストレスダメージ:"すとれすだめーじ",SPARK:"すぱーく",カームハート:"かーむはーと",カームアトラクト:"かーむあとらくと",カームアトラクション:"かーむあとらくしょん",カームブースト:"かーむぶーすと",グルーヴィハート:"ぐるーゔぃはーと",グルーヴィアトラクト:"ぐるーゔぃあとらくと",グルーヴィアトラクション:"ぐるーゔぃあとらくしょん",グルーヴィブースト:"ぐるーゔぃぶーすと",チルハート:"ちるはーと",チルアトラクト:"ちるあとらくと",チルアトラクション:"ちるあとらくしょん",チルブースト:"ちるぶーすと"},Ol=()=>{const I={};for(const[t,u]of Object.entries(ye)){let A=Le[t]||"";!A&&/^[\u3040-\u30FF]+$/.test(t)&&(A=t.replace(/[\u30A1-\u30F6]/g,H=>String.fromCharCode(H.charCodeAt(0)-96)));for(const[H,ee]of Object.entries(u))I[H]={name:t,kana:A,...ee}}console.log(JSON.stringify(I,null,2)),C.value="スキルリストを変換してconsoleに出力しました",k.value="success",y.value=!0};return(I,t)=>(x(),$(Ce,{fluid:"",class:"pa-0"},{default:l(()=>[e(N,{text:"Transform SkillList",onClick:Ol}),e(ie,null,{default:l(()=>[e(n,{cols:"8"},{default:l(()=>[e(ie,{class:"mb-3"},{default:l(()=>[e(n,{cols:"3"},{default:l(()=>[e(W,{modelValue:i.value.member,"onUpdate:modelValue":t[0]||(t[0]=u=>i.value.member=u),label:"Member Name",items:Object.values(J(Qe)),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(W,{modelValue:i.value.rare,"onUpdate:modelValue":t[1]||(t[1]=u=>i.value.rare=u),label:"Rarity",items:J(ol),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(W,{modelValue:i.value.styleType,"onUpdate:modelValue":t[2]||(t[2]=u=>i.value.styleType=u),label:"Style Type",items:Object.values(J(xl)).map(u=>u.en),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(W,{modelValue:i.value.mood,"onUpdate:modelValue":t[3]||(t[3]=u=>i.value.mood=u),label:"Mood",items:Object.values(J(Sl)).map(u=>u.en),"item-title":"text","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(L,{modelValue:i.value.cardName,"onUpdate:modelValue":t[4]||(t[4]=u=>i.value.cardName=u),label:"Card Name",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(L,{modelValue:i.value.kana,"onUpdate:modelValue":t[5]||(t[5]=u=>i.value.kana=u),label:"Kana",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(L,{modelValue:i.value.series,"onUpdate:modelValue":t[6]||(t[6]=u=>i.value.series=u),label:"Series",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(ge,{class:"mb-3"},{default:l(()=>[e(xe,{class:"mb-2"},{default:l(()=>[...t[32]||(t[32]=[Q("Unique Status",-1)])]),_:1}),e(he,null,{default:l(()=>[e(ml,null,{default:l(()=>[t[34]||(t[34]=g("thead",null,[g("tr",null,[g("th",null,"Training Level"),g("th",null,"Smile"),g("th",null,"Pure"),g("th",null,"Cool"),g("th",null,"Mental"),g("th",null,"BP")])],-1)),g("tbody",null,[g("tr",null,[g("td",Na,[e(W,{modelValue:B.value,"onUpdate:modelValue":t[7]||(t[7]=u=>B.value=u),items:re,variant:"underlined",density:"compact","hide-details":""},null,8,["modelValue"])]),(x(),oe(se,null,ve(["smile","pure","cool","mental","BP"],u=>g("td",{key:u,style:{width:"calc(100% / 6)"}},[e(L,{modelValue:m.value[u],"onUpdate:modelValue":A=>m.value[u]=A,type:"number",max:"99999",min:"0",variant:"underlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])])),64))]),g("tr",null,[t[33]||(t[33]=g("td",{style:{width:"calc(100% / 6)"}},null,-1)),(x(),oe(se,null,ve(["smile","pure","cool","mental","BP"],u=>g("td",{key:u,style:{width:"calc(100% / 6)"}},[e(L,{modelValue:i.value.uniqueStatus[u],"onUpdate:modelValue":A=>i.value.uniqueStatus[u]=A,type:"number",max:"99999",min:"0",variant:"underlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue"])])),64))])])]),_:1})]),_:1})]),_:1}),e(ge,{class:"mb-3"},{default:l(()=>[e(xe,{class:"mb-2"},{default:l(()=>[...t[35]||(t[35]=[Q("Gacha",-1)])]),_:1}),e(he,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"3"},{default:l(()=>[e(W,{modelValue:i.value.period,"onUpdate:modelValue":t[8]||(t[8]=u=>i.value.period=u),label:"Period",items:Object.values(J(Be)).map(u=>u.en),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:i.value.year,"onUpdate:modelValue":t[9]||(t[9]=u=>i.value.year=u),label:"Year",type:"number",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"1"},{default:l(()=>[e(L,{modelValue:i.value.sprit,"onUpdate:modelValue":t[10]||(t[10]=u=>i.value.sprit=u),label:"Sprit",type:"number",min:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(L,{modelValue:i.value.season,"onUpdate:modelValue":t[11]||(t[11]=u=>i.value.season=u),label:"Add Season",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),g("div",Ma,[V.value?(x(),$(ge,{key:1},{default:l(()=>[e(xe,{class:"d-flex text-no-wrap mb-2"},{default:l(()=>[t[36]||(t[36]=Q(" Special Appeal ",-1)),e(Se),e(N,{icon:"mdi-close",variant:"text",density:"compact",color:"error",onClick:j})]),_:1}),e(he,null,{default:l(()=>[e(sl,{modelValue:i.value.specialAppeal,"onUpdate:modelValue":t[13]||(t[13]=u=>i.value.specialAppeal=u),type:"SA","auto-complete-ap":u=>F(u,"SA"),onOpenDetail:c},null,8,["modelValue","auto-complete-ap"])]),_:1})]),_:1})):(x(),$(N,{key:0,text:"Add Special Appeal","prepend-icon":"mdi-plus",block:"",onClick:t[12]||(t[12]=u=>V.value=!0)}))]),e(ge,{class:"mb-3"},{default:l(()=>[e(xe,{class:"text-no-wrap mb-2"},{default:l(()=>[...t[37]||(t[37]=[Q("Skill",-1)])]),_:1}),e(he,null,{default:l(()=>[e(sl,{modelValue:i.value.skill,"onUpdate:modelValue":t[14]||(t[14]=u=>i.value.skill=u),type:"skill","auto-complete-ap":u=>F(u,"skill"),onOpenDetail:c},null,8,["modelValue","auto-complete-ap"])]),_:1})]),_:1}),g("div",null,[z.value?(x(),$(ge,{key:1},{default:l(()=>[e(xe,{class:"d-flex text-no-wrap"},{default:l(()=>[t[38]||(t[38]=Q(" Characteristic ",-1)),e(Se),e(N,{icon:"mdi-close",variant:"text",density:"compact",color:"error",onClick:E})]),_:1}),e(he,null,{default:l(()=>[e(L,{modelValue:i.value.characteristic.name,"onUpdate:modelValue":t[16]||(t[16]=u=>i.value.characteristic.name=u),label:"Characteristic Name",variant:"outlined",density:"compact","hide-details":"",class:"mb-3"},null,8,["modelValue"]),e(Ue,{modelValue:i.value.characteristic.detail,"onUpdate:modelValue":t[17]||(t[17]=u=>i.value.characteristic.detail=u),label:"Characteristic Detail",variant:"outlined",density:"compact","hide-details":"",class:"mb-3"},null,8,["modelValue"]),t[39]||(t[39]=g("p",{class:"text-subtitle-1 mb-3"},"Type",-1)),e(ie,null,{default:l(()=>[(x(!0),oe(se,null,ve(i.value.characteristic.type,(u,A)=>(x(),$(n,{key:A,cols:"4",class:"d-flex align-center"},{default:l(()=>[e(W,{modelValue:i.value.characteristic.type[A],"onUpdate:modelValue":H=>i.value.characteristic.type[A]=H,items:v.value,"item-title":"title","item-value":"value",label:`Type ${A+1}`,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),e(N,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",class:"ml-3",onClick:H=>i.value.characteristic.type.splice(A,1)},null,8,["onClick"])]),_:2},1024))),128)),e(n,{cols:"4"},{default:l(()=>[e(N,{text:"Add Type","prepend-icon":"mdi-plus",block:"",onClick:t[18]||(t[18]=u=>i.value.characteristic.type.push(""))})]),_:1})]),_:1}),(x(!0),oe(se,null,ve(i.value.characteristic.addSkill,(u,A)=>(x(),$(n,{key:A,cols:"12",class:"mt-3"},{default:l(()=>[e(nl,{color:"yellow"},{default:l(()=>[e(rl,null,{default:l(()=>[e(dl,null,{default:l(()=>[Q(K(`Add Skill ${A+1}`)+" ",1),e(Se),e(N,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",onClick:He(H=>G(A),["stop"])},null,8,["onClick"])]),_:2},1024),e(cl,null,{default:l(()=>[e(sl,{modelValue:i.value.characteristic.addSkill[A],"onUpdate:modelValue":H=>i.value.characteristic.addSkill[A]=H,type:"addSkill",index:A,"auto-complete-ap":H=>F(H,"skill"),onOpenDetail:c},null,8,["modelValue","onUpdate:modelValue","index","auto-complete-ap"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),i.value.characteristic.type.includes("addCard")?(x(),$(N,{key:0,color:"yellow","prepend-icon":"mdi-plus",text:"Add Skill",block:"",class:"mt-3",onClick:r})):De("",!0)]),_:1})]),_:1})):(x(),$(N,{key:0,text:"Add Characteristic","prepend-icon":"mdi-plus",block:"",onClick:t[15]||(t[15]=u=>z.value=!0)}))])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(Ue,{label:"Result","auto-grow":"",readonly:"","model-value":Pe.value},null,8,["model-value"]),e(N,{color:"primary","prepend-icon":"mdi-content-copy",text:"COPY",class:"mr-2",onClick:t[19]||(t[19]=u=>I.navigator.clipboard.writeText(Pe.value))}),e(N,{color:"green","prepend-icon":"mdi-cloud-upload",text:"Dev Upload",onClick:al})]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(el)]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(W,{modelValue:i.value.rare,"onUpdate:modelValue":t[20]||(t[20]=u=>i.value.rare=u),label:"Rarity",items:J(ol),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"8"},{default:l(()=>[e(Ue,{modelValue:b.value,"onUpdate:modelValue":t[21]||(t[21]=u=>b.value=u)},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(N,{color:"green","prepend-icon":"mdi-cloud-upload",text:`${J(R).isDev?"Dev":"Prod"} Upload`,onClick:t[22]||(t[22]=u=>Ae())},null,8,["text"])]),_:1})]),_:1}),e(Ge,{modelValue:O.value,"onUpdate:modelValue":t[30]||(t[30]=u=>O.value=u),"max-width":"1200px"},{default:l(()=>[e(ge,null,{default:l(()=>[e(xe,null,{default:l(()=>[...t[40]||(t[40]=[Q("Edit Detail Data",-1)])]),_:1}),e(he,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:h.value,"onUpdate:modelValue":t[23]||(t[23]=u=>h.value=u),label:"Init Number",type:"number",min:"0",step:"0.1",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(je,{modelValue:a.value,"onUpdate:modelValue":t[24]||(t[24]=u=>a.value=u),label:"14",color:"pink",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:te.value,"onUpdate:modelValue":t[25]||(t[25]=u=>te.value=u),label:"Decimal Point",type:"number",max:"9",min:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"3"},{default:l(()=>[g("div",Oa,[e(W,{modelValue:de.value,"onUpdate:modelValue":t[26]||(t[26]=u=>de.value=u),items:Object.entries(w).map(([u,A])=>({title:A,value:u})),"item-title":"title","item-value":"value",label:"Data Format Type",variant:"outlined",density:"compact","hide-details":"",class:"mr-3"},null,8,["modelValue","items"]),e(N,{text:"Set",color:"primary","prepend-icon":"mdi-plus",onClick:t[27]||(t[27]=u=>ue(de.value))})])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(ml,{density:"compact"},{default:l(()=>[g("thead",null,[g("tr",null,[t[41]||(t[41]=g("th",{class:"text-center"},"Level",-1)),t[42]||(t[42]=g("th",{class:"text-center"},"倍率",-1)),(x(),oe(se,null,ve(w,(u,A)=>g("th",{key:A,class:"text-center"},K(u),1)),64)),t[43]||(t[43]=g("th",{class:"text-center",style:{width:"125px"}},"Result",-1)),g("th",Pa,[e(hl,{modelValue:ne.value,"onUpdate:modelValue":[t[28]||(t[28]=u=>ne.value=u),Z],color:"pink",density:"compact","hide-details":""},null,8,["modelValue"])])])]),g("tbody",Ra,[(x(),oe(se,null,ve(P,(u,A)=>g("tr",{key:A},[g("td",null,K(A+1),1),g("td",null,K(u),1),g("td",null,K(Math.trunc(X(S.value*u))),1),g("td",null,K(Math.floor(X(S.value*u*Math.pow(10,te.value)))/Math.pow(10,te.value)),1),g("td",null,K(Math.round(X(S.value*u*Math.pow(10,te.value)))/Math.pow(10,te.value)),1),g("td",null,K(Math.ceil(X(S.value*u*Math.pow(10,te.value)))/Math.pow(10,te.value)),1),g("td",null,[e(L,{modelValue:M.value[A],"onUpdate:modelValue":H=>M.value[A]=H,variant:"underlined",density:"compact","hide-details":"",onKeyup:ra(o,["enter"])},{"append-inner":l(()=>[e(N,{size:"x-small",variant:"text",color:"grey",class:"pa-0",style:{"min-width":"24px"},text:"null",onClick:H=>M.value[A]="null"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),g("td",null,[e(hl,{modelValue:ae.value[A],"onUpdate:modelValue":[H=>ae.value[A]=H,H=>q(A)],color:"pink",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])])])),64))])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ke,null,{default:l(()=>[e(Se),e(N,{color:"error",text:"Cancel",onClick:t[29]||(t[29]=u=>O.value=!1)}),e(N,{color:"primary",text:"Edit",onClick:o})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($e,{modelValue:y.value,"onUpdate:modelValue":t[31]||(t[31]=u=>y.value=u),timeout:3e3,color:k.value},{default:l(()=>[Q(K(C.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),$a=Ie({__name:"AddMusic",setup(f){const R=p(!1),U=p("group"),P=p(!1),w=p(null),v=p([]),F=p(null),j=p(null),E=p(!1),D=p(!1),T=p("データを一時保存しました"),_=p("success"),y=p(!1),C=p(null),k=p(null),b=["あ","か","さ","た","な","は","ま","や","ら","わ","英数"],O=vl(),M=Oe(),d=p({});Ze(()=>{const c=fe(ke,"music");Ml(c,o=>{const r=o.val();if(r&&(d.value=r,a.value.musicName==="")){const G=Object.keys(r).length,Y=O.pendingList.filter(i=>i.type==="music"&&!r[Object.keys(i.data)[0]]).length,ce=`m_${G+Y+1}`;a.value.ID=ce,a.value.ID_original=ce,a.value.ID_preset=ce}})}),be([()=>O.editTarget,d],([c,o])=>{c&&c.type==="music"&&c.id&&o&&Object.keys(o).length>0&&o[c.id]&&(C.value=c.id,te(),O.setEditTarget("",""))},{immediate:!0});const s=le(()=>{let c=Object.entries(d.value);return k.value&&(c=c.filter(([o,r])=>{const G=r.musicData.kana;if(!G)return!1;const Y=G.charAt(0);switch(k.value){case"英数":return!/[ぁ-んゔ]/.test(Y);case"あ":return/[ぁ-おゔ]/.test(Y);case"か":return/[か-ご]/.test(Y);case"さ":return/[さ-ぞ]/.test(Y);case"た":return/[た-ど]/.test(Y);case"な":return/[な-の]/.test(Y);case"は":return/[は-ぽ]/.test(Y);case"ま":return/[ま-も]/.test(Y);case"や":return/[や-よ]/.test(Y);case"ら":return/[ら-ろ]/.test(Y);case"わ":return/[わ-ん]/.test(Y);default:return!0}})),c.map(([o,r])=>({title:r.title,value:o}))}),h=()=>{const c=Object.keys(d.value).length,o=O.pendingList.filter(G=>G.type==="music"&&!d.value[Object.keys(G.data)[0]]).length,r=`m_${c+o+1}`;return{ID:r,ID_original:r,ID_preset:r,musicName:"",musicData:{kana:"",singer:Xe.HASUNOSORA,singer_group:"HASUNOSORA_105",singer_solo:[Qe.KAHO],releaseDate:{year:2026,month:1,date:1},numbering:"",BPM:{original:150,inGame:150},time:{minuts:1,seconds:0,miliSeconds:0},cover:!1},imageURL:"",attribute:Al.SMILE.en,BHcount:0,level:0,term:105,center:Qe.KAHO,bonusSkill:Ul.BEAT_HEART_UP,singingMembers:[],scoreData:{difficultyLevel:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1},maxCombo:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1}}}},a=p(h()),V=/^[\u3040-\u309F\u30FC0-9]*$/,z=[c=>V.test(c)||"ひらがなと数字のみ入力可能です"],ae=le({get:()=>{const c=a.value.musicData.releaseDate;return`${c.year}-${String(c.month).padStart(2,"0")}-${String(c.date).padStart(2,"0")}`},set:c=>{if(!c)return;const[o,r,G]=c.split("-").map(Number);a.value.musicData.releaseDate.year=o,a.value.musicData.releaseDate.month=r,a.value.musicData.releaseDate.date=G}});be(y,c=>{c&&(a.value.musicData.releaseDate={year:2099,month:12,date:31})});const ne=le(()=>a.value.musicName!==""&&a.value.musicData.kana!==""&&V.test(a.value.musicData.kana)),de=le(()=>{if(U.value==="group"){const c=a.value.musicData.singer_group;return Fe[c].MEMBERS}else return a.value.musicData.singer_solo}),te=()=>{if(!C.value)return;const c=d.value[C.value];if(!c)return;if(R.value=!0,a.value.ID_preset=C.value,a.value.ID=R.value?C.value:a.value.ID_original,a.value.musicName=c.title,a.value.musicData.kana=c.musicData.kana,a.value.musicData.singer=c.musicData.singer,Object.values(Xe).includes(c.musicData.singer)){U.value="group";const G=Object.entries(Xe).find(([i,Ae])=>Ae===c.musicData.singer),Y=G?G[0]:null,ce=Object.entries(Fe).find(([i,Ae])=>Ae.KEY===Y&&JSON.stringify(Ae.MEMBERS)===JSON.stringify(c.singingMembers));ce&&(a.value.musicData.singer_group=ce[0])}else U.value="solo",a.value.musicData.singer_group=h().musicData.singer_group;a.value.musicData.singer_solo=c.singingMembers,a.value.musicData.releaseDate={...c.musicData.releaseDate},y.value=a.value.musicData.releaseDate.year===2099&&a.value.musicData.releaseDate.month===12&&a.value.musicData.releaseDate.date===31,a.value.musicData.numbering=c.musicData.numbering,a.value.musicData.BPM={...c.musicData.BPM},a.value.musicData.cover=c.musicData.cover;const o=c.musicData.time;a.value.musicData.time.minuts=Math.floor(o/60);const r=Math.floor(o%60);a.value.musicData.time.seconds=r,a.value.musicData.time.miliSeconds=parseFloat(((o-a.value.musicData.time.minuts*60-r)*10).toFixed(1)),a.value.imageURL=c.imageURL||"",a.value.attribute=c.attribute,a.value.BHcount=c.BHcount,a.value.level=c.level,a.value.term=c.term,a.value.center=c.center,a.value.bonusSkill=c.bonusSkill,a.value.singingMembers=[...c.singingMembers],c.scoreData?(E.value=!0,a.value.scoreData=JSON.parse(JSON.stringify(c.scoreData))):(E.value=!1,a.value.scoreData={difficultyLevel:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1},maxCombo:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1}}),C.value=null,w.value=null},re=()=>{R.value=!1,C.value=null,E.value=!1,w.value=null,U.value="group",a.value=h(),y.value=!1},B=async()=>{try{const c=JSON.parse(ue.value),o=Object.keys(c)[0];if(P.value=!0,F.value){const G=qe(pe.app),Y=Te(G,`cdJacket/${F.value.name}`);try{if(await Me(Y),!confirm(`同名のファイル (${F.value.name}) が既に存在します。
上書きしますか？`)){P.value=!1;return}}catch{}const ce=await pl(Y,F.value),i=await Me(ce.ref);c[o].imageURL=i,M.imageCache.llllMgr_musicImageUrls||(M.imageCache.llllMgr_musicImageUrls={}),M.imageCache.llllMgr_musicImageUrls[o]=i}const r={};r[`music/${o}`]=c[o],await we(fe(ke),r),T.value="Dev環境にデータをアップロードしました",_.value="success",D.value=!0,q()}catch(c){console.error("Failed to parse JSON",c),T.value="アップロードに失敗しました",_.value="error",D.value=!0}finally{P.value=!1}},m=async()=>{if(!a.value.musicName)return;const c=qe(pe.app),o=Te(c,"cdJacket");try{const G=(await fa(o)).items.find(Y=>{const ce=Y.name,i=ce.lastIndexOf(".");return(i!==-1?ce.substring(0,i):ce)===a.value.musicName});if(G){const Y=await Me(G);a.value.imageURL=Y,M.imageCache.llllMgr_musicImageUrls||(M.imageCache.llllMgr_musicImageUrls={}),M.imageCache.llllMgr_musicImageUrls[a.value.ID]=Y,T.value="画像URLを取得しました",_.value="success",D.value=!0}else T.value="画像が見つかりませんでした",_.value="warning",D.value=!0}catch(r){console.error("Failed to fetch image",r),T.value="画像の取得に失敗しました",_.value="error",D.value=!0}},S=c=>{const o=Array.isArray(c)?c[0]:c;if(!o){q();return}F.value=o;const r=new FileReader;r.onload=G=>{j.value=G.target?.result},r.readAsDataURL(o)},q=()=>{F.value=null,j.value=null,v.value=[],w.value&&(w.value.value="")},Z=()=>{w.value?.click()},X=c=>{const o=c.target;o.files&&o.files.length>0&&S(o.files[0])},ue=le(()=>{const c=(a.value.musicData.time.minuts||0)*60+(a.value.musicData.time.seconds||0)+(a.value.musicData.time.miliSeconds||0)/10,o={[R.value?a.value.ID_preset:a.value.ID_original]:{title:a.value.musicName,musicData:{kana:a.value.musicData.kana,singer:U.value==="group"?Xe[Fe[a.value.musicData.singer_group].KEY]:a.value.musicData.singer_solo.map(r=>ya(r)).join("、"),releaseDate:{year:a.value.musicData.releaseDate.year,month:a.value.musicData.releaseDate.month,date:a.value.musicData.releaseDate.date},numbering:a.value.musicData.numbering,BPM:{original:a.value.musicData.BPM.original,inGame:a.value.musicData.BPM.inGame},time:c,cover:a.value.musicData.cover},imageURL:a.value.imageURL,attribute:a.value.attribute,BHcount:a.value.BHcount,level:a.value.level,term:a.value.term,center:a.value.center,bonusSkill:a.value.bonusSkill,singingMembers:U.value==="group"?Fe[a.value.musicData.singer_group].MEMBERS:a.value.musicData.singer_solo}};return E.value&&(o[R.value?a.value.ID_preset:a.value.ID_original].scoreData={difficultyLevel:{NORMAL:a.value.scoreData.difficultyLevel.NORMAL,HARD:a.value.scoreData.difficultyLevel.HARD,EXPERT:a.value.scoreData.difficultyLevel.EXPERT,MASTER:a.value.scoreData.difficultyLevel.MASTER},maxCombo:{NORMAL:a.value.scoreData.maxCombo.NORMAL,HARD:a.value.scoreData.maxCombo.HARD,EXPERT:a.value.scoreData.maxCombo.EXPERT,MASTER:a.value.scoreData.maxCombo.MASTER}}),JSON.stringify(o,null,2)});return(c,o)=>(x(),$(Ce,{fluid:"",class:"pa-0"},{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"8"},{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"2"},{default:l(()=>[e(W,{modelValue:k.value,"onUpdate:modelValue":o[0]||(o[0]=r=>k.value=r),label:"五十音",items:b,clearable:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(W,{modelValue:C.value,"onUpdate:modelValue":o[1]||(o[1]=r=>C.value=r),label:"Preset",items:s.value,"item-title":"title","item-value":"value",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"3"},{default:l(()=>[e(N,{color:"primary",text:"Set",disabled:!C.value,onClick:te},null,8,["disabled"]),e(N,{color:"warning",text:"Reset",class:"mx-2",onClick:re}),e(N,{color:"yellow","prepend-icon":"mdi-image-sync",text:"get",disabled:!a.value.musicName,onClick:m},null,8,["disabled"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(el)]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(je,{modelValue:R.value,"onUpdate:modelValue":o[2]||(o[2]=r=>R.value=r),label:"ID Override",color:"pink",disabled:a.value.ID_preset===a.value.ID_original,class:"pl-2",density:"compact","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{"model-value":R.value?a.value.ID_preset:a.value.ID_original,label:"Music ID",readonly:"","prepend-inner-icon":"mdi-information",density:"compact",variant:"outlined","hide-details":""},null,8,["model-value"])]),_:1}),e(n,{cols:"5"},{default:l(()=>[e(L,{modelValue:a.value.musicName,"onUpdate:modelValue":o[3]||(o[3]=r=>a.value.musicName=r),label:"Music Name",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"5"},{default:l(()=>[e(L,{modelValue:a.value.musicData.kana,"onUpdate:modelValue":o[4]||(o[4]=r=>a.value.musicData.kana=r),label:"Kana",required:"",rules:z,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(ma,{modelValue:U.value,"onUpdate:modelValue":o[5]||(o[5]=r=>U.value=r),label:"Singer",inline:"",density:"compact","hide-details":""},{default:l(()=>[e(Cl,{label:"Group",value:"group",color:"pink",class:"mr-3"}),e(Cl,{label:"Solo",value:"solo",color:"pink"})]),_:1},8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(W,{modelValue:a.value.musicData.singer_group,"onUpdate:modelValue":o[6]||(o[6]=r=>a.value.musicData.singer_group=r),items:Object.entries(J(Fe)).map(([r,G])=>({title:G.NAME,value:r})),"item-title":"title","item-value":"value",label:"Group",disabled:U.value!=="group",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(W,{modelValue:a.value.musicData.singer_solo,"onUpdate:modelValue":o[7]||(o[7]=r=>a.value.musicData.singer_solo=r),items:J(va)(),label:"Solo",multiple:"",disabled:U.value!=="solo",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1}),e(n,{cols:"3"},{default:l(()=>[e(L,{modelValue:ae.value,"onUpdate:modelValue":o[8]||(o[8]=r=>ae.value=r),label:"Release Date",type:"date",disabled:y.value,required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(n,{cols:"3"},{default:l(()=>[e(je,{modelValue:y.value,"onUpdate:modelValue":o[9]||(o[9]=r=>y.value=r),label:"Unknown Date",color:"pink",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(L,{modelValue:a.value.musicData.numbering,"onUpdate:modelValue":o[10]||(o[10]=r=>a.value.musicData.numbering=r),label:"Numbering",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.musicData.BPM.original,"onUpdate:modelValue":o[11]||(o[11]=r=>a.value.musicData.BPM.original=r),modelModifiers:{number:!0},label:"BPM (Original)",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.musicData.BPM.inGame,"onUpdate:modelValue":o[12]||(o[12]=r=>a.value.musicData.BPM.inGame=r),modelModifiers:{number:!0},label:"BPM (In Game)",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.musicData.time.minuts,"onUpdate:modelValue":o[13]||(o[13]=r=>a.value.musicData.time.minuts=r),modelModifiers:{number:!0},label:"Time (minuts)",type:"number",max:"9",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.musicData.time.seconds,"onUpdate:modelValue":o[14]||(o[14]=r=>a.value.musicData.time.seconds=r),modelModifiers:{number:!0},label:"Time (seconds)",type:"number",max:"59",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.musicData.time.miliSeconds,"onUpdate:modelValue":o[15]||(o[15]=r=>a.value.musicData.time.miliSeconds=r),modelModifiers:{number:!0},label:"Time (miliSeconds)",type:"number",step:"0.1",max:"99.9",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(je,{modelValue:a.value.musicData.cover,"onUpdate:modelValue":o[16]||(o[16]=r=>a.value.musicData.cover=r),label:"Cover",color:"pink",class:"pl-1",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(W,{modelValue:a.value.attribute,"onUpdate:modelValue":o[17]||(o[17]=r=>a.value.attribute=r),label:"Attribute",items:Object.values(J(Al)).map(r=>r.en),"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.BHcount,"onUpdate:modelValue":o[18]||(o[18]=r=>a.value.BHcount=r),modelModifiers:{number:!0},label:"BH Count",type:"number",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.level,"onUpdate:modelValue":o[19]||(o[19]=r=>a.value.level=r),modelModifiers:{number:!0},label:"Level",type:"number",max:"1",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(L,{modelValue:a.value.term,"onUpdate:modelValue":o[20]||(o[20]=r=>a.value.term=r),modelModifiers:{number:!0},label:"Term",type:"number",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(W,{modelValue:a.value.center,"onUpdate:modelValue":o[21]||(o[21]=r=>a.value.center=r),label:"Center",items:de.value,"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(W,{modelValue:a.value.bonusSkill,"onUpdate:modelValue":o[22]||(o[22]=r=>a.value.bonusSkill=r),label:"Bonus Skill",items:Object.entries(J(Ul)).map(([r,G])=>G),"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[E.value?(x(),$(ge,{key:1},{default:l(()=>[e(xe,{class:"mb-2"},{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[...o[28]||(o[28]=[Q("Difficulty Level",-1)])]),_:1}),e(n,{cols:"6",class:"d-flex"},{default:l(()=>[o[29]||(o[29]=Q(" Max Combo ",-1)),e(Se),e(N,{icon:"mdi-close",variant:"text",density:"compact",color:"error",onClick:o[24]||(o[24]=r=>E.value=!1)})]),_:1})]),_:1})]),_:1}),e(he,null,{default:l(()=>[e(ie,null,{default:l(()=>[(x(),oe(se,null,ve(["difficultyLevel","maxCombo"],r=>e(n,{key:r,cols:"6"},{default:l(()=>[e(ie,null,{default:l(()=>[(x(),oe(se,null,ve(["NORMAL","HARD","EXPERT","MASTER"],G=>e(n,{key:G,cols:"3"},{default:l(()=>[e(L,{modelValue:a.value.scoreData[r][G],"onUpdate:modelValue":Y=>a.value.scoreData[r][G]=Y,modelModifiers:{number:!0},label:G,type:"number",max:"99",min:"1",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)),64))]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})):(x(),$(N,{key:0,text:"Include Score Data (Difficulty Level & Max Combo)","prepend-icon":"mdi-plus",block:"",onClick:o[23]||(o[23]=r=>E.value=!0)}))]),_:1})]),_:1})]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(N,{color:"primary","prepend-icon":"mdi-content-copy",text:"Copy",class:"mr-5",onClick:o[25]||(o[25]=r=>c.navigator.clipboard.writeText(ue.value.value))}),e(N,{color:"green","prepend-icon":"mdi-cloud-upload",text:"Dev Upload",disabled:!ne.value,onClick:B},null,8,["disabled"])]),_:1}),e(n,{cols:"12",align:"center"},{default:l(()=>[e(Ee,{src:j.value||a.value.imageURL||J(pa),width:300,class:"mb-3 cursor-pointer",onClick:Z},null,8,["src"]),e(N,{disabled:!F.value,color:"error","prepend-icon":"mdi-close",text:"Deselect",onClick:q},null,8,["disabled"]),g("input",{ref_key:"fileInputRef",ref:w,type:"file",accept:"image/webp",class:"d-none",onChange:X},null,544)]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(L,{modelValue:a.value.imageURL,"onUpdate:modelValue":o[26]||(o[26]=r=>a.value.imageURL=r),label:"Image URL","prepend-icon":"mdi-link-variant",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),a.value.imageURL?(x(),$(n,{key:0,cols:"12",class:"text-center"})):De("",!0),e(n,{cols:"12"},{default:l(()=>[e(Ue,{label:"Result","auto-grow":"",readonly:"",rows:"42","model-value":ue.value},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),e($e,{modelValue:D.value,"onUpdate:modelValue":o[27]||(o[27]=r=>D.value=r),timeout:3e3,color:_.value},{default:l(()=>[Q(K(T.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),La={style:{width:"15%"}},Ba={style:{width:"5%"}},Fa={style:{width:"5%"}},ja={style:{width:"20%"}},Ha={key:1},qa={style:{width:"30%"}},Ka={key:1},Ga={style:{width:"25%"}},Ja={key:1},za=Ie({__name:"AddItem",setup(f){const R=Oe(),U=p(105),P=p("Spring"),w=p(1),v=p(Array.from({length:15},()=>({skillBook:"ITEMS.NONE",piece:"ITEMS.NONE",charm:"ITEMS.NONE"}))),F=le(()=>{const _=[{title:Ve.NONE,value:"ITEMS.NONE"}];return Object.entries(Ve.SKILL_BOOK).forEach(([y,C])=>{_.push({title:C,value:`ITEMS.SKILL_BOOK.${y}`})}),_}),j=le(()=>{const _=[{title:Ve.NONE,value:"ITEMS.NONE"}];return Object.entries(Ve.CHARM).forEach(([y,C])=>{typeof C=="object"?Object.entries(C).forEach(([k,b])=>{_.push({title:b,value:`ITEMS.CHARM.${y}.${k}`})}):_.push({title:C,value:`ITEMS.CHARM.${y}`})}),_}),E=le(()=>{const _=v.value.map(y=>`        {
          獲得可能アイテム: [${y.skillBook}, ${y.piece}, ${y.charm}],
          //'低確率獲得可能アイテム': ITEMS.SKILL_BOOK.LOW,
        }`).join(`,
`);return`    ${P.value}: [
      [
${_}
      ],
    ],`}),D=le(()=>{const _=[{title:Ve.NONE,value:"ITEMS.NONE"}],y=C=>{Object.entries(Ve.PIECE[C]).forEach(([k,b])=>{_.push({title:b,value:`ITEMS.PIECE.${C}.${k}`})})};switch(y("GARNET"),y("CARNELIAN"),P.value){case"Spring":y("EMERALD"),y("DIA");break;case"Summer":y("PERIDOT"),y("RUBY");break;case"Autumn":y("TOPAZ"),y("SAPPHIRE");break;case"Winter":y("TURQUOISE"),y("AMETHYST");break}return _}),T=_=>{_=/技能書/.test(_)?_:_.split("(")[0];for(const y in wl)if(_===y)return wl[y]};return(_,y)=>(x(),$(Ce,{fluid:"",class:"pa-0"},{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"8"},{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"4"},{default:l(()=>[e(W,{modelValue:U.value,"onUpdate:modelValue":y[0]||(y[0]=C=>U.value=C),items:[103,104,105],label:"Period"},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(W,{modelValue:P.value,"onUpdate:modelValue":y[1]||(y[1]=C=>P.value=C),items:["Spring","Summer","Autumn","Winter"],label:"Season"},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(W,{modelValue:w.value,"onUpdate:modelValue":y[2]||(y[2]=C=>w.value=C),items:[1,2,3,4,5],label:"Area"},null,8,["modelValue"])]),_:1})]),_:1}),e(el,{class:"mb-5"}),e(ml,null,{default:l(()=>[y[4]||(y[4]=g("thead",null,[g("tr",null,[g("th",{style:{width:"15%"}},"期/季節"),g("th",{style:{width:"5%"}},"Area"),g("th",{style:{width:"5%"}},"Stage"),g("th",{style:{width:"20%"}},"Item (Skill Book)"),g("th",{style:{width:"30%"}},"Item (Piece)"),g("th",{style:{width:"25%"}},"Item (Charm)")])],-1)),g("tbody",null,[(x(),oe(se,null,ve(15,C=>g("tr",{key:C},[g("td",La,K(`${U.value}期${P.value}`),1),g("td",Ba,K(w.value),1),g("td",Fa,K(C),1),g("td",ja,[e(W,{modelValue:v.value[C-1].skillBook,"onUpdate:modelValue":k=>v.value[C-1].skillBook=k,items:F.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":!0},{item:l(({props:k,item:b})=>[e(Ye,Re({ref_for:!0},k,{title:b.title}),{prepend:l(()=>[b.title!==J(Ve).NONE?(x(),$(Ee,{key:0,src:J(R).getImagePath("icons/trainingItem",b.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):De("",!0)]),_:2},1040,["title"])]),selection:l(({item:k})=>[k.title!==J(Ve).NONE?(x(),$(We,{key:0,pill:"",class:"pl-0",color:T(k.title)},{default:l(()=>[e(il,{left:"",class:"mr-1"},{default:l(()=>[e(Ee,{src:J(R).getImagePath("icons/trainingItem",k.title)},null,8,["src"])]),_:2},1024),Q(" "+K(k.title),1)]),_:2},1032,["color"])):(x(),oe("span",Ha,K(k.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])]),g("td",qa,[e(W,{modelValue:v.value[C-1].piece,"onUpdate:modelValue":k=>v.value[C-1].piece=k,items:D.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":!0},{item:l(({props:k,item:b})=>[e(Ye,Re({ref_for:!0},k,{title:b.title}),{prepend:l(()=>[b.title!==J(Ve).NONE?(x(),$(Ee,{key:0,src:J(R).getImagePath("icons/trainingItem",b.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):De("",!0)]),_:2},1040,["title"])]),selection:l(({item:k})=>[k.title!==J(Ve).NONE?(x(),$(We,{key:0,pill:"",class:"pl-0",color:T(k.title)},{default:l(()=>[e(il,{left:"",class:"mr-1"},{default:l(()=>[e(Ee,{src:J(R).getImagePath("icons/trainingItem",k.title)},null,8,["src"])]),_:2},1024),Q(" "+K(k.title),1)]),_:2},1032,["color"])):(x(),oe("span",Ka,K(k.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])]),g("td",Ga,[e(W,{modelValue:v.value[C-1].charm,"onUpdate:modelValue":k=>v.value[C-1].charm=k,items:j.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":!0},{item:l(({props:k,item:b})=>[e(Ye,Re({ref_for:!0},k,{title:b.title}),{prepend:l(()=>[b.title!==J(Ve).NONE?(x(),$(Ee,{key:0,src:J(R).getImagePath("icons/trainingItem",b.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):De("",!0)]),_:2},1040,["title"])]),selection:l(({item:k})=>[k.title!==J(Ve).NONE?(x(),$(We,{key:0,pill:"",class:"pl-0",color:T(k.title)},{default:l(()=>[e(il,{left:"",class:"mr-1"},{default:l(()=>[e(Ee,{src:J(R).getImagePath("icons/trainingItem",k.title)},null,8,["src"])]),_:2},1024),Q(" "+K(k.title),1)]),_:2},1032,["color"])):(x(),oe("span",Ja,K(k.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])])])),64))])]),_:1})]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(N,{color:"primary","prepend-icon":"mdi-content-copy",text:"COPY",class:"mb-3",onClick:y[3]||(y[3]=C=>_.navigator.clipboard.writeText(E.value))}),e(Ue,{label:"Result","auto-grow":"",readonly:"",rows:"42","model-value":E.value},null,8,["model-value"])]),_:1})]),_:1})]),_:1}))}}),Xa={class:"text-h5"},Ya=Ie({__name:"AddSkill",setup(f){const R=Oe(),U=fl(),P=p(""),w=le(()=>{const d=[];if(!ye)return d;for(const[s,h]of Object.entries(ye))if(!(typeof h!="object"||h===null))for(const[a,V]of Object.entries(h))d.push({skillName:s,id:a,...typeof V=="object"?V:{value:V}});return d}),v=le(()=>{if(w.value.length===0)return[{title:"SkillName",key:"skillName"},{title:"ID",key:"id"},{title:"Actions",key:"actions",sortable:!1}];const d=new Set;w.value.forEach(h=>{Object.keys(h).forEach(a=>{a!=="skillName"&&a!=="id"&&d.add(a)})});const s=Array.from(d).map(h=>({title:h,key:h}));return[{title:"SkillName",key:"skillName"},{title:"ID",key:"id"},...s,{title:"Actions",key:"actions",sortable:!1}]}),F=le(()=>Object.entries(U.skillDetails).map(([d,s])=>({title:s.skillDetailName,value:d}))),j=p(!1),E=p(!1),D=p({}),T=p(!1),_=p(""),y=p("success"),C=()=>{D.value={skillName:"",id:"",text:[""],detail:{attr:"",type:[]}},E.value=!0,j.value=!0},k=d=>{D.value=JSON.parse(JSON.stringify(d)),E.value=!1,j.value=!0},b=()=>{j.value=!1},O=async()=>{const d=R.isDev?ke:pe,s={};if(!D.value.skillName||!D.value.id){_.value="SkillName and ID are required",y.value="error",T.value=!0;return}if(D.value.detail?.type&&Object.values(D.value.detail.type).some(z=>!z)){_.value="Detail Type is required",y.value="error",T.value=!0;return}if(E.value&&w.value.some(ae=>ae.skillName===D.value.skillName&&ae.id===D.value.id)){_.value="This SkillName/ID combination already exists",y.value="error",T.value=!0;return}const{skillName:h,id:a,...V}=D.value;s[`skillList/${h}/${a}`]=V;try{await we(fe(d),s),_.value=`Saved to ${R.isDev?"Dev":"Prod"}`,y.value="success",T.value=!0,j.value=!1}catch(z){console.error(z),_.value="Error saving data",y.value="error",T.value=!0}},M=async()=>{const d=R.isDev?ke:pe;try{const s=JSON.parse(JSON.stringify(ye));await we(fe(d,"skills/skill"),s),_.value=`Uploaded SKILL_LIST to ${R.isDev?"Dev":"Prod"}`,y.value="success",T.value=!0}catch(s){console.error(s),_.value="Error uploading SKILL_LIST",y.value="error",T.value=!0}};return(d,s)=>(x(),$(Ce,{fluid:"",class:"pa-0"},{default:l(()=>[e(N,{color:"green","prepend-icon":"mdi-cloud-upload",text:"Upload SKILL_LIST",class:"mb-2",onClick:M}),e(ge,null,{default:l(()=>[e(L,{modelValue:P.value,"onUpdate:modelValue":s[0]||(s[0]=h=>P.value=h),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",class:"ma-2"},{append:l(()=>[e(N,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:C})]),_:1},8,["modelValue"]),e(yl,{headers:v.value,items:w.value,search:P.value,density:"compact",class:"elevation-1","items-per-page":50,hover:""},{"item.actions":l(({item:h})=>[e(Nl,{class:"me-2",size:"small",onClick:a=>k(h)},{default:l(()=>[...s[6]||(s[6]=[Q(" mdi-pencil ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["headers","items","search"])]),_:1}),e(Ge,{modelValue:j.value,"onUpdate:modelValue":s[4]||(s[4]=h=>j.value=h),"max-width":"1200px"},{default:l(()=>[e(ge,null,{default:l(()=>[e(xe,null,{default:l(()=>[g("span",Xa,K(`${E.value?"New":"Edit"} Skill`),1)]),_:1}),e(he,null,{default:l(()=>[e(Ce,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(L,{modelValue:D.value.skillName,"onUpdate:modelValue":s[1]||(s[1]=h=>D.value.skillName=h),label:"SkillName",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(L,{modelValue:D.value.id,"onUpdate:modelValue":s[2]||(s[2]=h=>D.value.id=h),label:"ID",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[...s[7]||(s[7]=[g("h3",null,"Text",-1)])]),_:1}),(x(!0),oe(se,null,ve(D.value.text,(h,a)=>(x(),$(n,{key:a,cols:"12"},{default:l(()=>[e(L,{modelValue:D.value.text[a],"onUpdate:modelValue":V=>D.value.text[a]=V,label:`Text${a+1}`,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024))),128)),e(n,{cols:"12"},{default:l(()=>[...s[8]||(s[8]=[g("h3",null,"Detail",-1)])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(L,{modelValue:D.value.detail.attr,"onUpdate:modelValue":s[3]||(s[3]=h=>D.value.detail.attr=h),label:"Attr",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),(x(!0),oe(se,null,ve(D.value.detail.type,(h,a)=>(x(),$(n,{key:a,cols:"4"},{default:l(()=>[e(W,{modelValue:D.value.detail.type[a],"onUpdate:modelValue":V=>D.value.detail.type[a]=V,items:F.value,"item-title":"title","item-value":"value",label:`Type${a+1}`,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Ke,null,{default:l(()=>[e(Se),e(N,{color:"blue-darken-1",variant:"text",text:"Cancel",onClick:b}),e(N,{color:"blue-darken-1",variant:"text",text:"Save",onClick:O})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($e,{modelValue:T.value,"onUpdate:modelValue":s[5]||(s[5]=h=>T.value=h),timeout:3e3,color:y.value},{default:l(()=>[Q(K(_.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),_l={heartCaptcha:"ハートキャプチャ系",loveAttract:"ラブアトラクト系",voltage:"ボルテージ系",mental:"メンタル系",extend:"手札枚数変更系",boost:"ブースト系",AP:"AP変化系",other:"その他"},Wa=Ie({__name:"AddSkillDetail",setup(f){const R=Oe(),U=fl(),P=p(""),w=le(()=>Object.entries(_l).map(([M,d])=>({title:d,value:M}))),v=[{title:"ID",key:"id"},{title:"Skill Detail Name",key:"skillDetailName"},{title:"Color Code",key:"colorCode"},{title:"Skill Type",key:"skillTypeKey"},{title:"Description",key:"description"},{title:"Edit",key:"edit",sortable:!1}],F=le(()=>{const M=Object.entries(U.skillDetails).map(([d,s])=>({id:d,...typeof s=="object"?s:{value:s}}));return P.value?M.filter(d=>d.skillTypeKey===P.value):M}),j=p(!1),E=p({id:"",skillDetailName:"",colorCode:"",description:"",skillTypeKey:"heartCaptcha"}),D=p(!1),T=p(!1),_=p(""),y=p("success"),C=()=>{E.value={id:"",skillDetailName:"",colorCode:"",description:"",skillTypeKey:"heartCaptcha"},D.value=!0,j.value=!0},k=M=>{E.value={...M},D.value=!1,j.value=!0},b=()=>{j.value=!1},O=async()=>{const M=R.isDev?ke:pe,d={};if(!E.value.id){_.value="ID is required",y.value="error",T.value=!0;return}if(D.value&&F.value.some(a=>a.id===E.value.id)){_.value="ID already exists",y.value="error",T.value=!0;return}const{id:s,...h}=E.value;d[`skills/skillDetail/${s}`]=h;try{await we(fe(M),d),_.value=`Saved to ${R.isDev?"Dev":"Prod"}`,y.value="success",T.value=!0,j.value=!1}catch(a){console.error(a),_.value="Error saving data",y.value="error",T.value=!0}};return(M,d)=>(x(),$(Ce,{fluid:"",class:"pa-0"},{default:l(()=>[e(ge,null,{default:l(()=>[e(W,{modelValue:P.value,"onUpdate:modelValue":d[0]||(d[0]=s=>P.value=s),items:w.value,label:"Filter by Skill Type","prepend-inner-icon":"mdi-filter",variant:"outlined","hide-details":"",class:"ma-2",clearable:""},{append:l(()=>[e(N,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:C})]),_:1},8,["modelValue","items"]),e(yl,{headers:v,items:F.value,density:"compact","items-per-page":-1,hover:""},{"item.colorCode":l(({value:s})=>[s?(x(),$(We,{key:0,color:s,size:"small",variant:"flat"},{default:l(()=>[Q(K(s),1)]),_:2},1032,["color"])):De("",!0)]),"item.skillTypeKey":l(({value:s})=>[Q(K(J(_l)[s]||s),1)]),"item.edit":l(({item:s})=>[e(N,{class:"me-2",size:"small",variant:"tonal",icon:"mdi-pencil",onClick:h=>k(s)},null,8,["onClick"])]),_:2},1032,["items"])]),_:1}),e(Ge,{modelValue:j.value,"onUpdate:modelValue":d[6]||(d[6]=s=>j.value=s),"max-width":"600px"},{default:l(()=>[e(ge,{class:"pa-2"},{default:l(()=>[e(xe,null,{default:l(()=>[...d[8]||(d[8]=[g("span",{class:"text-h5"},"Edit Skill Detail",-1)])]),_:1}),e(he,null,{default:l(()=>[e(Ce,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(L,{modelValue:E.value.id,"onUpdate:modelValue":d[1]||(d[1]=s=>E.value.id=s),label:"ID",readonly:!D.value,disabled:!D.value,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","readonly","disabled"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(L,{modelValue:E.value.skillDetailName,"onUpdate:modelValue":d[2]||(d[2]=s=>E.value.skillDetailName=s),label:"Skill Detail Name",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(L,{modelValue:E.value.colorCode,"onUpdate:modelValue":d[3]||(d[3]=s=>E.value.colorCode=s),label:"Color Code",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(W,{modelValue:E.value.skillTypeKey,"onUpdate:modelValue":d[4]||(d[4]=s=>E.value.skillTypeKey=s),items:w.value,"item-title":"title","item-value":"value",label:"Skill Type",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(Ue,{modelValue:E.value.description,"onUpdate:modelValue":d[5]||(d[5]=s=>E.value.description=s),label:"Description",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ke,null,{default:l(()=>[e(Se),e(N,{text:"Cancel",onClick:b}),e(N,{text:"Save",onClick:O})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($e,{modelValue:T.value,"onUpdate:modelValue":d[7]||(d[7]=s=>T.value=s),timeout:3e3,color:y.value},{default:l(()=>[Q(K(_.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),Qa={liveGP:{title:"ライブグランプリ「105期 FinalTerm 第1回 サークル対抗戦」",text:"",type:"liveGP",firstDay:[2026,1,23,12,0],lastDay:[2026,1,29,3,59],link:"https://www.lovelive-anime.jp/hasunosora/appnews/detail/?p=2026-01-21-20-ho7w1y5dnm",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F105%E6%9C%9F%20FinalTerm%20%E7%AC%AC1%E5%9B%9E%20%E3%82%B5%E3%83%BC%E3%82%AF%E3%83%AB%E5%AF%BE%E6%8A%97%E6%88%A6_logo.webp?alt=media&token=9a114663-5136-4ca2-a01d-d902723a2242"},fesReCLive:{title:"103-105th Fes×ReC:LIVE ～Road to Bloom～",text:"",type:"live",firstDay:[2026,1,21,0,0],lastDay:[2026,1,22,23,59],link:"https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=RTB",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2FFes%C3%97REC_RtB.webp?alt=media&token=c69b2a09-ae79-44ee-9277-0b41c5074693"},fesLive:{title:"Fes×LIVE「105期 FinalTerm Fes×LIVE」",text:"Bloom Garden Party",type:"live",firstDay:[2026,3,30,20,0],lastDay:[2026,3,30,21,0],link:"https://x.com/hasunosora_SIC/status/2005270008532775019?s=20",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F105%E6%9C%9F%20FinalTerm%20Fes%C3%97LIVE_mv.webp?alt=media&token=f48cbbc9-d960-4c67-ac3a-1e3ab19195cf"},movie:{title:"映画蓮ノ空 ～Bloom Garden Party～",text:"",type:"movie",firstDay:[2026,5,8,0,0],lastDay:[2026,6,25,23,59],link:"https://www.lovelive-anime.jp/hasunosora/movie/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2Fmovie_01.webp?alt=media&token=83d27de5-364d-40c0-a2a2-0aef864cc9df"},"6thLiveDream_Bloom":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Bloom Stage",type:"live",firstDay:[2026,5,2,0,0],lastDay:[2026,5,3,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_bloom_logo.webp?alt=media&token=b2a6a531-7878-4047-be1d-d9dd75dcb4c3"},"6thLiveDream_Garden":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Garden Stage",type:"live",firstDay:[2026,5,23,0,0],lastDay:[2026,5,24,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_garden_logo.webp?alt=media&token=549a33ef-8ebf-4817-b313-c2e9432cad44"},"6thLiveDream_Party":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Party Stage",type:"live",firstDay:[2026,5,30,0,0],lastDay:[2026,5,31,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_party_logo.webp?alt=media&token=a5f0ff28-ccd8-4485-a936-9926c9a000a8"},"6thLiveDream_BloomGardenParty":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Bloom Garden Party Stage",type:"live",firstDay:[2026,7,11,0,0],lastDay:[2026,7,12,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_bgp_logo.webp?alt=media&token=cdd630a2-4700-4bbe-8585-75a87c57433a"}},Za={class:"text-right mb-3"},et={class:"text-h5"},lt=Ie({__name:"AddEvent",setup(f){const R=Oe(),U=p(!1),P=p(""),w=p("success"),v=p(!1),F=p(!1),j=p(null),E=p(null),D=p(null),T=[{title:"ID",key:"id",sortable:!1},{title:"Title",key:"title",sortable:!1},{title:"SubTitle",key:"text",sortable:!1},{title:"First Day",key:"firstDay"},{title:"Last Day",key:"lastDay"},{title:"Edit",key:"edit",sortable:!1}],_=B=>{const m=Array.isArray(B)?B[0]:B;if(!m){y();return}D.value=m;const S=new FileReader;S.onload=q=>{j.value=q.target?.result},S.readAsDataURL(m)},y=()=>{D.value=null,j.value=null,E.value&&(E.value.value="")},C=()=>{E.value?.click()},k=B=>{const m=B.target;m.files&&m.files.length>0&&_(m.files[0])},b=B=>{if(!B||!Array.isArray(B))return"";const[m,S,q,Z,X]=B;return`${m}/${String(S).padStart(2,"0")}/${String(q).padStart(2,"0")} ${String(Z).padStart(2,"0")}:${String(X).padStart(2,"0")}`},O=p({}),M=async()=>{const B=R.isDev?ke:pe,m=await Il(fe(B,"eventInformation"));m.exists()?O.value=m.val():O.value={}};Ze(M),be(()=>R.isDev,M);const d=le(()=>Object.entries(O.value).map(([B,m])=>({id:B,...m}))),s=async()=>{try{await we(fe(R.isDev?ke:pe,"eventInformation"),Qa),P.value=`Uploaded Events to ${R.isDev?"Dev":"Prod"}`,w.value="success",U.value=!0}catch(B){alert("Error uploading events:",B),P.value="Error uploading events",w.value="error",U.value=!0}},h=async()=>{const B=R.isDev?ke:pe,m=fe(B,"cards");try{const S=await Il(m);if(S.exists()){const q=S.val(),Z=(X,ue)=>{for(const c in X)c===ue?delete X[c]:typeof X[c]=="object"&&X[c]!==null&&Z(X[c],ue)};Z(q,"fluctuationStatus"),await ga(m,q),P.value="Updated Card List (removed fluctuationStatus)",w.value="success",U.value=!0}}catch(S){console.error(S),P.value="Error updating card list",w.value="error",U.value=!0}},a=["liveGP","live","movie","other"],V=p({id:"",title:"",text:"",type:"liveGP",firstDay:"",lastDay:"",link:"",imageUrl:""}),z=(B,m)=>{V.value.id=B==="edit"?m.id:"",F.value=B!=="edit",V.value.title=m.title||"",V.value.text=m.text||"",V.value.type=m.type||"liveGP",V.value.link=m.link||"",V.value.imageUrl=m.imageUrl||"",D.value=null,j.value=null;const S=q=>{if(!Array.isArray(q)||q.length<5)return"";const[Z,X,ue,c,o]=q;return`${Z}-${String(X).padStart(2,"0")}-${String(ue).padStart(2,"0")}T${String(c).padStart(2,"0")}:${String(o).padStart(2,"0")}`};V.value.firstDay=S(m.firstDay),V.value.lastDay=S(m.lastDay),v.value=!0},ae=()=>{V.value={id:"",title:"",text:"",type:"liveGP",firstDay:"",lastDay:"",link:"",imageUrl:""},D.value=null,j.value=null,F.value=!0,v.value=!0},ne=async B=>{if(!confirm(`Are you sure you want to delete "${B.title}"?`))return;const m=R.isDev?ke:pe;try{await ka(fe(m,`eventInformation/${B.id}`)),P.value="Deleted successfully",w.value="success",U.value=!0,await M()}catch(S){console.error(S),P.value="Error deleting event",w.value="error",U.value=!0}},de=()=>{v.value=!1},te=async()=>{if(!V.value.id){P.value="ID is required",w.value="error",U.value=!0;return}const B=R.isDev?ke:pe,m=JSON.parse(re.value),{id:S,...q}=m;try{if(D.value){const Z=qe(pe.app),X=Te(Z,`event/${D.value.name}`),ue=await pl(X,D.value),c=await Me(ue.ref);q.imageUrl=c}await we(fe(B,`eventInformation/${S}`),q),P.value="Saved successfully",w.value="success",U.value=!0,de(),await M()}catch(Z){console.error(Z),P.value="Error saving event",w.value="error",U.value=!0}},re=le(()=>{const B={...V.value},m=q=>{if(Array.isArray(q))return q;if(!q)return[];const Z=new Date(q);return[Z.getFullYear(),Z.getMonth()+1,Z.getDate(),Z.getHours(),Z.getMinutes()]},S={...B,firstDay:m(B.firstDay),lastDay:m(B.lastDay)};return JSON.stringify(S,null,2)});return(B,m)=>(x(),$(Ce,{fluid:"",class:"pa-0"},{default:l(()=>[g("div",Za,[e(Se),e(N,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:ae})]),e(yl,{headers:T,items:d.value,class:"elevation-1","items-per-page":-1,hover:""},{"item.firstDay":l(({value:S})=>[Q(K(b(S)),1)]),"item.lastDay":l(({value:S})=>[Q(K(b(S)),1)]),"item.edit":l(({item:S})=>[e(N,{class:"mr-2",size:"small",variant:"tonal",icon:"mdi-pencil",onClick:q=>z("edit",S)},null,8,["onClick"]),e(N,{class:"mr-2",size:"small",variant:"tonal",icon:"mdi-content-copy",onClick:q=>z("copy",S)},null,8,["onClick"]),e(N,{size:"small",variant:"tonal",color:"error",icon:"mdi-delete",onClick:q=>ne(S)},null,8,["onClick"])]),_:2},1032,["items"]),e(Ge,{modelValue:v.value,"onUpdate:modelValue":m[7]||(m[7]=S=>v.value=S),"max-width":"1000px"},{default:l(()=>[e(ge,null,{default:l(()=>[e(xe,null,{default:l(()=>[g("span",et,K(`${F.value?"New":"Edit"} Event`),1)]),_:1}),e(he,null,{default:l(()=>[e(Ce,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"8"},{default:l(()=>[e(ie,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(L,{modelValue:V.value.id,"onUpdate:modelValue":m[0]||(m[0]=S=>V.value.id=S),label:"ID",readonly:!F.value,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","readonly"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(L,{modelValue:V.value.title,"onUpdate:modelValue":m[1]||(m[1]=S=>V.value.title=S),label:"Event Title",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"8"},{default:l(()=>[e(L,{modelValue:V.value.text,"onUpdate:modelValue":m[2]||(m[2]=S=>V.value.text=S),label:"Text",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:l(()=>[e(W,{modelValue:V.value.type,"onUpdate:modelValue":m[3]||(m[3]=S=>V.value.type=S),label:"Event Type",items:a,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(L,{modelValue:V.value.firstDay,"onUpdate:modelValue":m[4]||(m[4]=S=>V.value.firstDay=S),label:"First Day",type:"datetime-local",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(L,{modelValue:V.value.lastDay,"onUpdate:modelValue":m[5]||(m[5]=S=>V.value.lastDay=S),label:"End Day",type:"datetime-local",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,{cols:"4",align:"center"},{default:l(()=>[e(Ee,{src:j.value||V.value.imageUrl||J(ba),class:"mb-2 cursor-pointer",onClick:C},null,8,["src"]),e(N,{disabled:!D.value,color:"error","prepend-icon":"mdi-close",text:"Deselect",onClick:y},null,8,["disabled"]),g("input",{ref_key:"fileInputRef",ref:E,type:"file",accept:"image/webp",style:{display:"none"},onChange:k},null,544)]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(L,{modelValue:V.value.link,"onUpdate:modelValue":m[6]||(m[6]=S=>V.value.link=S),label:"Link",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ke,null,{default:l(()=>[e(Se),e(N,{text:"Cancel",color:"red",variant:"text",onClick:de}),e(N,{text:"Save",color:"primary",variant:"text",onClick:te})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ie,{class:"mt-2"},{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(N,{text:`Upload Events to ${J(R).isDev?"Dev":"Prod"}`,color:"orange",class:"mr-2",onClick:s},null,8,["text"]),e(N,{text:"Update Card List",color:"yellow",onClick:h})]),_:1})]),_:1}),e($e,{modelValue:U.value,"onUpdate:modelValue":m[8]||(m[8]=S=>U.value=S),color:w.value,timeout:2e3},{default:l(()=>[Q(K(P.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),at={class:"d-flex align-center"},ut=Ie({__name:"AddData",setup(f){const R=p("pendingDataList"),U=Oe(),P=Va(),w=p(0),v=async()=>{const E=xa();try{await ha(E),P.push({name:"Home"})}catch(D){console.error("Logout failed",D)}},F=()=>{w.value++};be(()=>U.isDev,()=>{F()});const j=E=>{R.value=`${E}${E==="card"?"List":""}`};return(E,D)=>(x(),$(Ce,{fluid:"",class:"py-2 px-0"},{default:l(()=>[D[3]||(D[3]=g("h1",null,"DATA MANAGEMENT",-1)),g("div",at,[e(je,{modelValue:J(U).isDev,"onUpdate:modelValue":D[0]||(D[0]=T=>J(U).isDev=T),label:"isDev",color:"pink",density:"compact","hide-details":"","hide-input":"",class:"px-2"},null,8,["modelValue"]),e(N,{text:"Logout",color:"yellow",size:"small",class:"mr-2",onClick:v}),e(N,{text:"Sync","prepend-icon":"mdi-refresh",size:"small",color:"primary",onClick:F})]),e(Da,{modelValue:R.value,"onUpdate:modelValue":D[1]||(D[1]=T=>R.value=T),color:"pink"},{default:l(()=>[e(_e,{value:"pendingDataList",text:"Pending Data"}),e(_e,{value:"cardList",text:"Card"}),e(_e,{value:"skillList",text:"Skill"}),e(_e,{value:"skillDetail",text:"Skill Detail"}),e(_e,{value:"music",text:"Music"}),e(_e,{value:"item",text:"Item"}),e(_e,{value:"event",text:"Event"}),e(_e,{value:"info",text:"Info"})]),_:1},8,["modelValue"]),e(el,{class:"mb-2"}),e(Sa,{modelValue:R.value,"onUpdate:modelValue":D[2]||(D[2]=T=>R.value=T),class:"pt-3"},{default:l(()=>[e(Ne,{value:"pendingDataList"},{default:l(()=>[(x(),$(_a,{key:w.value,onEdit:j}))]),_:1}),e(Ne,{value:"cardList"},{default:l(()=>[(x(),$(Ta,{key:w.value}))]),_:1}),e(Ne,{value:"skillList"},{default:l(()=>[(x(),$(Ya,{key:w.value}))]),_:1}),e(Ne,{value:"skillDetail"},{default:l(()=>[(x(),$(Wa,{key:w.value}))]),_:1}),e(Ne,{value:"music"},{default:l(()=>[(x(),$($a,{key:w.value}))]),_:1}),e(Ne,{value:"item"},{default:l(()=>[(x(),$(za,{key:w.value}))]),_:1}),e(Ne,{value:"event"},{default:l(()=>[(x(),$(lt,{key:w.value}))]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{ut as default};
