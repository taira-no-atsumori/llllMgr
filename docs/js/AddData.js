import{g as yl,p as bl,I as Je,u as gl,a as Vl,c as G,r as b,s as Dl,b as kl,d as Sl,w as xl,o as Me,e as se,f as Ul,h as El,i as Il,V as ze,j as Xe,k as e,m as ye,l as Ye,n as Al,q as Cl,t as wl,v as _l,x as Ae,y as Nl,z as N,F as be,A as Rl,B as We,C as Ml,D as hl,E as nl,G as Ll,H as me,J as qe,K,L as $,M as ie,N as l,O as re,P as L,Q as O,R as r,S as Tl,T as J,U as j,W as Pl,X as je,Y as we,Z as Ol,_ as Ze,$ as $l,a0 as P,a1 as ge,a2 as he,a3 as Le,a4 as Te,a5 as Ue,a6 as Pe,a7 as Ve,a8 as Ne,a9 as oe,aa as Ee,ab as rl,ac as Ie,ad as de,ae as le,af as fe,ag as De,ah as Qe,ai as el,aj as Be,ak as Re,al as Q,am as dl,an as H,ao as D,ap as Oe,aq as Bl,ar as Fl,as as ke,at as Ce,au as ql,av as Se,aw as jl,ax as ll,ay as Hl,az as al,aA as tl,aB as xe,aC as Gl,aD as pe,aE as Kl,aF as te,aG as Jl,aH as _e,aI as Fe,aJ as ul,aK as ol,aL as He,aM as zl,aN as Xl,aO as Yl,aP as Wl,aQ as il,aR as Zl,aS as Ql,aT as ea,aU as la,aV as ce,aW as aa,aX as ve,aY as ta,aZ as ua}from"./index.js";const oa=bl({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:v=>!isNaN(parseFloat(v))},maxRows:{type:[Number,String],validator:v=>!isNaN(parseFloat(v))},suffix:String,modelModifiers:Object,..._l(),...wl(),...Cl()},"VTextarea"),ue=yl()({name:"VTextarea",directives:{vIntersect:Je},inheritAttrs:!1,props:oa(),emits:{"click:control":v=>!0,"mousedown:control":v=>!0,"update:focused":v=>!0,"update:modelValue":v=>!0,"update:rows":v=>!0},setup(v,A){let{attrs:k,emit:C,slots:w}=A;const V=gl(v,"modelValue"),{isFocused:U,focus:p,blur:S}=Vl(v),{onIntersect:o}=Ml(v),R=G(()=>typeof v.counterValue=="function"?v.counterValue(V.value):(V.value||"").toString().length),E=G(()=>{if(k.maxlength)return k.maxlength;if(!(!v.counter||typeof v.counter!="number"&&typeof v.counter!="string"))return v.counter}),y=b(),I=b(),g=Dl(""),i=b(),u=b(0),{platform:t}=kl(),d=Sl(v),m=G(()=>v.persistentPlaceholder||U.value||v.active);function a(){d.isSuppressing.value&&d.update(),i.value!==document.activeElement&&i.value?.focus(),U.value||p()}function B(T){a(),C("click:control",T)}function _(T){C("mousedown:control",T)}function f(T){T.stopPropagation(),a(),Ae(()=>{V.value="",Ll(v["onClick:clear"],T)})}function x(T){const W=T.target;if(V.value=W.value,v.modelModifiers?.trim){const ae=[W.selectionStart,W.selectionEnd];Ae(()=>{W.selectionStart=ae[0],W.selectionEnd=ae[1]})}}const M=b(),q=b(Number(v.rows)),z=G(()=>["plain","underlined"].includes(v.variant));xl(()=>{v.autoGrow||(q.value=Number(v.rows))});function X(){Ae(()=>{if(!i.value)return;if(t.value.firefox){u.value=12;return}const{offsetWidth:T,clientWidth:W}=i.value;u.value=Math.max(0,T-W)}),v.autoGrow&&Ae(()=>{if(!M.value||!I.value)return;const T=getComputedStyle(M.value),W=getComputedStyle(I.value.$el),ae=parseFloat(T.getPropertyValue("--v-field-padding-top"))+parseFloat(T.getPropertyValue("--v-input-padding-top"))+parseFloat(T.getPropertyValue("--v-field-padding-bottom")),c=M.value.scrollHeight,s=parseFloat(T.lineHeight),n=Math.max(parseFloat(v.rows)*s+ae,parseFloat(W.getPropertyValue("--v-input-control-height"))),F=parseFloat(v.maxRows)*s+ae||1/0,h=Nl(c??0,n,F);q.value=Math.floor((h-ae)/s),g.value=Ye(h)})}Me(X),se(V,X),se(()=>v.rows,X),se(()=>v.maxRows,X),se(()=>v.density,X),se(q,T=>{C("update:rows",T)});let Y;return se(M,T=>{T?(Y=new ResizeObserver(X),Y.observe(M.value)):Y?.disconnect()}),Ul(()=>{Y?.disconnect()}),El(()=>{const T=!!(w.counter||v.counter||v.counterValue),W=!!(T||w.details),[ae,c]=Il(k),{modelValue:s,...n}=ze.filterProps(v),F={...Xe.filterProps(v),"onClick:clear":f};return e(ze,ye({ref:y,modelValue:V.value,"onUpdate:modelValue":h=>V.value=h,class:["v-textarea v-text-field",{"v-textarea--prefixed":v.prefix,"v-textarea--suffixed":v.suffix,"v-text-field--prefixed":v.prefix,"v-text-field--suffixed":v.suffix,"v-textarea--auto-grow":v.autoGrow,"v-textarea--no-resize":v.noResize||v.autoGrow,"v-input--plain-underlined":z.value},v.class],style:[{"--v-textarea-scroll-bar-width":Ye(u.value)},v.style]},ae,n,{centerAffix:q.value===1&&!z.value,focused:U.value}),{...w,default:h=>{let{id:Z,isDisabled:ee,isDirty:ne,isReadonly:ml,isValid:cl,hasDetails:vl}=h;return e(Xe,ye({ref:I,style:{"--v-textarea-control-height":g.value},onClick:B,onMousedown:_,"onClick:prependInner":v["onClick:prependInner"],"onClick:appendInner":v["onClick:appendInner"]},F,{id:Z.value,active:m.value||ne.value,centerAffix:q.value===1&&!z.value,dirty:ne.value||v.dirty,disabled:ee.value,focused:U.value,details:vl.value,error:cl.value===!1}),{...w,default:pl=>{let{props:{class:Ge,...Ke},controlRef:fl}=pl;return N(be,null,[v.prefix&&N("span",{class:"v-text-field__prefix"},[v.prefix]),We(N("textarea",ye({ref:$e=>i.value=fl.value=$e,class:Ge,value:V.value,onInput:x,autofocus:v.autofocus,readonly:ml.value,disabled:ee.value,placeholder:v.placeholder,rows:v.rows,name:d.fieldName.value,autocomplete:d.fieldAutocomplete.value,onFocus:a,onBlur:S},Ke,c),null),[[Je,{handler:o},null,{once:!0}]]),v.autoGrow&&We(N("textarea",{class:nl([Ge,"v-textarea__sizer"]),id:`${Ke.id}-sizer`,"onUpdate:modelValue":$e=>V.value=$e,ref:M,readonly:!0,"aria-hidden":"true"},null),[[hl,V.value]]),v.suffix&&N("span",{class:"v-text-field__suffix"},[v.suffix])])}})},details:W?h=>N(be,null,[w.details?.(h),T&&N(be,null,[N("span",null,null),e(Rl,{active:v.persistentCounter||U.value,value:R.value,max:E.value,disabled:v.disabled},w.counter)])]):void 0})}),Al({},y,I,i)}}),ia={key:0,class:"mb-4 text-grey"},sa={key:1},na={class:"text-caption mr-2"},ra={class:"text-caption"},da=me({__name:"PendingData",emits:["edit"],setup(v,{emit:A}){const k=qe(),C=b(!1),w=b(""),V=b(""),U=b([]),p=b(!1),S=b(!1),o=b(""),R=A,E=g=>{k.setEditTarget(g.type,g.key),R("edit",g.type)},y=g=>{if(V.value=JSON.stringify(g.data,null,2),g.status==="update"){let i=null;g.type==="music"?i=k.prodData.music[g.key]:g.type==="card"&&(i=k.flattenCards(k.prodData.card)[g.key]?.data),w.value=JSON.stringify(i,null,2)}else w.value="New Data"},I=async()=>{if(U.value.length===0)return;C.value=!0;const g=Ne(oe.app);try{const i={};for(const u of U.value){const t=k.diffList.find(a=>a.key===u);if(!t)continue;const d=JSON.parse(JSON.stringify(t.data));let m=null;if(t.type==="music"?m=k.prodData.music[t.key]:t.type==="card"&&(m=k.flattenCards(k.prodData.card)[t.key]?.data),d.imageURL&&d.imageURL.startsWith("http")&&(!m||!m.imageURL))try{const B=await(await fetch(d.imageURL)).blob();let _="webp";try{const X=new URL(d.imageURL),T=decodeURIComponent(X.pathname).match(/\.([a-zA-Z0-9]+)$/);T&&(_=T[1])}catch{}const f=`${u}.${_}`,x=t.type==="card"?"cardIllust":t.type==="music"?"cdJacket":"eventInformation",M=Ee(g,`${x}/${f}`),q=await rl(M,B),z=await Ie(q.ref);d.imageURL=z}catch(a){console.error(`Failed to copy image for ${u}:`,a)}i[t.path]=d}await de(le(oe),i),p.value=!0,U.value=[],w.value="",V.value=""}catch(i){console.error("Upload failed:",i),o.value=String(i),S.value=!0}finally{C.value=!1}};return(g,i)=>($(),K(ie,{fluid:"",class:"pa-0"},{default:l(()=>[L(k).diffList.length===0?($(),re("div",ia," Dev環境と本番環境のデータに差分はありません。 ")):($(),re("div",sa,[e(O,{text:"Deploy to Prod",color:"primary","prepend-icon":"mdi-cloud-upload",loading:C.value,disabled:U.value.length===0,onClick:I},null,8,["loading","disabled"]),e(P,{class:"mt-0"},{default:l(()=>[e(r,{cols:"4"},{default:l(()=>[e(Tl,null,{default:l(()=>[J(" Diff: "+j(L(k).diffList.length),1)]),_:1}),e(Pl,{variant:"flat",class:"mb-4"},{default:l(()=>[($(!0),re(be,null,je(L(k).diffList,u=>($(),K(we,{key:u.key,class:nl(u.status==="new"?"bg-blue-lighten-4":"bg-yellow-lighten-4"),onClick:t=>y(u)},{prepend:l(()=>[e($l,{modelValue:U.value,"onUpdate:modelValue":i[0]||(i[0]=t=>U.value=t),value:u.key,color:"pink",onClick:i[1]||(i[1]=Ze(()=>{},["stop"]))},null,8,["modelValue","value"])]),append:l(()=>[e(O,{icon:"mdi-pencil",variant:"text",density:"compact",onClick:Ze(t=>E(u),["stop"])},null,8,["onClick"])]),default:l(()=>[e(Ol,null,{default:l(()=>[N("span",na,"["+j(u.type)+"]",1),J(" "+j(u.data.title||u.data.cardName||u.key)+" ",1),N("span",ra,"("+j(u.status)+")",1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(ue,{modelValue:w.value,"onUpdate:modelValue":i[2]||(i[2]=u=>w.value=u),label:"Prod (Before)","auto-grow":"",readonly:"",variant:"solo"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(ue,{modelValue:V.value,"onUpdate:modelValue":i[3]||(i[3]=u=>V.value=u),label:"Dev (After)","auto-grow":"",readonly:"",variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1})])),e(Pe,{modelValue:S.value,"onUpdate:modelValue":i[5]||(i[5]=u=>S.value=u),"max-width":"600"},{default:l(()=>[e(ge,null,{default:l(()=>[e(he,{class:"text-h5 bg-error"},{default:l(()=>[...i[8]||(i[8]=[J("Upload Failed",-1)])]),_:1}),e(Le,{class:"pt-4"},{default:l(()=>[i[9]||(i[9]=N("p",null," アップロードに失敗しました。コンソールで詳細を確認してください。 ",-1)),i[10]||(i[10]=N("p",{class:"mt-4 font-weight-bold"},"エラーメッセージ:",-1)),e(ue,{"model-value":o.value,readonly:"",variant:"outlined",rows:"5","auto-grow":"",class:"mt-2"},null,8,["model-value"])]),_:1}),e(Te,null,{default:l(()=>[e(Ue),e(O,{color:"primary",text:"Close",onClick:i[4]||(i[4]=u=>S.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ve,{modelValue:p.value,"onUpdate:modelValue":i[7]||(i[7]=u=>p.value=u),timeout:3e3,color:"success"},{actions:l(()=>[e(O,{variant:"text",text:"Close",onClick:i[6]||(i[6]=u=>p.value=!1)})]),default:l(()=>[i[11]||(i[11]=J(" Upload Completed! ",-1))]),_:1},8,["modelValue"])]),_:1}))}}),ma=me({__name:"AddCard",setup(v){const A=fe(),k=qe(),C=b({}),w=b(""),V=b(!1),U=b(""),p=b("success"),S=b(""),o=b({cardName:"",member:Re.KAHO,rare:Be[3],styleType:el.PERFORMER.en,mood:Qe.HAPPY.en,period:De.normal.en,season:"",year:2025,sprit:1,series:"",kana:"",uniqueStatus:{smile:0,pure:0,cool:0,mental:0,BP:100},SAID:"",SAName:"",SAAP:0,SADetail:"",skillID:"",skillName:"",skillAP:0,skillDetail:"",characteristicName:"",characteristicDetail:""}),R=async()=>{if(!S.value)return;let i;try{i=JSON.parse(S.value)}catch{try{i=new Function("return "+S.value)(),S.value=JSON.stringify(i,null,2)}catch{U.value="JSONのフォーマットが不正です",p.value="error",V.value=!0;return}}try{const u=A.isDev?Q:oe,t=Ne(oe.app),d={};for(const[m,a]of Object.entries(i)){const B=o.value.rare;let _="",f="";try{_=await Ie(Ee(t,`cardIllust/${m}_before.webp`))}catch{console.warn(`Before image not found for ${m}`)}try{f=await Ie(Ee(t,`cardIllust/${m}_after.webp`))}catch{console.warn(`After image not found for ${m}`)}const x={...a,imageUrl:{before:_,after:f}};d[`cards/${Bl(m.split("_")[0])}/${B}/${m}`]=x}await de(le(u),d),U.value=`Uploaded to ${A.isDev?"Dev":"Prod"}`,p.value="success",V.value=!0}catch(u){console.error(u),U.value="Error uploading card data",p.value="error",V.value=!0}};Me(()=>{const i=le(Q,"card");dl(i,u=>{const t=u.val();t&&(C.value=t)})}),se([()=>k.editTarget,C],([i,u])=>{if(i&&i.type==="card"&&i.id&&u&&Object.keys(u).length>0){let t=null,d="",m="";for(const a in u){for(const B in u[a])if(u[a][B][i.id]){t=u[a][B][i.id],d=a,m=B;break}if(t)break}if(t){w.value=i.id,o.value.member=d,o.value.rare=m,o.value.cardName=t.cardName,o.value.kana=t.kana,o.value.series=t.series||"",o.value.styleType=t.styleType,o.value.mood=t.mood;const a=Object.entries(De).find(([B,_])=>B===t.gacha.period);o.value.period=a?a[1].en:De.normal.en,o.value.season=t.gacha.addSeason,o.value.uniqueStatus={...t.uniqueStatus},t.specialAppeal&&(o.value.SAID=t.specialAppeal.ID,o.value.SAName=t.specialAppeal.name,o.value.SAAP=t.specialAppeal.AP,o.value.SADetail=JSON.stringify(t.specialAppeal.detail,null,2)),t.skill&&(o.value.skillID=t.skill.ID,o.value.skillName=t.skill.name,o.value.skillAP=t.skill.AP,o.value.skillDetail=JSON.stringify(t.skill.detail,null,2)),t.characteristic&&(o.value.characteristicName=t.characteristic.name,o.value.characteristicDetail=t.characteristic.detail),k.setEditTarget("","")}}},{immediate:!0});function E(){if(w.value)return w.value;const i=o.value.member,u=Fl[i];if(!u)return"???_000";let t=0;const d=C.value[i];if(d){for(const m in d)for(const a in d[m])if(a.startsWith(u+"_")){const B=parseInt(a.split("_")[1],10);!isNaN(B)&&B>t&&(t=B)}}return`${u}_${String(t+1).padStart(3,"0")}`}function y(i){const u=Object.entries(De).find(([,t])=>t.en===i);return u?u[0]:"normal"}const I=G(()=>{const i=E(),u=y(o.value.period),t={cardName:o.value.cardName,styleType:o.value.styleType,mood:o.value.mood,...o.value.series&&{series:o.value.series},kana:o.value.kana,gacha:{addSeason:o.value.season,period:u},uniqueStatus:{smile:o.value.uniqueStatus.smile,pure:o.value.uniqueStatus.pure,cool:o.value.uniqueStatus.cool,mental:o.value.uniqueStatus.mental,BP:o.value.uniqueStatus.BP},specialAppeal:{ID:o.value.SAID,name:o.value.SAName,AP:o.value.SAAP,detail:o.value.SADetail?JSON.parse(o.value.SADetail):[]},skill:{ID:o.value.skillID,name:o.value.skillName,AP:o.value.skillAP,detail:o.value.skillDetail?JSON.parse(o.value.skillDetail):[]},characteristic:{name:o.value.characteristicName,detail:o.value.characteristicDetail,type:[]}},d={[o.value.rare]:{[i]:t}};return JSON.stringify(d,null,2)}),g=async()=>{try{const i=JSON.parse(I.value),u=Object.keys(i)[0],t=Object.keys(i[u])[0],d=i[u][t],m=o.value.member,a={};a[`card/${m}/${u}/${t}`]=d,await de(le(Q),a),U.value="Dev環境にデータをアップロードしました",p.value="success",V.value=!0,w.value=""}catch(i){console.error(i),U.value="アップロードに失敗しました",p.value="error",V.value=!0}};return(i,u)=>($(),K(ie,{fluid:"",class:"pa-0"},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"8"},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"3"},{default:l(()=>[e(H,{modelValue:o.value.member,"onUpdate:modelValue":u[0]||(u[0]=t=>o.value.member=t),label:"Member Name",items:Object.values(L(Re)),"item-text":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(H,{modelValue:o.value.rare,"onUpdate:modelValue":u[1]||(u[1]=t=>o.value.rare=t),label:"Rarity",items:L(Be),"item-text":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(H,{modelValue:o.value.styleType,"onUpdate:modelValue":u[2]||(u[2]=t=>o.value.styleType=t),label:"Style Type",items:Object.values(L(el)).map(t=>t.en),"item-text":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(H,{modelValue:o.value.mood,"onUpdate:modelValue":u[3]||(u[3]=t=>o.value.mood=t),label:"Mood",items:Object.values(L(Qe)).map(t=>t.en),"item-text":"text","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"4"},{default:l(()=>[e(D,{modelValue:o.value.cardName,"onUpdate:modelValue":u[4]||(u[4]=t=>o.value.cardName=t),label:"Card Name",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(D,{modelValue:o.value.kana,"onUpdate:modelValue":u[5]||(u[5]=t=>o.value.kana=t),label:"Kana",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(D,{modelValue:o.value.series,"onUpdate:modelValue":u[6]||(u[6]=t=>o.value.series=t),label:"Series",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:o.value.uniqueStatus.smile,"onUpdate:modelValue":u[7]||(u[7]=t=>o.value.uniqueStatus.smile=t),label:"Smile",type:"number",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:o.value.uniqueStatus.pure,"onUpdate:modelValue":u[8]||(u[8]=t=>o.value.uniqueStatus.pure=t),label:"Pure",type:"number",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:o.value.uniqueStatus.cool,"onUpdate:modelValue":u[9]||(u[9]=t=>o.value.uniqueStatus.cool=t),label:"Cool",type:"number",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:o.value.uniqueStatus.mental,"onUpdate:modelValue":u[10]||(u[10]=t=>o.value.uniqueStatus.mental=t),label:"Mental",type:"number",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:o.value.uniqueStatus.BP,"onUpdate:modelValue":u[11]||(u[11]=t=>o.value.uniqueStatus.BP=t),label:"BP",type:"number",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"3"},{default:l(()=>[e(H,{modelValue:o.value.period,"onUpdate:modelValue":u[12]||(u[12]=t=>o.value.period=t),label:"Period",items:Object.values(L(De)).map(t=>t.en),"item-text":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:o.value.year,"onUpdate:modelValue":u[13]||(u[13]=t=>o.value.year=t),label:"Year",type:"number",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"1"},{default:l(()=>[e(D,{modelValue:o.value.sprit,"onUpdate:modelValue":u[14]||(u[14]=t=>o.value.sprit=t),label:"Sprit",type:"number",min:"0",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:o.value.season,"onUpdate:modelValue":u[15]||(u[15]=t=>o.value.season=t),label:"Add Season",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:o.value.SAID,"onUpdate:modelValue":u[16]||(u[16]=t=>o.value.SAID=t),label:"Special Appeal ID",class:"mb-2",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"]),e(D,{modelValue:o.value.SAName,"onUpdate:modelValue":u[17]||(u[17]=t=>o.value.SAName=t),label:"Special Appeal Name",class:"mb-2",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"]),e(D,{modelValue:o.value.SAAP,"onUpdate:modelValue":u[18]||(u[18]=t=>o.value.SAAP=t),modelModifiers:{number:!0},label:"Special Appeal AP",type:"number",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(ue,{modelValue:o.value.SADetail,"onUpdate:modelValue":u[19]||(u[19]=t=>o.value.SADetail=t),label:"Special Appeal Detail",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:o.value.skillID,"onUpdate:modelValue":u[20]||(u[20]=t=>o.value.skillID=t),label:"Skill ID",class:"mb-2",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"]),e(D,{modelValue:o.value.skillName,"onUpdate:modelValue":u[21]||(u[21]=t=>o.value.skillName=t),label:"Skill Name",class:"mb-2",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"]),e(D,{modelValue:o.value.skillAP,"onUpdate:modelValue":u[22]||(u[22]=t=>o.value.skillAP=t),modelModifiers:{number:!0},label:"Skill AP",type:"number",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(ue,{modelValue:o.value.skillDetail,"onUpdate:modelValue":u[23]||(u[23]=t=>o.value.skillDetail=t),label:"Skill Detail",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:o.value.characteristicName,"onUpdate:modelValue":u[24]||(u[24]=t=>o.value.characteristicName=t),label:"Characteristic Name",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(ue,{modelValue:o.value.characteristicDetail,"onUpdate:modelValue":u[25]||(u[25]=t=>o.value.characteristicDetail=t),label:"Characteristic Detail",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(ue,{label:"Result","auto-grow":"",readonly:"","model-value":I.value},null,8,["model-value"]),e(O,{color:"primary","prepend-icon":"mdi-content-copy",text:"COPY",class:"mr-2",onClick:u[26]||(u[26]=t=>i.navigator.clipboard.writeText(I.value))}),e(O,{color:"green","prepend-icon":"mdi-cloud-upload",text:"Dev Upload",onClick:g})]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(Oe)]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(H,{modelValue:o.value.rare,"onUpdate:modelValue":u[27]||(u[27]=t=>o.value.rare=t),label:"Rarity",items:L(Be),"item-text":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"8"},{default:l(()=>[e(ue,{modelValue:S.value,"onUpdate:modelValue":u[28]||(u[28]=t=>S.value=t)},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(O,{color:"green","prepend-icon":"mdi-cloud-upload",text:`${L(A).isDev?"Dev":"Prod"} Upload`,onClick:u[29]||(u[29]=t=>R())},null,8,["text"])]),_:1})]),_:1}),e(Ve,{modelValue:V.value,"onUpdate:modelValue":u[30]||(u[30]=t=>V.value=t),timeout:3e3,color:p.value},{default:l(()=>[J(j(U.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),ca=me({__name:"AddMusic",setup(v){const A=b(!1),k=b("group"),C=b(!1),w=b([]),V=b(null),U=b(null),p=b(!1),S=b(!1),o=b("データを一時保存しました"),R=b("success"),E=b(!1),y=b(null),I=b(null),g=["あ","か","さ","た","な","は","ま","や","ら","わ","英数"],i=qe(),u=fe(),t=b({});Me(()=>{const c=le(Q,"music");dl(c,s=>{const n=s.val();if(n&&(t.value=n,a.value.musicName==="")){const F=Object.keys(n).length,h=i.pendingList.filter(ee=>ee.type==="music"&&!n[Object.keys(ee.data)[0]]).length,Z=`m_${F+h+1}`;a.value.ID=Z,a.value.ID_original=Z,a.value.ID_preset=Z}})}),se([()=>i.editTarget,t],([c,s])=>{c&&c.type==="music"&&c.id&&s&&Object.keys(s).length>0&&s[c.id]&&(y.value=c.id,q(),i.setEditTarget("",""))},{immediate:!0});const d=G(()=>{let c=Object.entries(t.value);return I.value&&(c=c.filter(([s,n])=>{const F=n.musicData.kana;if(!F)return!1;const h=F.charAt(0);switch(I.value){case"英数":return!/[ぁ-んゔ]/.test(h);case"あ":return/[ぁ-おゔ]/.test(h);case"か":return/[か-ご]/.test(h);case"さ":return/[さ-ぞ]/.test(h);case"た":return/[た-ど]/.test(h);case"な":return/[な-の]/.test(h);case"は":return/[は-ぽ]/.test(h);case"ま":return/[ま-も]/.test(h);case"や":return/[や-よ]/.test(h);case"ら":return/[ら-ろ]/.test(h);case"わ":return/[わ-ん]/.test(h);default:return!0}})),c.map(([s,n])=>({title:n.title,value:s}))}),m=()=>{const c=Object.keys(t.value).length,s=i.pendingList.filter(F=>F.type==="music"&&!t.value[Object.keys(F.data)[0]]).length,n=`m_${c+s+1}`;return{ID:n,ID_original:n,ID_preset:n,musicName:"",musicData:{kana:"",singer:Ce.HASUNOSORA,singer_group:"HASUNOSORA_105",singer_solo:[Re.KAHO],releaseDate:{year:2026,month:1,date:1},numbering:"",BPM:{original:150,inGame:150},time:{minuts:1,seconds:0,miliSeconds:0},cover:!1},imageURL:"",attribute:al.SMILE.en,BHcount:0,level:0,term:105,center:Re.KAHO,bonusSkill:tl.BEAT_HEART_UP,singingMembers:[],scoreData:{difficultyLevel:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1},maxCombo:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1}}}},a=b(m()),B=/^[\u3040-\u309F\u30FC0-9]*$/,_=[c=>B.test(c)||"ひらがなと数字のみ入力可能です"],f=G({get:()=>{const c=a.value.musicData.releaseDate;return`${c.year}-${String(c.month).padStart(2,"0")}-${String(c.date).padStart(2,"0")}`},set:c=>{if(!c)return;const[s,n,F]=c.split("-").map(Number);a.value.musicData.releaseDate.year=s,a.value.musicData.releaseDate.month=n,a.value.musicData.releaseDate.date=F}});se(E,c=>{c&&(a.value.musicData.releaseDate={year:2099,month:12,date:31})});const x=G(()=>a.value.musicName!==""&&a.value.musicData.kana!==""&&B.test(a.value.musicData.kana)),M=G(()=>{if(k.value==="group"){const c=a.value.musicData.singer_group;return ke[c].MEMBERS}else return a.value.musicData.singer_solo}),q=()=>{if(!y.value)return;const c=t.value[y.value];if(!c)return;if(A.value=!0,a.value.ID_preset=y.value,a.value.ID=A.value?y.value:a.value.ID_original,a.value.musicName=c.title,a.value.musicData.kana=c.musicData.kana,a.value.musicData.singer=c.musicData.singer,Object.values(Ce).includes(c.musicData.singer)){k.value="group";const F=Object.entries(Ce).find(([ee,ne])=>ne===c.musicData.singer),h=F?F[0]:null,Z=Object.entries(ke).find(([ee,ne])=>ne.KEY===h&&JSON.stringify(ne.MEMBERS)===JSON.stringify(c.singingMembers));Z&&(a.value.musicData.singer_group=Z[0])}else k.value="solo",a.value.musicData.singer_group=m().musicData.singer_group;a.value.musicData.singer_solo=c.singingMembers,a.value.musicData.releaseDate={...c.musicData.releaseDate},E.value=a.value.musicData.releaseDate.year===2099&&a.value.musicData.releaseDate.month===12&&a.value.musicData.releaseDate.date===31,a.value.musicData.numbering=c.musicData.numbering,a.value.musicData.BPM={...c.musicData.BPM},a.value.musicData.cover=c.musicData.cover;const s=c.musicData.time;a.value.musicData.time.minuts=Math.floor(s/60);const n=Math.floor(s%60);a.value.musicData.time.seconds=n,a.value.musicData.time.miliSeconds=parseFloat(((s-a.value.musicData.time.minuts*60-n)*10).toFixed(1)),a.value.imageURL=c.imageURL||"",a.value.attribute=c.attribute,a.value.BHcount=c.BHcount,a.value.level=c.level,a.value.term=c.term,a.value.center=c.center,a.value.bonusSkill=c.bonusSkill,a.value.singingMembers=[...c.singingMembers],c.scoreData?(p.value=!0,a.value.scoreData=JSON.parse(JSON.stringify(c.scoreData))):(p.value=!1,a.value.scoreData={difficultyLevel:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1},maxCombo:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1}}),y.value=null},z=()=>{A.value=!1,y.value=null,p.value=!1,a.value=m(),E.value=!1},X=async()=>{try{const c=JSON.parse(ae.value),s=Object.keys(c)[0];if(C.value=!0,V.value){const F=Ne(Q.app),h=Ee(F,`cdJacket/${V.value.name}`),Z=await rl(h,V.value),ee=await Ie(Z.ref);c[s].imageURL=ee,u.imageCache.llllMgr_musicImageUrls||(u.imageCache.llllMgr_musicImageUrls={}),u.imageCache.llllMgr_musicImageUrls[s]=ee}const n={};n[`music/${s}`]=c[s],await de(le(Q),n),o.value="Dev環境にデータをアップロードしました",R.value="success",S.value=!0,W()}catch(c){console.error("Failed to parse JSON",c),o.value="アップロードに失敗しました",R.value="error",S.value=!0}finally{C.value=!1}},Y=async()=>{if(!a.value.musicName)return;const c=Ne(Q.app),s=Ee(c,"cdJacket");try{const F=(await Kl(s)).items.find(h=>{const Z=h.name,ee=Z.lastIndexOf(".");return(ee!==-1?Z.substring(0,ee):Z)===a.value.musicName});if(F){const h=await Ie(F);a.value.imageURL=h,u.imageCache.llllMgr_musicImageUrls||(u.imageCache.llllMgr_musicImageUrls={}),u.imageCache.llllMgr_musicImageUrls[a.value.ID]=h,o.value="画像URLを取得しました",R.value="success",S.value=!0}else o.value="画像が見つかりませんでした",R.value="warning",S.value=!0}catch(n){console.error("Failed to fetch image",n),o.value="画像の取得に失敗しました",R.value="error",S.value=!0}},T=c=>{const s=Array.isArray(c)?c[0]:c;if(!s){W();return}V.value=s;const n=new FileReader;n.onload=F=>{U.value=F.target?.result},n.readAsDataURL(s)},W=()=>{V.value=null,U.value=null,w.value=[]},ae=G(()=>{const c=(a.value.musicData.time.minuts||0)*60+(a.value.musicData.time.seconds||0)+(a.value.musicData.time.miliSeconds||0)/10,s={[A.value?a.value.ID_preset:a.value.ID_original]:{title:a.value.musicName,musicData:{kana:a.value.musicData.kana,singer:k.value==="group"?Ce[ke[a.value.musicData.singer_group].KEY]:a.value.musicData.singer_solo.map(n=>ql(n)).join("、"),releaseDate:{year:a.value.musicData.releaseDate.year,month:a.value.musicData.releaseDate.month,date:a.value.musicData.releaseDate.date},numbering:a.value.musicData.numbering,BPM:{original:a.value.musicData.BPM.original,inGame:a.value.musicData.BPM.inGame},time:c,cover:a.value.musicData.cover},imageURL:a.value.imageURL,attribute:a.value.attribute,BHcount:a.value.BHcount,level:a.value.level,term:a.value.term,center:a.value.center,bonusSkill:a.value.bonusSkill,singingMembers:k.value==="group"?ke[a.value.musicData.singer_group].MEMBERS:a.value.musicData.singer_solo}};return p.value&&(s[A.value?a.value.ID_preset:a.value.ID_original].scoreData={difficultyLevel:{NORMAL:a.value.scoreData.difficultyLevel.NORMAL,HARD:a.value.scoreData.difficultyLevel.HARD,EXPERT:a.value.scoreData.difficultyLevel.EXPERT,MASTER:a.value.scoreData.difficultyLevel.MASTER},maxCombo:{NORMAL:a.value.scoreData.maxCombo.NORMAL,HARD:a.value.scoreData.maxCombo.HARD,EXPERT:a.value.scoreData.maxCombo.EXPERT,MASTER:a.value.scoreData.maxCombo.MASTER}}),JSON.stringify(s,null,2)});return(c,s)=>($(),K(ie,{fluid:"",class:"pa-0"},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"8"},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"2"},{default:l(()=>[e(H,{modelValue:I.value,"onUpdate:modelValue":s[0]||(s[0]=n=>I.value=n),label:"五十音",items:g,clearable:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"7"},{default:l(()=>[e(H,{modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=n=>y.value=n),label:"Preset",items:d.value,"item-title":"title","item-value":"value",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(O,{color:"primary",text:"Set",disabled:!y.value,onClick:q},null,8,["disabled"]),e(O,{color:"warning",text:"Reset",class:"mx-2",onClick:z}),e(O,{color:"yellow","prepend-icon":"mdi-image-sync",text:"get",disabled:!a.value.musicName,onClick:Y},null,8,["disabled"])]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(Oe)]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(Se,{modelValue:A.value,"onUpdate:modelValue":s[2]||(s[2]=n=>A.value=n),label:"ID Override",color:"pink",disabled:a.value.ID_preset===a.value.ID_original,class:"pl-2",density:"compact","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{"model-value":A.value?a.value.ID_preset:a.value.ID_original,label:"Music ID",readonly:"","prepend-inner-icon":"mdi-information",density:"compact",variant:"outlined","hide-details":""},null,8,["model-value"])]),_:1}),e(r,{cols:"5"},{default:l(()=>[e(D,{modelValue:a.value.musicName,"onUpdate:modelValue":s[3]||(s[3]=n=>a.value.musicName=n),label:"Music Name",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"5"},{default:l(()=>[e(D,{modelValue:a.value.musicData.kana,"onUpdate:modelValue":s[4]||(s[4]=n=>a.value.musicData.kana=n),label:"Kana",required:"",rules:_,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,null,{default:l(()=>[e(jl,{modelValue:k.value,"onUpdate:modelValue":s[5]||(s[5]=n=>k.value=n),label:"Singer",inline:"",density:"compact","hide-details":""},{default:l(()=>[e(ll,{label:"Group",value:"group",color:"pink",class:"mr-3"}),e(ll,{label:"Solo",value:"solo",color:"pink"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[e(H,{modelValue:a.value.musicData.singer_group,"onUpdate:modelValue":s[6]||(s[6]=n=>a.value.musicData.singer_group=n),items:Object.entries(L(ke)).map(([n,F])=>({title:F.NAME,value:n})),"item-title":"title","item-value":"value",label:"Group",disabled:k.value!=="group",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(H,{modelValue:a.value.musicData.singer_solo,"onUpdate:modelValue":s[7]||(s[7]=n=>a.value.musicData.singer_solo=n),items:L(Hl)(),label:"Solo",multiple:"",disabled:k.value!=="solo",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:f.value,"onUpdate:modelValue":s[8]||(s[8]=n=>f.value=n),label:"Release Date",type:"date",disabled:E.value,required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(Se,{modelValue:E.value,"onUpdate:modelValue":s[9]||(s[9]=n=>E.value=n),label:"Unknown Date",color:"pink",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[e(D,{modelValue:a.value.musicData.numbering,"onUpdate:modelValue":s[10]||(s[10]=n=>a.value.musicData.numbering=n),label:"Numbering",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.musicData.BPM.original,"onUpdate:modelValue":s[11]||(s[11]=n=>a.value.musicData.BPM.original=n),modelModifiers:{number:!0},label:"BPM (Original)",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.musicData.BPM.inGame,"onUpdate:modelValue":s[12]||(s[12]=n=>a.value.musicData.BPM.inGame=n),modelModifiers:{number:!0},label:"BPM (In Game)",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.musicData.time.minuts,"onUpdate:modelValue":s[13]||(s[13]=n=>a.value.musicData.time.minuts=n),modelModifiers:{number:!0},label:"Time (minuts)",type:"number",max:"9",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.musicData.time.seconds,"onUpdate:modelValue":s[14]||(s[14]=n=>a.value.musicData.time.seconds=n),modelModifiers:{number:!0},label:"Time (seconds)",type:"number",max:"59",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.musicData.time.miliSeconds,"onUpdate:modelValue":s[15]||(s[15]=n=>a.value.musicData.time.miliSeconds=n),modelModifiers:{number:!0},label:"Time (miliSeconds)",type:"number",step:"0.1",max:"99.9",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(Se,{modelValue:a.value.musicData.cover,"onUpdate:modelValue":s[16]||(s[16]=n=>a.value.musicData.cover=n),label:"Cover",color:"pink",class:"pl-1",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"2"},{default:l(()=>[e(H,{modelValue:a.value.attribute,"onUpdate:modelValue":s[17]||(s[17]=n=>a.value.attribute=n),label:"Attribute",items:Object.values(L(al)).map(n=>n.en),"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.BHcount,"onUpdate:modelValue":s[18]||(s[18]=n=>a.value.BHcount=n),modelModifiers:{number:!0},label:"BH Count",type:"number",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.level,"onUpdate:modelValue":s[19]||(s[19]=n=>a.value.level=n),modelModifiers:{number:!0},label:"Level",type:"number",max:"1",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(D,{modelValue:a.value.term,"onUpdate:modelValue":s[20]||(s[20]=n=>a.value.term=n),modelModifiers:{number:!0},label:"Term",type:"number",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[e(H,{modelValue:a.value.center,"onUpdate:modelValue":s[21]||(s[21]=n=>a.value.center=n),label:"Center",items:M.value,"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(H,{modelValue:a.value.bonusSkill,"onUpdate:modelValue":s[22]||(s[22]=n=>a.value.bonusSkill=n),label:"Bonus Skill",items:Object.entries(L(tl)).map(([n,F])=>F),"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(P,{class:"pl-2"},{default:l(()=>[e(r,null,{default:l(()=>[e(Se,{modelValue:p.value,"onUpdate:modelValue":s[23]||(s[23]=n=>p.value=n),color:"pink",label:"Include Score Data (Difficulty Level & Max Combo)",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[s[36]||(s[36]=N("h3",{class:"mb-3"},"Difficulty Level",-1)),e(P,null,{default:l(()=>[e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.difficultyLevel.NORMAL,"onUpdate:modelValue":s[24]||(s[24]=n=>a.value.scoreData.difficultyLevel.NORMAL=n),modelModifiers:{number:!0},label:"NORMAL",type:"number",max:"99",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.difficultyLevel.HARD,"onUpdate:modelValue":s[25]||(s[25]=n=>a.value.scoreData.difficultyLevel.HARD=n),modelModifiers:{number:!0},label:"HARD",type:"number",max:"99",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.difficultyLevel.EXPERT,"onUpdate:modelValue":s[26]||(s[26]=n=>a.value.scoreData.difficultyLevel.EXPERT=n),modelModifiers:{number:!0},label:"EXPERT",type:"number",max:"99",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.difficultyLevel.MASTER,"onUpdate:modelValue":s[27]||(s[27]=n=>a.value.scoreData.difficultyLevel.MASTER=n),modelModifiers:{number:!0},label:"MASTER",type:"number",max:"99",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(r,{cols:"6"},{default:l(()=>[s[37]||(s[37]=N("h3",{class:"mb-3"},"Max Combo",-1)),e(P,null,{default:l(()=>[e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.maxCombo.NORMAL,"onUpdate:modelValue":s[28]||(s[28]=n=>a.value.scoreData.maxCombo.NORMAL=n),modelModifiers:{number:!0},label:"NORMAL",type:"number",max:"9999",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.maxCombo.HARD,"onUpdate:modelValue":s[29]||(s[29]=n=>a.value.scoreData.maxCombo.HARD=n),modelModifiers:{number:!0},label:"HARD",type:"number",max:"9999",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.maxCombo.EXPERT,"onUpdate:modelValue":s[30]||(s[30]=n=>a.value.scoreData.maxCombo.EXPERT=n),modelModifiers:{number:!0},label:"EXPERT",type:"number",max:"9999",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(r,{cols:"3"},{default:l(()=>[e(D,{modelValue:a.value.scoreData.maxCombo.MASTER,"onUpdate:modelValue":s[31]||(s[31]=n=>a.value.scoreData.maxCombo.MASTER=n),modelModifiers:{number:!0},label:"MASTER",type:"number",max:"9999",min:"1",disabled:!p.value,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[e(O,{color:"primary","prepend-icon":"mdi-content-copy",text:"Copy",class:"mr-5",onClick:s[32]||(s[32]=n=>c.navigator.clipboard.writeText(ae.value.value))}),e(O,{color:"green","prepend-icon":"mdi-cloud-upload",text:"Dev Upload",disabled:!x.value,onClick:X},null,8,["disabled"])]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(Gl,{modelValue:w.value,"onUpdate:modelValue":[s[33]||(s[33]=n=>w.value=n),T],label:"Jacket Image",accept:"image/webp","prepend-icon":"mdi-image",density:"compact",variant:"outlined","hide-details":"",loading:C.value},null,8,["modelValue","loading"])]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(D,{modelValue:a.value.imageURL,"onUpdate:modelValue":s[34]||(s[34]=n=>a.value.imageURL=n),label:"Image URL","prepend-icon":"mdi-link-variant",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),a.value.imageURL?($(),K(r,{key:0,cols:"12",class:"text-center"},{default:l(()=>[e(pe,{src:a.value.imageURL,"max-height":"200",contain:""},null,8,["src"])]),_:1})):xe("",!0),e(r,{cols:"12"},{default:l(()=>[e(ue,{label:"Result","auto-grow":"",readonly:"",rows:"42","model-value":ae.value},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ve,{modelValue:S.value,"onUpdate:modelValue":s[35]||(s[35]=n=>S.value=n),timeout:3e3,color:R.value},{default:l(()=>[J(j(o.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),va={style:{width:"15%"}},pa={style:{width:"5%"}},fa={style:{width:"5%"}},ya={style:{width:"20%"}},ba={key:1},ga={style:{width:"30%"}},Va={key:1},Da={style:{width:"25%"}},ka={key:1},Sa=me({__name:"AddItem",setup(v){const A=fe(),k=b(105),C=b("Spring"),w=b(1),V=b(Array.from({length:15},()=>({skillBook:"ITEMS.NONE",piece:"ITEMS.NONE",charm:"ITEMS.NONE"}))),U=G(()=>{const E=[{title:te.NONE,value:"ITEMS.NONE"}];return Object.entries(te.SKILL_BOOK).forEach(([y,I])=>{E.push({title:I,value:`ITEMS.SKILL_BOOK.${y}`})}),E}),p=G(()=>{const E=[{title:te.NONE,value:"ITEMS.NONE"}];return Object.entries(te.CHARM).forEach(([y,I])=>{typeof I=="object"?Object.entries(I).forEach(([g,i])=>{E.push({title:i,value:`ITEMS.CHARM.${y}.${g}`})}):E.push({title:I,value:`ITEMS.CHARM.${y}`})}),E}),S=G(()=>{const E=V.value.map(y=>`        {
          獲得可能アイテム: [${y.skillBook}, ${y.piece}, ${y.charm}],
          //'低確率獲得可能アイテム': ITEMS.SKILL_BOOK.LOW,
        }`).join(`,
`);return`    ${C.value}: [
      [
${E}
      ],
    ],`}),o=G(()=>{const E=[{title:te.NONE,value:"ITEMS.NONE"}],y=I=>{Object.entries(te.PIECE[I]).forEach(([g,i])=>{E.push({title:i,value:`ITEMS.PIECE.${I}.${g}`})})};switch(y("GARNET"),y("CARNELIAN"),C.value){case"Spring":y("EMERALD"),y("DIA");break;case"Summer":y("PERIDOT"),y("RUBY");break;case"Autumn":y("TOPAZ"),y("SAPPHIRE");break;case"Winter":y("TURQUOISE"),y("AMETHYST");break}return E}),R=E=>{E=/技能書/.test(E)?E:E.split("(")[0];for(const y in ul)if(E===y)return ul[y]};return(E,y)=>($(),K(ie,{fluid:"",class:"pa-0"},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"8"},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"4"},{default:l(()=>[e(H,{modelValue:k.value,"onUpdate:modelValue":y[0]||(y[0]=I=>k.value=I),items:[103,104,105],label:"Period"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(H,{modelValue:C.value,"onUpdate:modelValue":y[1]||(y[1]=I=>C.value=I),items:["Spring","Summer","Autumn","Winter"],label:"Season"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(H,{modelValue:w.value,"onUpdate:modelValue":y[2]||(y[2]=I=>w.value=I),items:[1,2,3,4,5],label:"Area"},null,8,["modelValue"])]),_:1})]),_:1}),e(Oe,{class:"mb-5"}),e(Jl,null,{default:l(()=>[y[4]||(y[4]=N("thead",null,[N("tr",null,[N("th",{style:{width:"15%"}},"期/季節"),N("th",{style:{width:"5%"}},"Area"),N("th",{style:{width:"5%"}},"Stage"),N("th",{style:{width:"20%"}},"Item (Skill Book)"),N("th",{style:{width:"30%"}},"Item (Piece)"),N("th",{style:{width:"25%"}},"Item (Charm)")])],-1)),N("tbody",null,[($(),re(be,null,je(15,I=>N("tr",{key:I},[N("td",va,j(`${k.value}期${C.value}`),1),N("td",pa,j(w.value),1),N("td",fa,j(I),1),N("td",ya,[e(H,{modelValue:V.value[I-1].skillBook,"onUpdate:modelValue":g=>V.value[I-1].skillBook=g,items:U.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":!0},{item:l(({props:g,item:i})=>[e(we,ye({ref_for:!0},g,{title:i.title}),{prepend:l(()=>[i.title!==L(te).NONE?($(),K(pe,{key:0,src:L(A).getImagePath("icons/trainingItem",i.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):xe("",!0)]),_:2},1040,["title"])]),selection:l(({item:g})=>[g.title!==L(te).NONE?($(),K(_e,{key:0,pill:"",class:"pl-0",color:R(g.title)},{default:l(()=>[e(Fe,{left:"",class:"mr-1"},{default:l(()=>[e(pe,{src:L(A).getImagePath("icons/trainingItem",g.title)},null,8,["src"])]),_:2},1024),J(" "+j(g.title),1)]),_:2},1032,["color"])):($(),re("span",ba,j(g.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])]),N("td",ga,[e(H,{modelValue:V.value[I-1].piece,"onUpdate:modelValue":g=>V.value[I-1].piece=g,items:o.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":!0},{item:l(({props:g,item:i})=>[e(we,ye({ref_for:!0},g,{title:i.title}),{prepend:l(()=>[i.title!==L(te).NONE?($(),K(pe,{key:0,src:L(A).getImagePath("icons/trainingItem",i.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):xe("",!0)]),_:2},1040,["title"])]),selection:l(({item:g})=>[g.title!==L(te).NONE?($(),K(_e,{key:0,pill:"",class:"pl-0",color:R(g.title)},{default:l(()=>[e(Fe,{left:"",class:"mr-1"},{default:l(()=>[e(pe,{src:L(A).getImagePath("icons/trainingItem",g.title)},null,8,["src"])]),_:2},1024),J(" "+j(g.title),1)]),_:2},1032,["color"])):($(),re("span",Va,j(g.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])]),N("td",Da,[e(H,{modelValue:V.value[I-1].charm,"onUpdate:modelValue":g=>V.value[I-1].charm=g,items:p.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":!0},{item:l(({props:g,item:i})=>[e(we,ye({ref_for:!0},g,{title:i.title}),{prepend:l(()=>[i.title!==L(te).NONE?($(),K(pe,{key:0,src:L(A).getImagePath("icons/trainingItem",i.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):xe("",!0)]),_:2},1040,["title"])]),selection:l(({item:g})=>[g.title!==L(te).NONE?($(),K(_e,{key:0,pill:"",class:"pl-0",color:R(g.title)},{default:l(()=>[e(Fe,{left:"",class:"mr-1"},{default:l(()=>[e(pe,{src:L(A).getImagePath("icons/trainingItem",g.title)},null,8,["src"])]),_:2},1024),J(" "+j(g.title),1)]),_:2},1032,["color"])):($(),re("span",ka,j(g.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])])])),64))])]),_:1})]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(O,{color:"primary","prepend-icon":"mdi-content-copy",text:"COPY",class:"mb-3",onClick:y[3]||(y[3]=I=>E.navigator.clipboard.writeText(S.value))}),e(ue,{label:"Result","auto-grow":"",readonly:"",rows:"42","model-value":S.value},null,8,["model-value"])]),_:1})]),_:1})]),_:1}))}}),xa={class:"text-h5"},Ua=me({__name:"AddSkill",setup(v){const A=fe(),k=b(""),C=G(()=>{const u=[];if(!ol)return u;for(const[t,d]of Object.entries(ol))if(!(typeof d!="object"||d===null))for(const[m,a]of Object.entries(d))u.push({category:t,id:m,...typeof a=="object"?a:{value:a}});return u}),w=G(()=>{if(C.value.length===0)return[{title:"Category",key:"category"},{title:"ID",key:"id"},{title:"Actions",key:"actions",sortable:!1}];const u=new Set;C.value.forEach(d=>{Object.keys(d).forEach(m=>{m!=="category"&&m!=="id"&&u.add(m)})});const t=Array.from(u).map(d=>({title:d,key:d}));return[{title:"Category",key:"category"},{title:"ID",key:"id"},...t,{title:"Actions",key:"actions",sortable:!1}]}),V=b(!1),U=b(!1),p=b({}),S=G(()=>p.value),o=b(!1),R=b(""),E=b("success"),y=()=>{p.value={category:"",id:"",name:"",description:""},U.value=!0,V.value=!0},I=u=>{p.value=JSON.parse(JSON.stringify(u)),U.value=!1,V.value=!0},g=()=>{V.value=!1},i=async()=>{const u=A.isDev?Q:oe,t={};if(!p.value.category||!p.value.id){R.value="Category and ID are required",E.value="error",o.value=!0;return}if(U.value&&C.value.some(_=>_.category===p.value.category&&_.id===p.value.id)){R.value="This Category/ID combination already exists",E.value="error",o.value=!0;return}const{category:d,id:m,...a}=p.value;t[`skillList/${d}/${m}`]=a;try{await de(le(u),t),R.value=`Saved to ${A.isDev?"Dev":"Prod"}`,E.value="success",o.value=!0,V.value=!1}catch(B){console.error(B),R.value="Error saving data",E.value="error",o.value=!0}};return(u,t)=>($(),K(ie,{fluid:"",class:"pa-2"},{default:l(()=>[t[6]||(t[6]=N("h2",{class:"mb-2"},"Skill List",-1)),e(ge,null,{default:l(()=>[e(D,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=d=>k.value=d),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",class:"ma-2"},{append:l(()=>[e(O,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:y})]),_:1},8,["modelValue"]),e(He,{headers:w.value,items:C.value,search:k.value,density:"compact",class:"elevation-1","items-per-page":50,hover:""},{"item.actions":l(({item:d})=>[e(zl,{class:"me-2",size:"small",onClick:m=>I(d)},{default:l(()=>[...t[5]||(t[5]=[J(" mdi-pencil ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["headers","items","search"])]),_:1}),e(Pe,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=d=>V.value=d),"max-width":"800px"},{default:l(()=>[e(ge,null,{default:l(()=>[e(he,null,{default:l(()=>[N("span",xa,j(U.value?"New Skill":"Edit Skill"),1)]),_:1}),e(Le,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"12",sm:"6"},{default:l(()=>[e(D,{modelValue:p.value.category,"onUpdate:modelValue":t[1]||(t[1]=d=>p.value.category=d),label:"Category",readonly:!U.value,variant:U.value?"outlined":"filled"},null,8,["modelValue","readonly","variant"])]),_:1}),e(r,{cols:"12",sm:"6"},{default:l(()=>[e(D,{modelValue:p.value.id,"onUpdate:modelValue":t[2]||(t[2]=d=>p.value.id=d),label:"ID",readonly:!U.value,variant:U.value?"outlined":"filled"},null,8,["modelValue","readonly","variant"])]),_:1}),($(!0),re(be,null,je(S.value,(d,m)=>($(),K(r,{key:m,cols:"12"},{default:l(()=>[typeof d=="object"||m==="detail"||m==="description"?($(),K(ue,{key:0,modelValue:p.value[m],"onUpdate:modelValue":a=>p.value[m]=a,label:String(m),"auto-grow":"",rows:"3"},null,8,["modelValue","onUpdate:modelValue","label"])):($(),K(D,{key:1,modelValue:p.value[m],"onUpdate:modelValue":a=>p.value[m]=a,label:String(m)},null,8,["modelValue","onUpdate:modelValue","label"]))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Te,null,{default:l(()=>[e(Ue),e(O,{color:"blue-darken-1",variant:"text",text:"Cancel",onClick:g}),e(O,{color:"blue-darken-1",variant:"text",text:"Save",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ve,{modelValue:o.value,"onUpdate:modelValue":t[4]||(t[4]=d=>o.value=d),timeout:3e3,color:E.value},{default:l(()=>[J(j(R.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),sl={heartCaptcha:"ハートキャプチャ系",loveAttract:"ラブアトラクト系",voltage:"ボルテージ系",mental:"メンタル系",extend:"手札枚数変更系",boost:"ブースト系",AP:"AP変化系",other:"その他"},Ea=me({__name:"AddSkillDetail",setup(v){const A=fe(),k=Xl(),C=b(""),w=G(()=>Object.entries(sl).map(([t,d])=>({title:d,value:t}))),V=[{title:"ID",key:"id"},{title:"Skill Detail Name",key:"skillDetailName"},{title:"Color Code",key:"colorCode"},{title:"Skill Type",key:"skillTypeKey"},{title:"Description",key:"description"},{title:"Edit",key:"edit",sortable:!1}],U=G(()=>{const t=Object.entries(k.skillDetails).map(([d,m])=>({id:d,...typeof m=="object"?m:{value:m}}));return C.value?t.filter(d=>d.skillTypeKey===C.value):t}),p=b(!1),S=b({id:"",skillDetailName:"",colorCode:"",description:"",skillTypeKey:"heartCaptcha"}),o=b(!1),R=b(!1),E=b(""),y=b("success"),I=()=>{S.value={id:"",skillDetailName:"",colorCode:"",description:"",skillTypeKey:"heartCaptcha"},o.value=!0,p.value=!0},g=t=>{S.value={...t},o.value=!1,p.value=!0},i=()=>{p.value=!1},u=async()=>{const t=A.isDev?Q:oe,d={};if(!S.value.id){E.value="ID is required",y.value="error",R.value=!0;return}if(o.value&&U.value.some(B=>B.id===S.value.id)){E.value="ID already exists",y.value="error",R.value=!0;return}const{id:m,...a}=S.value;d[`skills/skillDetail/${m}`]=a;try{await de(le(t),d),E.value=`Saved to ${A.isDev?"Dev":"Prod"}`,y.value="success",R.value=!0,p.value=!1}catch(B){console.error(B),E.value="Error saving data",y.value="error",R.value=!0}};return(t,d)=>($(),K(ie,{fluid:"",class:"pa-0"},{default:l(()=>[e(ge,null,{default:l(()=>[e(H,{modelValue:C.value,"onUpdate:modelValue":d[0]||(d[0]=m=>C.value=m),items:w.value,label:"Filter by Skill Type","prepend-inner-icon":"mdi-filter",variant:"outlined","hide-details":"",class:"ma-2",clearable:""},{append:l(()=>[e(O,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:I})]),_:1},8,["modelValue","items"]),e(He,{headers:V,items:U.value,density:"compact","items-per-page":-1,hover:""},{"item.colorCode":l(({value:m})=>[m?($(),K(_e,{key:0,color:m,size:"small",variant:"flat"},{default:l(()=>[J(j(m),1)]),_:2},1032,["color"])):xe("",!0)]),"item.skillTypeKey":l(({value:m})=>[J(j(L(sl)[m]||m),1)]),"item.edit":l(({item:m})=>[e(O,{class:"me-2",size:"small",variant:"tonal",icon:"mdi-pencil",onClick:a=>g(m)},null,8,["onClick"])]),_:2},1032,["items"])]),_:1}),e(Pe,{modelValue:p.value,"onUpdate:modelValue":d[6]||(d[6]=m=>p.value=m),"max-width":"600px"},{default:l(()=>[e(ge,{class:"pa-2"},{default:l(()=>[e(he,null,{default:l(()=>[...d[8]||(d[8]=[N("span",{class:"text-h5"},"Edit Skill Detail",-1)])]),_:1}),e(Le,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[e(D,{modelValue:S.value.id,"onUpdate:modelValue":d[1]||(d[1]=m=>S.value.id=m),label:"ID",readonly:!o.value,disabled:!o.value,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","readonly","disabled"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:S.value.skillDetailName,"onUpdate:modelValue":d[2]||(d[2]=m=>S.value.skillDetailName=m),label:"Skill Detail Name",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:S.value.colorCode,"onUpdate:modelValue":d[3]||(d[3]=m=>S.value.colorCode=m),label:"Color Code",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(H,{modelValue:S.value.skillTypeKey,"onUpdate:modelValue":d[4]||(d[4]=m=>S.value.skillTypeKey=m),items:w.value,"item-title":"title","item-value":"value",label:"Skill Type",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(ue,{modelValue:S.value.description,"onUpdate:modelValue":d[5]||(d[5]=m=>S.value.description=m),label:"Description",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Te,null,{default:l(()=>[e(Ue),e(O,{text:"Cancel",onClick:i}),e(O,{text:"Save",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ve,{modelValue:R.value,"onUpdate:modelValue":d[7]||(d[7]=m=>R.value=m),timeout:3e3,color:y.value},{default:l(()=>[J(j(E.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),Ia={liveGP:{title:"ライブグランプリ「105期 FinalTerm 第1回 サークル対抗戦」",text:"",type:"liveGP",firstDay:[2026,1,23,12,0],lastDay:[2026,1,29,3,59],link:"https://www.lovelive-anime.jp/hasunosora/appnews/detail/?p=2026-01-21-20-ho7w1y5dnm",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F105%E6%9C%9F%20FinalTerm%20%E7%AC%AC1%E5%9B%9E%20%E3%82%B5%E3%83%BC%E3%82%AF%E3%83%AB%E5%AF%BE%E6%8A%97%E6%88%A6_logo.webp?alt=media&token=9a114663-5136-4ca2-a01d-d902723a2242"},fesReCLive:{title:"103-105th Fes×ReC:LIVE ～Road to Bloom～",text:"",type:"live",firstDay:[2026,1,21,0,0],lastDay:[2026,1,22,23,59],link:"https://www.lovelive-anime.jp/hasunosora/live-event/live_detail.php?p=RTB",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2FFes%C3%97REC_RtB.webp?alt=media&token=c69b2a09-ae79-44ee-9277-0b41c5074693"},fesLive:{title:"Fes×LIVE「105期 FinalTerm Fes×LIVE」",text:"Bloom Garden Party",type:"live",firstDay:[2026,3,30,20,0],lastDay:[2026,3,30,21,0],link:"https://x.com/hasunosora_SIC/status/2005270008532775019?s=20",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F105%E6%9C%9F%20FinalTerm%20Fes%C3%97LIVE_mv.webp?alt=media&token=f48cbbc9-d960-4c67-ac3a-1e3ab19195cf"},movie:{title:"映画蓮ノ空 ～Bloom Garden Party～",text:"",type:"movie",firstDay:[2026,5,8,0,0],lastDay:[2026,6,25,23,59],link:"https://www.lovelive-anime.jp/hasunosora/movie/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2Fmovie_01.webp?alt=media&token=83d27de5-364d-40c0-a2a2-0aef864cc9df"},"6thLiveDream_Bloom":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Bloom Stage",type:"live",firstDay:[2026,5,2,0,0],lastDay:[2026,5,3,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_bloom_logo.webp?alt=media&token=b2a6a531-7878-4047-be1d-d9dd75dcb4c3"},"6thLiveDream_Garden":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Garden Stage",type:"live",firstDay:[2026,5,23,0,0],lastDay:[2026,5,24,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_garden_logo.webp?alt=media&token=549a33ef-8ebf-4817-b313-c2e9432cad44"},"6thLiveDream_Party":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Party Stage",type:"live",firstDay:[2026,5,30,0,0],lastDay:[2026,5,31,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_party_logo.webp?alt=media&token=a5f0ff28-ccd8-4485-a936-9926c9a000a8"},"6thLiveDream_BloomGardenParty":{title:"ライブ「6th Live Dream ～Bloom Garden Party～」",text:"Bloom Garden Party Stage",type:"live",firstDay:[2026,7,11,0,0],lastDay:[2026,7,12,23,59],link:"https://www.lovelive-anime.jp/hasunosora/",imageUrl:"https://firebasestorage.googleapis.com/v0/b/llllmgr-5e18d.firebasestorage.app/o/eventInformation%2F6thLiveDream_bgp_logo.webp?alt=media&token=cdd630a2-4700-4bbe-8585-75a87c57433a"}},Aa={class:"text-h5"},Ca=me({__name:"AddEvent",setup(v){const A=fe(),k=b(!1),C=b(""),w=b("success"),V=b(!1),U=b(!1),p=[{title:"ID",key:"id",sortable:!1},{title:"Title",key:"title",sortable:!1},{title:"First Day",key:"firstDay"},{title:"Last Day",key:"lastDay"},{title:"Edit",key:"edit",sortable:!1}],S=_=>{if(!_||!Array.isArray(_))return"";const[f,x,M,q,z]=_;return`${f}/${String(x).padStart(2,"0")}/${String(M).padStart(2,"0")} ${String(q).padStart(2,"0")}:${String(z).padStart(2,"0")}`},o=b({}),R=async()=>{const _=A.isDev?Q:oe,f=await il(le(_,"eventInformation"));f.exists()?o.value=f.val():o.value={}};Me(R),se(()=>A.isDev,R);const E=G(()=>Object.entries(o.value).map(([_,f])=>({id:_,...f}))),y=async()=>{try{await de(le(A.isDev?Q:oe,"eventInformation"),Ia),C.value=`Uploaded Events to ${A.isDev?"Dev":"Prod"}`,w.value="success",k.value=!0}catch(_){alert("Error uploading events:",_),C.value="Error uploading events",w.value="error",k.value=!0}},I=async()=>{const _=A.isDev?Q:oe,f=le(_,"cards");try{const x=await il(f);if(x.exists()){const M=x.val(),q=(z,X)=>{for(const Y in z)Y===X?delete z[Y]:typeof z[Y]=="object"&&z[Y]!==null&&q(z[Y],X)};q(M,"fluctuationStatus"),await Zl(f,M),C.value="Updated Card List (removed fluctuationStatus)",w.value="success",k.value=!0}}catch(x){console.error(x),C.value="Error updating card list",w.value="error",k.value=!0}},g=["liveGP","live","movie","other"],i=b({id:"",title:"",text:"",type:"liveGP",firstDay:"",lastDay:"",link:"",imageUrl:""}),u=(_,f)=>{i.value.id=_==="edit"?f.id:"",U.value=_!=="edit",i.value.title=f.title||"",i.value.text=f.text||"",i.value.type=f.type||"liveGP",i.value.link=f.link||"",i.value.imageUrl=f.imageUrl||"";const x=M=>{if(!Array.isArray(M)||M.length<5)return"";const[q,z,X,Y,T]=M;return`${q}-${String(z).padStart(2,"0")}-${String(X).padStart(2,"0")}T${String(Y).padStart(2,"0")}:${String(T).padStart(2,"0")}`};i.value.firstDay=x(f.firstDay),i.value.lastDay=x(f.lastDay),V.value=!0},t=()=>{i.value={id:"",title:"",text:"",type:"liveGP",firstDay:"",lastDay:"",link:"",imageUrl:""},U.value=!0,V.value=!0},d=async _=>{if(!confirm(`Are you sure you want to delete "${_.title}"?`))return;const f=A.isDev?Q:oe;try{await Ql(le(f,`eventInformation/${_.id}`)),C.value="Deleted successfully",w.value="success",k.value=!0,await R()}catch(x){console.error(x),C.value="Error deleting event",w.value="error",k.value=!0}},m=()=>{V.value=!1},a=async()=>{if(!i.value.id){C.value="ID is required",w.value="error",k.value=!0;return}const _=A.isDev?Q:oe,f=JSON.parse(B.value),{id:x,...M}=f;try{await de(le(_,`eventInformation/${x}`),M),C.value="Saved successfully",w.value="success",k.value=!0,m(),await R()}catch(q){console.error(q),C.value="Error saving event",w.value="error",k.value=!0}},B=G(()=>{const _={...i.value},f=M=>{if(Array.isArray(M))return M;if(!M)return[];const q=new Date(M);return[q.getFullYear(),q.getMonth()+1,q.getDate(),q.getHours(),q.getMinutes()]},x={..._,firstDay:f(_.firstDay),lastDay:f(_.lastDay)};return JSON.stringify(x,null,2)});return(_,f)=>($(),K(ie,{fluid:"",class:"pa-0"},{default:l(()=>[e(Wl,{density:"compact",color:"transparent"},{default:l(()=>[e(Yl,null,{default:l(()=>[...f[10]||(f[10]=[J("Event List",-1)])]),_:1}),e(Ue),e(O,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:t})]),_:1}),e(He,{headers:p,items:E.value,class:"elevation-1","items-per-page":-1,hover:""},{"item.firstDay":l(({value:x})=>[J(j(S(x)),1)]),"item.lastDay":l(({value:x})=>[J(j(S(x)),1)]),"item.edit":l(({item:x})=>[e(O,{class:"mr-2",size:"small",variant:"tonal",icon:"mdi-pencil",onClick:M=>u("edit",x)},null,8,["onClick"]),e(O,{class:"mr-2",size:"small",variant:"tonal",icon:"mdi-content-copy",onClick:M=>u("copy",x)},null,8,["onClick"]),e(O,{size:"small",variant:"tonal",color:"error",icon:"mdi-delete",onClick:M=>d(x)},null,8,["onClick"])]),_:2},1032,["items"]),e(Pe,{modelValue:V.value,"onUpdate:modelValue":f[8]||(f[8]=x=>V.value=x),"max-width":"800px"},{default:l(()=>[e(ge,null,{default:l(()=>[e(he,null,{default:l(()=>[N("span",Aa,j(U.value?"New Event":"Edit Event"),1)]),_:1}),e(Le,null,{default:l(()=>[e(ie,null,{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[e(D,{modelValue:i.value.id,"onUpdate:modelValue":f[0]||(f[0]=x=>i.value.id=x),label:"ID",readonly:!U.value,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","readonly"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:i.value.title,"onUpdate:modelValue":f[1]||(f[1]=x=>i.value.title=x),label:"Event Title",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"6"},{default:l(()=>[e(D,{modelValue:i.value.text,"onUpdate:modelValue":f[2]||(f[2]=x=>i.value.text=x),label:"Text",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(H,{modelValue:i.value.type,"onUpdate:modelValue":f[3]||(f[3]=x=>i.value.type=x),label:"Event Type",items:g,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(D,{modelValue:i.value.firstDay,"onUpdate:modelValue":f[4]||(f[4]=x=>i.value.firstDay=x),label:"First Day",type:"datetime-local",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4"},{default:l(()=>[e(D,{modelValue:i.value.lastDay,"onUpdate:modelValue":f[5]||(f[5]=x=>i.value.lastDay=x),label:"End Day",type:"datetime-local",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(D,{modelValue:i.value.link,"onUpdate:modelValue":f[6]||(f[6]=x=>i.value.link=x),label:"Link",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(D,{modelValue:i.value.imageUrl,"onUpdate:modelValue":f[7]||(f[7]=x=>i.value.imageUrl=x),label:"Image URL",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Te,null,{default:l(()=>[e(Ue),e(O,{color:"blue-darken-1",variant:"text",onClick:m},{default:l(()=>[...f[11]||(f[11]=[J(" Cancel ",-1)])]),_:1}),e(O,{color:"blue-darken-1",variant:"text",onClick:a},{default:l(()=>[...f[12]||(f[12]=[J(" Save ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{class:"mt-2"},{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[e(O,{text:`Upload Events to ${L(A).isDev?"Dev":"Prod"}`,color:"orange",class:"mr-2",onClick:y},null,8,["text"]),e(O,{text:"Update Card List",color:"yellow",onClick:I})]),_:1})]),_:1}),e(Ve,{modelValue:k.value,"onUpdate:modelValue":f[9]||(f[9]=x=>k.value=x),color:w.value,timeout:2e3},{default:l(()=>[J(j(C.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),wa={class:"d-flex"},Na=me({__name:"AddData",setup(v){const A=b("pendingDataList"),k=fe(),C=ea(),w=async()=>{const U=ta();try{await ua(U),C.push({name:"Home"})}catch(p){console.error("Logout failed",p)}},V=U=>{A.value=`${U}${U==="card"?"List":""}`};return(U,p)=>($(),K(ie,{fluid:"",class:"py-2 px-0"},{default:l(()=>[p[3]||(p[3]=N("h1",null,"DATA MANAGEMENT",-1)),N("div",wa,[e(Se,{modelValue:L(k).isDev,"onUpdate:modelValue":p[0]||(p[0]=S=>L(k).isDev=S),label:"isDev",color:"pink",density:"compact","hide-details":"","hide-input":"",class:"px-2"},null,8,["modelValue"]),e(O,{text:"Logout",color:"yellow",onClick:w})]),e(la,{modelValue:A.value,"onUpdate:modelValue":p[1]||(p[1]=S=>A.value=S),color:"pink"},{default:l(()=>[e(ce,{value:"pendingDataList",text:"Pending Data"}),e(ce,{value:"cardList",text:"Card"}),e(ce,{value:"skillList",text:"Skill"}),e(ce,{value:"skillDetail",text:"Skill Detail"}),e(ce,{value:"music",text:"Music"}),e(ce,{value:"item",text:"Item"}),e(ce,{value:"event",text:"Event"})]),_:1},8,["modelValue"]),e(Oe,{class:"mb-2"}),e(aa,{modelValue:A.value,"onUpdate:modelValue":p[2]||(p[2]=S=>A.value=S),class:"pt-3"},{default:l(()=>[e(ve,{value:"pendingDataList"},{default:l(()=>[e(da,{onEdit:V})]),_:1}),e(ve,{value:"cardList"},{default:l(()=>[e(ma)]),_:1}),e(ve,{value:"skillList"},{default:l(()=>[e(Ua)]),_:1}),e(ve,{value:"skillDetail"},{default:l(()=>[e(Ea)]),_:1}),e(ve,{value:"music"},{default:l(()=>[e(ca)]),_:1}),e(ve,{value:"item"},{default:l(()=>[e(Sa)]),_:1}),e(ve,{value:"event"},{default:l(()=>[e(Ca)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Na as default};
