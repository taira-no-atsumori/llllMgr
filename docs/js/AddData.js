import{g as Fl,I as Vl,u as ql,a as Hl,b as jl,c as Kl,r as m,w as Jl,o as Pe,d as re,e as zl,f as Gl,h as Xl,V as Dl,i as Sl,j as e,k as y,F as Q,l as Wl,m as He,n as xl,v as Yl,p as pl,q as nl,s as Zl,t as Qe,x as Ql,y as ee,z as ea,A as la,B as aa,C as ta,D as ua,E as oa,G as ia,H as na,J as be,K as fl,L as b,M as T,N as Te,O as l,P as z,Q as G,R as I,S as c,T as sa,U as X,W as H,X as El,Y as ie,Z as Ge,_ as da,$ as je,a0 as ra,a1 as le,a2 as de,a3 as me,a4 as fe,a5 as Ke,a6 as ge,a7 as Be,a8 as Fe,a9 as Oe,aa as ve,ab as he,ac as Ye,ad as Ae,ae as Le,af as De,ag as yl,ah as wl,ai as Rl,aj as Ne,ak as Ze,al as Tl,am as Ee,an as ll,ao as F,ap as dl,aq as rl,ar as cl,as as ml,at as ke,au as Me,av as te,aw as Ml,ax as ol,ay as Xe,az as il,aA as Cl,aB as ca,aC as Je,aD as Ul,aE as hl,aF as sl,aG as tl,aH as _e,aI as kl,aJ as ma,aK as Ue,aL as Ol,aM as qe,aN as va,aO as Al,aP as pa,aQ as _l,aR as ze,aS as fa,aT as Il,aU as ya,aV as el,aW as ka,aX as we,aY as al,aZ as $l,a_ as gl,a$ as Nl,b0 as ga,b1 as ba,b2 as Va,b3 as Da,b4 as Sa,b5 as xa,b6 as wa}from"./index.js";const Ca=ta({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:v=>!isNaN(parseFloat(v))},maxHeight:{type:[Number,String],validator:v=>!isNaN(parseFloat(v))},maxRows:{type:[Number,String],validator:v=>!isNaN(parseFloat(v))},suffix:String,modelModifiers:Object,...na(),...oa(ia(),["direction"]),...ua()},"VTextarea"),Re=Fl()({name:"VTextarea",directives:{vIntersect:Vl},inheritAttrs:!1,props:Ca(),emits:{"click:control":v=>!0,"mousedown:control":v=>!0,"update:focused":v=>!0,"update:modelValue":v=>!0,"update:rows":v=>!0},setup(v,R){let{attrs:C,emit:$,slots:r}=R;const N=ql(v,"modelValue"),{isFocused:u,focus:E,blur:d}=Hl(v),{onIntersect:h}=aa(v),A=ee(()=>typeof v.counterValue=="function"?v.counterValue(N.value):(N.value||"").toString().length),U=ee(()=>{if(C.maxlength)return C.maxlength;if(!(!v.counter||typeof v.counter!="number"&&typeof v.counter!="string"))return v.counter}),k=m(),S=m(),g=la(""),f=m(),x=m(0),{platform:D}=jl(),w=Kl(v),n=ee(()=>v.persistentPlaceholder||u.value||v.active);function i(){w.isSuppressing.value&&w.update(),f.value!==document.activeElement&&f.value?.focus(),u.value||E()}function a(q){i(),$("click:control",q)}function M(q){$("mousedown:control",q)}function J(q){q.stopPropagation(),i(),Qe(()=>{N.value="",ea(v["onClick:clear"],q)})}function W(q){const ue=q.target;if(!v.modelModifiers?.trim){N.value=ue.value;return}const ce=ue.value,Ce=ue.selectionStart,Se=ue.selectionEnd;N.value=ce,Qe(()=>{let xe=0;ce.trimStart().length===ue.value.length&&(xe=ce.length-ue.value.length),Ce!=null&&(ue.selectionStart=Ce-xe),Se!=null&&(ue.selectionEnd=Se-xe)})}const O=m(),_=m(Number(v.rows)),P=ee(()=>["plain","underlined"].includes(v.variant));Jl(()=>{v.autoGrow||(_.value=Number(v.rows))});function L(){Qe(()=>{if(!f.value)return;if(D.value.firefox){x.value=12;return}const{offsetWidth:q,clientWidth:ue}=f.value;x.value=Math.max(0,q-ue)}),v.autoGrow&&Qe(()=>{if(!O.value||!S.value)return;const q=getComputedStyle(O.value),ue=getComputedStyle(S.value.$el),ce=parseFloat(q.getPropertyValue("--v-field-padding-top"))+parseFloat(q.getPropertyValue("--v-input-padding-top"))+parseFloat(q.getPropertyValue("--v-field-padding-bottom")),Ce=O.value.scrollHeight,Se=parseFloat(q.lineHeight),xe=Math.max(parseFloat(v.rows)*Se+ce,parseFloat(ue.getPropertyValue("--v-input-control-height"))),t=v.maxHeight?parseFloat(v.maxHeight):parseFloat(v.maxRows)*Se+ce||1/0,p=Ql(Ce??0,xe,t);_.value=Math.floor((p-ce)/Se),g.value=nl(p)})}Pe(L),re(N,L),re(()=>v.rows,L),re(()=>v.maxHeight,L),re(()=>v.maxRows,L),re(()=>v.density,L),re(_,q=>{$("update:rows",q)});let j;return re(O,q=>{q?(j=new ResizeObserver(L),j.observe(O.value)):j?.disconnect()}),zl(()=>{j?.disconnect()}),Gl(()=>{const q=!!(r.counter||v.counter||v.counterValue),ue=!!(q||r.details),[ce,Ce]=Xl(C),{modelValue:Se,...xe}=Dl.filterProps(v),t={...Sl.filterProps(v),"onClick:clear":J};return e(Dl,He({ref:k,modelValue:N.value,"onUpdate:modelValue":p=>N.value=p,class:["v-textarea v-text-field",{"v-textarea--prefixed":v.prefix,"v-textarea--suffixed":v.suffix,"v-text-field--prefixed":v.prefix,"v-text-field--suffixed":v.suffix,"v-textarea--auto-grow":v.autoGrow,"v-textarea--no-resize":v.noResize||v.autoGrow,"v-input--plain-underlined":P.value},v.class],style:[{"--v-textarea-max-height":v.maxHeight?nl(v.maxHeight):void 0,"--v-textarea-scroll-bar-width":nl(x.value)},v.style]},ce,xe,{centerAffix:_.value===1&&!P.value,focused:u.value}),{...r,default:p=>{let{id:V,isDisabled:Y,isDirty:se,isReadonly:ye,isValid:Ve,hasDetails:B}=p;return e(Sl,He({ref:S,style:{"--v-textarea-control-height":g.value},onClick:a,onMousedown:M,"onClick:prependInner":v["onClick:prependInner"],"onClick:appendInner":v["onClick:appendInner"]},t,{id:V.value,active:n.value||se.value,labelId:`${V.value}-label`,centerAffix:_.value===1&&!P.value,dirty:se.value||v.dirty,disabled:Y.value,focused:u.value,details:B.value,error:Ve.value===!1}),{...r,default:s=>{let{props:{class:o,...K},controlRef:Z}=s;return y(Q,null,[v.prefix&&y("span",{class:"v-text-field__prefix"},[v.prefix]),xl(y("textarea",He({ref:ae=>f.value=Z.value=ae,class:o,value:N.value,onInput:W,autofocus:v.autofocus,readonly:ye.value,disabled:Y.value,placeholder:v.placeholder,rows:v.rows,name:w.fieldName.value,autocomplete:w.fieldAutocomplete.value,onFocus:i,onBlur:d,"aria-labelledby":`${V.value}-label`},K,Ce),null),[[Vl,{handler:h},null,{once:!0}]]),v.autoGrow&&xl(y("textarea",{class:pl([o,"v-textarea__sizer"]),id:`${K.id}-sizer`,"onUpdate:modelValue":ae=>N.value=ae,ref:O,readonly:!0,"aria-hidden":"true"},null),[[Yl,N.value]]),v.suffix&&y("span",{class:"v-text-field__suffix"},[v.suffix])])}})},details:ue?p=>y(Q,null,[r.details?.(p),q&&y(Q,null,[y("span",null,null),e(Wl,{active:v.persistentCounter||u.value,value:A.value,max:U.value,disabled:v.disabled},r.counter)])]):void 0})}),Zl({},k,S,f)}}),Ua={key:0,class:"mb-4 text-grey"},ha={key:1},Aa={class:"text-caption mr-2"},_a={class:"text-caption"},Ia=be({__name:"PendingData",emits:["edit"],setup(v,{emit:R}){const C=fl(),$=m(!1),r=m(""),N=m(""),u=m([]),E=m(!1),d=m(!1),h=m(""),A=R,U=g=>{C.setEditTarget(g.type,g.key),A("edit",g.type)},k=g=>{if(N.value=JSON.stringify(g.data,null,2),g.status==="update"){let f=null;g.type==="music"?f=C.prodData.music[g.key]:g.type==="card"&&(f=C.flattenCards(C.prodData.card)[g.key]?.data),r.value=JSON.stringify(f,null,2)}else r.value="New Data"},S=async()=>{if(u.value.length===0)return;$.value=!0;const g=Oe(ve.app);try{const f={};for(const x of u.value){const D=C.diffList.find(i=>i.key===x);if(!D)continue;const w=JSON.parse(JSON.stringify(D.data));let n=null;if(D.type==="music"?n=C.prodData.music[D.key]:D.type==="card"&&(n=C.flattenCards(C.prodData.card)[D.key]?.data),w.imageURL&&w.imageURL.startsWith("http")&&(!n||!n.imageURL))try{const a=await(await fetch(w.imageURL)).blob();let M="webp";try{const L=new URL(w.imageURL),q=decodeURIComponent(L.pathname).match(/\.([a-zA-Z0-9]+)$/);q&&(M=q[1])}catch{}const J=`${x}.${M}`,W=D.type==="card"?"cardIllust":D.type==="music"?"cdJacket":"eventInformation",O=he(g,`${W}/${J}`),_=await Ye(O,a),P=await Ae(_.ref);w.imageURL=P}catch(i){console.error(`Failed to copy image for ${x}:`,i)}f[D.path]=w}await Le(De(ve),f),E.value=!0,u.value=[],r.value="",N.value=""}catch(f){console.error("Upload failed:",f),h.value=String(f),d.value=!0}finally{$.value=!1}};return(g,f)=>(b(),T(Te,{fluid:"",class:"pa-0"},{default:l(()=>[z(C).diffList.length===0?(b(),G("div",Ua," Dev環境と本番環境のデータに差分はありません。 ")):(b(),G("div",ha,[e(I,{text:"Deploy to Prod",color:"primary","prepend-icon":"mdi-cloud-upload",loading:$.value,disabled:u.value.length===0,onClick:S},null,8,["loading","disabled"]),e(le,{class:"mt-0"},{default:l(()=>[e(c,{cols:"4"},{default:l(()=>[e(sa,null,{default:l(()=>[X(" Diff: "+H(z(C).diffList.length),1)]),_:1}),e(El,{variant:"flat",class:"mb-4"},{default:l(()=>[(b(!0),G(Q,null,ie(z(C).diffList,x=>(b(),T(Ge,{key:x.key,class:pl(x.status==="new"?"bg-blue-lighten-4":"bg-yellow-lighten-4"),onClick:D=>k(x)},{prepend:l(()=>[e(ra,{modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=D=>u.value=D),value:x.key,color:"pink",onClick:f[1]||(f[1]=je(()=>{},["stop"]))},null,8,["modelValue","value"])]),append:l(()=>[e(I,{icon:"mdi-pencil",variant:"text",density:"compact",onClick:je(D=>U(x),["stop"])},null,8,["onClick"])]),default:l(()=>[e(da,null,{default:l(()=>[y("span",Aa,"["+H(x.type)+"]",1),X(" "+H(x.data.title||x.data.cardName||x.key)+" ",1),y("span",_a,"("+H(x.status)+")",1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(Re,{modelValue:r.value,"onUpdate:modelValue":f[2]||(f[2]=x=>r.value=x),label:"Prod (Before)","auto-grow":"",readonly:"",variant:"solo"},null,8,["modelValue"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(Re,{modelValue:N.value,"onUpdate:modelValue":f[3]||(f[3]=x=>N.value=x),label:"Dev (After)","auto-grow":"",readonly:"",variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1})])),e(Be,{modelValue:d.value,"onUpdate:modelValue":f[5]||(f[5]=x=>d.value=x),"max-width":"600"},{default:l(()=>[e(de,null,{default:l(()=>[e(me,{class:"text-h5 bg-error"},{default:l(()=>[...f[8]||(f[8]=[X("Upload Failed",-1)])]),_:1}),e(fe,{class:"pt-4"},{default:l(()=>[f[9]||(f[9]=y("p",null," アップロードに失敗しました。コンソールで詳細を確認してください。 ",-1)),f[10]||(f[10]=y("p",{class:"mt-4 font-weight-bold"},"エラーメッセージ:",-1)),e(Re,{"model-value":h.value,readonly:"",variant:"outlined",rows:"5","auto-grow":"",class:"mt-2"},null,8,["model-value"])]),_:1}),e(Ke,null,{default:l(()=>[e(ge),e(I,{color:"primary",text:"Close",onClick:f[4]||(f[4]=x=>d.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Fe,{modelValue:E.value,"onUpdate:modelValue":f[7]||(f[7]=x=>E.value=x),timeout:3e3,color:"success"},{actions:l(()=>[e(I,{variant:"text",text:"Close",onClick:f[6]||(f[6]=x=>E.value=!1)})]),default:l(()=>[f[11]||(f[11]=X(" Upload Completed! ",-1))]),_:1},8,["modelValue"])]),_:1}))}}),ul={heartCaptcha:"ハートキャプチャ系",loveAttract:"ラブアトラクト系",voltage:"ボルテージ系",mental:"メンタル系",extend:"手札枚数変更系",boost:"ブースト系",AP:"AP変化系",other:"その他"},$a={class:"d-flex justify-end mt-3"},Ll=be({__name:"EditSkillTypeDialog",props:{modelValue:{type:Boolean},existingTypes:{}},emits:["update:modelValue","select"],setup(v,{emit:R}){const C=R,$=yl(),r=m(null),N=E=>{const d={};if(!$.skillDetails)return d;for(const[h,A]of Object.entries($.skillDetails))A.skillTypeKey===E&&(d[h]=A);return d},u=E=>{C("select",E)};return(E,d)=>(b(),T(Be,{"model-value":v.modelValue,"max-width":"1080px","onUpdate:modelValue":d[3]||(d[3]=h=>E.$emit("update:modelValue",h))},{default:l(()=>[e(wl,{class:"pa-3"},{default:l(()=>[d[4]||(d[4]=y("h3",null,"Add Type",-1)),y("div",null,[e(Rl,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=h=>r.value=h),color:"pink"},{default:l(()=>[(b(!0),G(Q,null,ie(z(ul),(h,A)=>(b(),T(Ne,{key:A,value:A},{default:l(()=>[X(H(h),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(Ze),e(Tl,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=h=>r.value=h)},{default:l(()=>[(b(!0),G(Q,null,ie(z(ul),(h,A)=>(b(),T(Ee,{key:A,value:A},{default:l(()=>[e(wl,{style:{height:"500px","overflow-y":"auto"}},{default:l(()=>[e(El,{density:"compact"},{default:l(()=>[(b(!0),G(Q,null,ie(N(String(A)),(U,k)=>(b(),T(Ge,{key:k,title:U.skillDetailName,subtitle:U.description,disabled:v.existingTypes.includes(String(k)),style:{"border-bottom":"1px solid #888"},onClick:S=>u(String(k))},{prepend:l(()=>[e(ll,{color:U.colorCode,size:"small",class:"mr-2"},null,8,["color"])]),_:2},1032,["title","subtitle","disabled","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),y("div",$a,[e(I,{color:"error",variant:"text",text:"Cancel",onClick:d[2]||(d[2]=h=>E.$emit("update:modelValue",!1))})])]),_:1})]),_:1},8,["model-value"]))}}),vl=be({__name:"CharacteristicAreaComponent",props:{modelValue:{}},emits:["update:modelValue","delete","open-detail"],setup(v,{emit:R}){const C=v,$=R,r=ee({get:()=>C.modelValue,set:k=>$("update:modelValue",k)}),N=m(!1),u=m(null),E=k=>{u.value=k,N.value=!0},d=k=>{u.value!==null&&(r.value.type[u.value]=k),N.value=!1,u.value=null},h={ID:"",name:"",AP:0,detail:[]},A=()=>{r.value.addSkill||(r.value.addSkill=[]),r.value.addSkill.push(JSON.parse(JSON.stringify(h)))},U=k=>{r.value.addSkill&&r.value.addSkill.splice(k,1)};return(k,S)=>(b(),G(Q,null,[e(de,null,{default:l(()=>[e(me,{class:"d-flex text-no-wrap"},{default:l(()=>[S[6]||(S[6]=X(" Characteristic ",-1)),e(ge),e(I,{icon:"mdi-close",variant:"text",density:"compact",color:"error",onClick:S[0]||(S[0]=g=>k.$emit("delete"))})]),_:1}),e(fe,null,{default:l(()=>[e(F,{modelValue:r.value.name,"onUpdate:modelValue":S[1]||(S[1]=g=>r.value.name=g),label:"Characteristic Name",variant:"outlined",density:"compact","hide-details":"",class:"mb-3"},null,8,["modelValue"]),e(Re,{modelValue:r.value.detail,"onUpdate:modelValue":S[2]||(S[2]=g=>r.value.detail=g),label:"Characteristic Detail",variant:"outlined",density:"compact","hide-details":"",class:"mb-3"},null,8,["modelValue"]),S[7]||(S[7]=y("p",{class:"text-subtitle-1 mb-3"},"Type",-1)),e(le,null,{default:l(()=>[(b(!0),G(Q,null,ie(r.value.type,(g,f)=>(b(),T(c,{key:f,cols:"4",class:"d-flex align-center"},{default:l(()=>[e(F,{modelValue:r.value.type[f],"onUpdate:modelValue":x=>r.value.type[f]=x,"item-title":"title","item-value":"value",label:`Type ${f+1}`,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]),e(I,{icon:"mdi-pencil",variant:"text",density:"compact",class:"ml-2",onClick:x=>E(f)},null,8,["onClick"]),e(I,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",class:"ml-2",onClick:x=>r.value.type.splice(f,1)},null,8,["onClick"])]),_:2},1024))),128)),e(c,{cols:"4"},{default:l(()=>[e(I,{text:"Add Type","prepend-icon":"mdi-plus",block:"",onClick:S[3]||(S[3]=g=>r.value.type.push(""))})]),_:1})]),_:1}),(b(!0),G(Q,null,ie(r.value.addSkill,(g,f)=>(b(),T(c,{key:f,cols:"12",class:"mt-3"},{default:l(()=>[e(dl,{color:"yellow"},{default:l(()=>[e(rl,null,{default:l(()=>[e(cl,null,{default:l(()=>[X(H(`Add Skill ${f+1}`)+" ",1),e(ge),e(I,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",onClick:je(x=>U(f),["stop"])},null,8,["onClick"])]),_:2},1024),e(ml,null,{default:l(()=>[e(We,{modelValue:r.value.addSkill[f],"onUpdate:modelValue":x=>r.value.addSkill[f]=x,type:"addSkill",index:f,onOpenDetail:S[4]||(S[4]=(x,D)=>k.$emit("open-detail",x,D))},null,8,["modelValue","onUpdate:modelValue","index"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),r.value.type.includes("addCard")?(b(),T(I,{key:0,color:"yellow","prepend-icon":"mdi-plus",text:"Add Skill",block:"",class:"mt-3",onClick:A})):ke("",!0)]),_:1})]),_:1}),e(Ll,{modelValue:N.value,"onUpdate:modelValue":S[5]||(S[5]=g=>N.value=g),"existing-types":r.value.type,onSelect:d},null,8,["modelValue","existing-types"])],64))}}),Pl=[{title:"あ行",value:"あ"},{title:"か行",value:"か"},{title:"さ行",value:"さ"},{title:"た行",value:"た"},{title:"な行",value:"な"},{title:"は行",value:"は"},{title:"ま行",value:"ま"},{title:"や行",value:"や"},{title:"ら行",value:"ら"},{title:"わ行",value:"わ"},{title:"数字",value:"other"}],Bl=v=>v?/[あ-おア-オ]/.test(v)?"あ":/[か-こカ-コが-ごガ-ゴ]/.test(v)?"か":/[さ-そサ-ソざ-ぞザ-ゾ]/.test(v)?"さ":/[た-とタ-トだ-どダ-ド]/.test(v)?"た":/[な-のナ-ノ]/.test(v)?"な":/[は-ほハ-ホば-ぼバ-ボぱ-ぽパ-ポ]/.test(v)?"は":/[ま-もマ-モ]/.test(v)?"ま":/[や-よヤ-ヨ]/.test(v)?"や":/[ら-ろラ-ロ]/.test(v)?"ら":/[わ-んワ-ン]/.test(v)?"わ":"other":"other",Na={class:"d-flex mb-3"},Ea={class:"pr-3",style:{width:"90%"}},Ra={style:{width:"10%"}},Ta={key:0,class:"mb-3"},Ma={class:"text-subtitle-1"},Oa={key:0,class:"mt-3"},La={key:0,class:"mt-3"},We=be({__name:"SkillFormComponent",props:{modelValue:{},type:{},index:{}},emits:["update:modelValue","open-detail"],setup(v,{emit:R}){const C=m(!1),$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=v,N=R,u=ee({get:()=>r.modelValue,set:O=>N("update:modelValue",O)}),E=Me(),d=m({}),h=()=>{const O=De(ve,"skills/skill");ol(O,_=>{const P=_.val();if(P){for(const L in P)P[L]={ID:L,...P[L]};d.value=P}})};Pe(h),re(()=>E.isDev,h),re(d,O=>{if(Object.keys(O).length>0&&!r.modelValue.name&&!r.modelValue.ID){const _=k.value[0];_&&x(_.value)}});const A=m("all"),U=[{title:"All",value:"all"},...Pl],k=ee(()=>{const O=[],_=new Set;for(const P in d.value){const L=d.value[P],j=L.name,q=L.kana;A.value!=="all"&&Bl(q.charAt(0))!==A.value||_.has(j)||(_.add(j),O.push({title:j,value:P}))}return O.sort((P,L)=>P.title.localeCompare(L.title,"ja"))}),S=ee(()=>{switch(r.type){case"SA":return"Special Appeal";case"skill":return"Skill";case"addSA":return"Add Special Appeal";default:return"Skill"}}),g=ee(()=>{const O=u.value.name,_=[];if(!O)return _;for(const P in d.value)d.value[P].name===O&&_.push(d.value[P].ID);return _}),f=ee(()=>{const O=u.value.name,_=u.value.ID;return O&&_&&Object.keys(d.value).includes(_)?d.value[_].detail.type:[]}),x=O=>{if(!O)return;const _=[];for(const P in d.value)d.value[P].ID===O&&_.push(d.value[P]);_.length>0&&(u.value.ID=_[0].ID,u.value.name=_[0].name,D(_[0].ID))},D=O=>{if(!O)return;if(u.value.name){const P=d.value[O];if(P&&P.text){const L=Math.max(0,P.text.length-1);u.value.detail=new Array(L).fill(null).map(()=>[...$])}}},w={ID:"",name:"",AP:0,detail:[...$]},n={...w,characteristic:{name:"",detail:"",type:[""]}},i=O=>{u.value[`add${O}`]||(u.value[`add${O}`]=[]),u.value[`add${O}`].push(JSON.parse(JSON.stringify(O==="SA"?w:n)))},a=(O,_)=>{u.value[`add${O}`].splice(_,1)},M=O=>{O.characteristic={name:"",detail:"",type:[],addSkill:[]}},J=O=>{delete O.characteristic},W=()=>{let O="",_="",P=[];if(k.value.length>0){const L=k.value[0],j=d.value[L.value];if(j&&(O=j.ID,_=j.name,j.text)){const q=Math.max(0,j.text.length-1);P=new Array(q).fill(null).map(()=>[...$])}}u.value={...u.value,ID:O,name:_,AP:0,detail:P,addSA:[],addSkill:[]},C.value=!1};return(O,_)=>(b(),G(Q,null,[y("div",Na,[y("div",Ea,[e(le,null,{default:l(()=>[e(c,{cols:"2",class:"mb-1"},{default:l(()=>[e(te,{modelValue:A.value,"onUpdate:modelValue":_[0]||(_[0]=P=>A.value=P),items:U,label:"Filter by Kana",variant:"outlined",density:"compact","hide-details":"",class:"mb-3"},null,8,["modelValue"])]),_:1}),e(c,{cols:"10"},{default:l(()=>[e(te,{modelValue:u.value.name,"onUpdate:modelValue":[_[1]||(_[1]=P=>u.value.name=P),x],items:k.value,label:`${S.value} Name`,required:"",variant:"outlined",density:"compact","hide-details":"",class:"mb-3"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),e(te,{modelValue:u.value.ID,"onUpdate:modelValue":[_[2]||(_[2]=P=>u.value.ID=P),D],items:g.value,label:`${S.value} ID`,required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),y("div",Ra,[e(F,{modelValue:u.value.AP,"onUpdate:modelValue":_[3]||(_[3]=P=>u.value.AP=P),modelModifiers:{number:!0},label:"AP",type:"number",max:"999",min:"0",required:"",variant:"outlined",density:"compact","hide-details":"","bg-color":u.value.AP===0?"error":void 0,class:"mb-4"},null,8,["modelValue","bg-color"]),e(I,{text:"Reset",color:"primary",block:"",onClick:W})])]),v.type==="SA"&&u.value.ID?(b(),G("div",Ta,[C.value?(b(),T(F,{key:1,modelValue:u.value.EXAP,"onUpdate:modelValue":_[6]||(_[6]=P=>u.value.EXAP=P),modelModifiers:{number:!0},label:"SA EXAP",type:"number",max:"999",min:"0",required:"",variant:"outlined",density:"compact","hide-details":""},{append:l(()=>[e(Ml,{color:"error",icon:"mdi-delete",onClick:_[5]||(_[5]=P=>C.value=!1)})]),_:1},8,["modelValue"])):(b(),T(I,{key:0,text:"Add EXAP","prepend-icon":"mdi-plus",block:"",onClick:_[4]||(_[4]=P=>C.value=!0)}))])):ke("",!0),e(le,null,{default:l(()=>[u.value.detail&&u.value.detail.length>0?(b(),T(c,{key:0,cols:"12",class:"d-flex align-center"},{default:l(()=>[y("p",Ma,H(S.value)+" Detail",1)]),_:1})):ke("",!0),(b(!0),G(Q,null,ie(u.value.detail,(P,L)=>(b(),G(Q,{key:L},[e(c,{cols:"12",class:"py-0"},{default:l(()=>[X("Detail "+H(L+1),1)]),_:2},1024),e(c,{cols:"12",class:"d-flex"},{default:l(()=>[(b(!0),G(Q,null,ie(u.value.detail[L],(j,q)=>(b(),T(F,{key:q,modelValue:u.value.detail[L][q],"onUpdate:modelValue":ue=>u.value.detail[L][q]=ue,label:`Level ${q+1}`,variant:"underlined",density:"compact","hide-details":"",readonly:"",class:"pr-3",style:{width:"calc(100% / 15)"}},null,8,["modelValue","onUpdate:modelValue","label"]))),128)),e(I,{icon:"mdi-pencil",variant:"text",density:"compact",onClick:j=>O.$emit("open-detail",u.value.detail,L)},null,8,["onClick"])]),_:2},1024)],64))),128)),u.value.addSA?(b(!0),G(Q,{key:1},ie(u.value.addSA,(P,L)=>(b(),T(c,{key:L,cols:"12"},{default:l(()=>[e(dl,{color:"yellow"},{default:l(()=>[e(rl,null,{default:l(()=>[e(cl,null,{default:l(()=>[X(H(`Add Special Appeal ${L+1}`)+" ",1),e(ge),e(I,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",onClick:je(j=>a("SA",L),["stop"])},null,8,["onClick"])]),_:2},1024),e(ml,null,{default:l(()=>[e(We,{modelValue:u.value.addSA[L],"onUpdate:modelValue":j=>u.value.addSA[L]=j,type:"addSA",index:L,onOpenDetail:_[7]||(_[7]=(j,q)=>O.$emit("open-detail",j,q))},null,8,["modelValue","onUpdate:modelValue","index"]),u.value.addSA[L].characteristic?(b(),G("div",Oa,[e(vl,{modelValue:u.value.addSA[L].characteristic,"onUpdate:modelValue":j=>u.value.addSA[L].characteristic=j,onDelete:j=>J(u.value.addSA[L]),onOpenDetail:_[8]||(_[8]=(j,q)=>O.$emit("open-detail",j,q))},null,8,["modelValue","onUpdate:modelValue","onDelete"])])):(b(),T(I,{key:1,text:"Add Characteristic","prepend-icon":"mdi-plus",block:"",class:"mt-3",onClick:j=>M(u.value.addSA[L])},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):ke("",!0),u.value.addSA&&f.value.includes("addSA")?(b(),T(c,{key:2,cols:"12"},{default:l(()=>[e(I,{color:"yellow","prepend-icon":"mdi-plus",text:"Add SA",block:"",onClick:_[9]||(_[9]=P=>i("SA"))})]),_:1})):ke("",!0),u.value.addSkill?(b(!0),G(Q,{key:3},ie(u.value.addSkill,(P,L)=>(b(),T(c,{key:L,cols:"12"},{default:l(()=>[e(dl,{color:"yellow"},{default:l(()=>[e(rl,null,{default:l(()=>[e(cl,null,{default:l(()=>[X(H(`Add Skill ${L+1}`)+" ",1),e(ge),e(I,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",onClick:je(j=>a("Skill",L),["stop"])},null,8,["onClick"])]),_:2},1024),e(ml,null,{default:l(()=>[e(We,{modelValue:u.value.addSkill[L],"onUpdate:modelValue":j=>u.value.addSkill[L]=j,type:"addSkill",index:L,onOpenDetail:_[10]||(_[10]=(j,q)=>O.$emit("open-detail",j,q))},null,8,["modelValue","onUpdate:modelValue","index"]),u.value.addSkill[L].characteristic?(b(),G("div",La,[e(vl,{modelValue:u.value.addSkill[L].characteristic,"onUpdate:modelValue":j=>u.value.addSkill[L].characteristic=j,onDelete:j=>J(u.value.addSkill[L]),onOpenDetail:_[11]||(_[11]=(j,q)=>O.$emit("open-detail",j,q))},null,8,["modelValue","onUpdate:modelValue","onDelete"])])):(b(),T(I,{key:1,text:"Add Characteristic","prepend-icon":"mdi-plus",block:"",class:"mt-3",onClick:j=>M(u.value.addSkill[L])},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):ke("",!0),u.value.addSkill&&f.value.includes("addCard")?(b(),T(c,{key:4,cols:"12"},{default:l(()=>[e(I,{color:"yellow","prepend-icon":"mdi-plus",text:"Add Skill",block:"",onClick:_[12]||(_[12]=P=>i("Skill"))})]),_:1})):ke("",!0)]),_:1})],64))}}),Pa={class:"d-flex align-center"},Ba={class:"text-center"},Fa={class:"text-center"},qa=be({__name:"EditDetailDataDialog",props:{modelValue:{type:Boolean},initialValues:{}},emits:["update:modelValue","save"],setup(v,{emit:R}){const C=v,$=R,r=[1,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,2,2.1,2.2,2.3,2.5],N={trunc:"整数",floor:"切り捨て",round:"四捨五入",ceil:"切り上げ"},u=m(0),E=m(!1),d=m(2),h=m("ceil"),A=m(!1),U=m([]),k=m([]),S=ee(()=>E.value?u.value/2.5:u.value);re(()=>C.modelValue,n=>{if(n){const i=JSON.parse(JSON.stringify(C.initialValues||[]));k.value=i.map(a=>a===null?"null":a),U.value=k.value.map(a=>String(a).endsWith("?")),A.value=U.value.every(Boolean)}});const g=n=>parseFloat(n.toFixed(10)),f=n=>{const i=String(k.value[n]||"");U.value[n]?i.endsWith("?")||(k.value[n]=i+"?"):i.endsWith("?")&&(k.value[n]=i.slice(0,-1))},x=()=>{U.value=U.value.map(()=>A.value),U.value.forEach((n,i)=>f(i))},D=n=>{const i=Math.pow(10,d.value);k.value=r.map((a,M)=>{const J=S.value*a;let W=0;switch(n){case"trunc":W=Math.trunc(g(J));break;case"floor":W=Math.floor(g(J*i))/i;break;case"round":W=Math.round(g(J*i))/i;break;case"ceil":W=Math.ceil(g(J*i))/i;break;default:W=0}return U.value[M]?String(W)+"?":W})},w=()=>{const n=k.value.map(i=>{const a=String(i);return a==="null"?null:a});$("save",n),$("update:modelValue",!1)};return(n,i)=>(b(),T(Be,{"model-value":v.modelValue,"max-width":"1200px","onUpdate:modelValue":i[7]||(i[7]=a=>n.$emit("update:modelValue",a))},{default:l(()=>[e(de,null,{default:l(()=>[e(me,null,{default:l(()=>[...i[8]||(i[8]=[X("Edit Detail Data",-1)])]),_:1}),e(fe,null,{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value=a),label:"Init Number",type:"number",min:"0",step:"0.1",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(Xe,{modelValue:E.value,"onUpdate:modelValue":i[1]||(i[1]=a=>E.value=a),label:"14",color:"pink",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:d.value,"onUpdate:modelValue":i[2]||(i[2]=a=>d.value=a),label:"Decimal Point",type:"number",max:"9",min:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"3"},{default:l(()=>[y("div",Pa,[e(te,{modelValue:h.value,"onUpdate:modelValue":i[3]||(i[3]=a=>h.value=a),items:Object.entries(N).map(([a,M])=>({title:M,value:a})),"item-title":"title","item-value":"value",label:"Data Format Type",variant:"outlined",density:"compact","hide-details":"",class:"mr-3"},null,8,["modelValue","items"]),e(I,{text:"Set",color:"primary","prepend-icon":"mdi-plus",onClick:i[4]||(i[4]=a=>D(h.value))})])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(il,{density:"compact"},{default:l(()=>[y("thead",null,[y("tr",null,[i[9]||(i[9]=y("th",{class:"text-center"},"Level",-1)),i[10]||(i[10]=y("th",{class:"text-center"},"倍率",-1)),(b(),G(Q,null,ie(N,(a,M)=>y("th",{key:M,class:"text-center"},H(a),1)),64)),i[11]||(i[11]=y("th",{class:"text-center",style:{width:"125px"}},"Result",-1)),y("th",Ba,[e(Cl,{modelValue:A.value,"onUpdate:modelValue":[i[5]||(i[5]=a=>A.value=a),x],color:"pink",density:"compact","hide-details":""},null,8,["modelValue"])])])]),y("tbody",Fa,[(b(),G(Q,null,ie(r,(a,M)=>y("tr",{key:M},[y("td",null,H(M+1),1),y("td",null,H(a),1),y("td",null,H(Math.trunc(g(S.value*a))),1),y("td",null,H(Math.floor(g(S.value*a*Math.pow(10,d.value)))/Math.pow(10,d.value)),1),y("td",null,H(Math.round(g(S.value*a*Math.pow(10,d.value)))/Math.pow(10,d.value)),1),y("td",null,H(Math.ceil(g(S.value*a*Math.pow(10,d.value)))/Math.pow(10,d.value)),1),y("td",null,[e(F,{modelValue:k.value[M],"onUpdate:modelValue":J=>k.value[M]=J,variant:"underlined",density:"compact","hide-details":"",onKeyup:ca(w,["enter"])},{"append-inner":l(()=>[e(I,{size:"x-small",variant:"text",color:"grey",class:"pa-0",style:{"min-width":"24px"},text:"null",onClick:J=>k.value[M]="null"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),y("td",null,[e(Cl,{modelValue:U.value[M],"onUpdate:modelValue":[J=>U.value[M]=J,J=>f(M)],color:"pink",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])])])),64))])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ke,null,{default:l(()=>[e(ge),e(I,{text:"Cancel",color:"error",onClick:i[6]||(i[6]=a=>n.$emit("update:modelValue",!1))}),e(I,{text:"Save",color:"primary",onClick:w})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),Ha={style:{width:"calc(100% / 6)"}},ja={class:"mb-3"},Ka={class:"d-flex align-center justify-center mb-3"},Ja=["src"],za={class:"font-weight-bold"},Ga={class:"mb-3"},Xa={class:"d-flex justify-space-between mb-3"},Wa=["onClick"],Ya={class:"text-subtitle-1 text-center mb-1"},Za=["onChange"],Qa=be({__name:"AddCard",setup(v){const R=Me(),C=["smile","pure","cool","mental","BP"],$=()=>{x.value=!1},r=()=>{D.value=!1},N=fl(),u=m({}),E=m(""),d=m(!1),h=m(""),A=m("success"),U=m(""),k=m(!1),S=m([]),g=m(null),f=m(!1),x=m(!0),D=m(!0),w=m(null),n=m(null),i=m(null),a=m(null),M=m(null),J=m(null),W=async B=>{try{await navigator.clipboard.writeText(B),h.value="画像URLをコピーしました",A.value="success",d.value=!0}catch(s){console.error("Failed to copy URL:",s),h.value="コピーに失敗しました",A.value="error",d.value=!0}},O=m([]),_=ee(()=>{if(!t.value.memberName)return[];const B=t.value.memberName,s=Al[B];return s?O.value.filter(o=>o.name.startsWith(`${s}_`)):[]}),P=B=>{B==="before"?w.value?.click():n.value?.click()},L=(B,s)=>{const o=B.target;if(o.files&&o.files.length>0){const K=o.files[0],Z=new Image,ae=URL.createObjectURL(K);Z.onload=()=>{const Ie=600/Z.width,$e=Math.round(Z.height*Ie);$e!==389&&(h.value=`画像のアスペクト比が不正です。
期待値: 600x389相当
検出: ${Z.width}x${Z.height} (リサイズ後: 600x${$e})`,A.value="warning",d.value=!0),URL.revokeObjectURL(ae)},Z.src=ae;const oe=new FileReader;s==="before"?(i.value=K,oe.onload=ne=>M.value=ne.target?.result):(a.value=K,oe.onload=ne=>J.value=ne.target?.result),oe.readAsDataURL(K)}},j=B=>{B==="before"?(i.value=null,M.value=null,t.value.imageUrl.before="",w.value&&(w.value.value="")):(a.value=null,J.value=null,t.value.imageUrl.after="",n.value&&(n.value.value=""))},q=["standard","max"],ue=m(q[1]),ce=m({smile:0,pure:0,cool:0,mental:0,BP:100});re([ce,ue],()=>{const B=ue.value==="max"?1.2:1;C.forEach(s=>{const o=Number(ce.value[s]),K=/mental|BP/.test(s)?1:B;t.value.uniqueStatus[s]=isNaN(o)?0:Math.ceil(o/K)})},{deep:!0});const Ce=ee(()=>S.value&&g.value!==null?S.value[g.value]||[]:[]),Se=(B,s)=>{S.value=B,g.value=s,k.value=!0},xe=B=>{g.value!==null&&(S.value[g.value]=B)},t=m({cardName:"",memberName:tl.KAHO,rare:sl[3],styleType:hl.PERFORMER.en,mood:Ul.HAPPY.en,gacha:{addSeason:"",period:Je.normal.en},year:2025,split:1,series:"",kana:"",imageUrl:{before:"",after:""},uniqueStatus:{smile:0,pure:0,cool:0,mental:0,BP:100,supportSkill:{supportSkillTitle:"",supportSkillList:{[qe.VOLTAGE_UP]:{initLevel:1,levelUp:1,upLevel:1},[qe.MENTAL_RECOVER]:{initLevel:1,levelUp:1,upLevel:1},[qe.BEAT_HEART_UP]:{initLevel:1,levelUp:1,upLevel:1},[qe.LOVE_BONUS]:{initLevel:1,levelUp:1,upLevel:1}}}},specialAppeal:{ID:"",name:"",AP:0,EXAP:[0,0,0,0,0,0,0,0,0,0,0,0,0,0],detail:[],addSA:[],addSkill:[]},skill:{ID:"",name:"",AP:0,detail:[],addSkill:[]},characteristic:{name:"",detail:"",type:[],addSkill:[]}}),p=async()=>{if(!U.value)return;let B;try{B=JSON.parse(U.value)}catch{try{B=new Function("return "+U.value)(),U.value=JSON.stringify(B,null,2)}catch{h.value="JSONのフォーマットが不正です",A.value="error",d.value=!0;return}}try{const s=R.isDev?_e:ve,o=Oe(ve.app),K={};for(const[Z,ae]of Object.entries(B)){const oe=t.value.rare;let ne="",pe="";try{ne=await Ae(he(o,`cardIllust/${Z}_before.webp`))}catch{console.warn(`Before image not found for ${Z}`)}try{pe=await Ae(he(o,`cardIllust/${Z}_after.webp`))}catch{console.warn(`After image not found for ${Z}`)}const Ie={...ae,imageUrl:{before:ne,after:pe}};K[`cards/${va(Z.split("_")[0])}/${oe}/${Z}`]=Ie}await Le(De(s),K),h.value=`Uploaded to ${R.isDev?"Dev":"Prod"}`,A.value="success",d.value=!0}catch(s){console.error(s),h.value="Error uploading card data",A.value="error",d.value=!0}};Pe(async()=>{const B=De(_e,"card");ol(B,s=>{const o=s.val();o&&(u.value=o)});try{const s=Oe(ve.app),o=he(s,"cardIllust"),K=await kl(o),Z=await Promise.all(K.items.map(async ae=>{const oe=await Ae(ae);return{name:ae.name,url:oe}}));O.value=Z}catch(s){console.error("Error fetching card illustrations:",s),h.value="カード画像の読み込みに失敗しました",A.value="error",d.value=!0}}),re([()=>N.editTarget,u],([B,s])=>{if(B&&B.type==="card"&&B.id&&s&&Object.keys(s).length>0){let o=null,K,Z;for(const oe in s){for(const ne in s[oe])if(s[oe][ne][B.id]){o=s[oe][ne][B.id],K=oe,Z=ne;break}if(o)break}if(!o)return;E.value=B.id,t.value.memberName=K,t.value.rare=Z,t.value.cardName=o.cardName,t.value.kana=o.kana,t.value.series=o.series||"",t.value.styleType=o.styleType,t.value.mood=o.mood;const ae=Object.entries(Je).find(([oe,ne])=>oe===o.gacha.period);t.value.gacha.period=ae?ae[1].en:Je.normal.en,t.value.gacha.addSeason=o.gacha.addSeason,t.value.uniqueStatus={...o.uniqueStatus},o.specialAppeal&&(t.value.specialAppeal.ID=o.specialAppeal.ID,t.value.specialAppeal.name=o.specialAppeal.name,t.value.specialAppeal.AP=o.specialAppeal.AP,t.value.specialAppeal.detail=o.specialAppeal.detail||[],o.specialAppeal.addSA.length>0&&(t.value.specialAppeal.addSA=o.specialAppeal.addSA),o.specialAppeal.addSkill.length>0&&(t.value.specialAppeal.addSkill=o.specialAppeal.addSkill)),o.skill&&(t.value.skill.ID=o.skill.ID,t.value.skill.name=o.skill.name,t.value.skill.AP=o.skill.AP,t.value.skill.detail=o.skill.detail||[]),o.characteristic&&(t.value.characteristic.name=o.characteristic.name,t.value.characteristic.detail=o.characteristic.detail,t.value.characteristic.type=o.characteristic.type||[]),o.uniqueStatus.supportSkill&&(t.value.uniqueStatus.supportSkill=o.uniqueStatus.supportSkill),o.imageUrl?(t.value.imageUrl.before=o.imageUrl.before||"",t.value.imageUrl.after=o.imageUrl.after||""):(t.value.imageUrl.before="",t.value.imageUrl.after=""),N.setEditTarget("","")}},{immediate:!0});function V(){if(E.value)return E.value;const B=t.value.memberName,s=Al[B];let o=0;const K=u.value[B];if(K){for(const Z in K)for(const ae in K[Z])if(ae.startsWith(s+"_")){const oe=parseInt(ae.split("_")[1],10);!isNaN(oe)&&oe>o&&(o=oe)}}return`${s}_${String(o+1).padStart(3,"0")}`}function Y(B){const s=Object.entries(Je).find(([,o])=>o.en===B);return s?s[0]:"normal"}const se=ee(()=>{const B=V(),s=Y(t.value.gacha.period),o={cardName:t.value.cardName,styleType:t.value.styleType,mood:t.value.mood,series:t.value.series,kana:t.value.kana,gacha:{addSeason:t.value.gacha.addSeason,period:s},uniqueStatus:{smile:t.value.uniqueStatus.smile,pure:t.value.uniqueStatus.pure,cool:t.value.uniqueStatus.cool,mental:t.value.uniqueStatus.mental,BP:t.value.uniqueStatus.BP,...f.value&&{supportSkill:{supportSkillTitle:t.value.uniqueStatus.supportSkill.supportSkillTitle,supportSkillList:t.value.uniqueStatus.supportSkill.supportSkillList}}},imageUrl:{...t.value.imageUrl.before&&{before:""},after:""},...x.value&&{specialAppeal:{ID:t.value.specialAppeal.ID,name:t.value.specialAppeal.name,AP:t.value.specialAppeal.AP,detail:t.value.specialAppeal.detail,...t.value.specialAppeal.addSA.length>0&&{addSA:t.value.specialAppeal.addSA},...t.value.specialAppeal.addSkill.length>0&&{addSkill:t.value.specialAppeal.addSkill}}},skill:{ID:t.value.skill.ID,name:t.value.skill.name,AP:t.value.skill.AP,detail:t.value.skill.detail,...t.value.skill.addSkill.length>0&&{addSkill:t.value.skill.addSkill}},...D.value&&{characteristic:{name:t.value.characteristic.name,detail:t.value.characteristic.detail,type:t.value.characteristic.type}}},K={[B]:o};return JSON.stringify(K,null,2)}),ye=(B,s,o)=>new Promise((K,Z)=>{const ae=new Image,oe=new FileReader;oe.onload=ne=>{ae.src=ne.target?.result},oe.onerror=ne=>Z(ne),ae.onload=()=>{const ne=s/ae.width,pe=document.createElement("canvas");if(pe.width=s,pe.height=Math.round(ae.height*ne),pe.height!==o){Z(new Error(`画像サイズが不正です。
期待値: ${s}x${o}
実際: ${pe.width}x${pe.height}`));return}const Ie=pe.getContext("2d");Ie?(Ie.drawImage(ae,0,0,pe.width,pe.height),pe.toBlob($e=>{$e?K($e):Z(new Error("Canvas to Blob failed"))},"image/webp")):Z(new Error("Canvas context not available"))}}),Ve=async()=>{try{const B=JSON.parse(se.value),s=t.value.rare,o=Object.keys(B[s])[0],K=B[s][o],Z=t.value.memberName,ae=Oe(ve.app),oe=async pe=>{const Ie=pe==="before"?i.value:a.value;if(!Ie)return;const $e=await ye(Ie,600,389),bl=he(ae,`cardIllust/${o}_${pe}.webp`);await Ye(bl,$e),K.imageUrl[pe]=await Ae(bl)};if(a.value)await oe("after");else throw new Error("覚醒後画像(After)を設定してください");i.value&&await oe("before");const ne={};ne[`card/${Z}/${s}/${o}`]=K,await Le(De(_e),ne),h.value="Dev環境にデータをアップロードしました",A.value="success",d.value=!0,E.value="",j("before"),j("after")}catch(B){console.error(B),h.value=B.message||"アップロードに失敗しました",A.value="error",d.value=!0}};return(B,s)=>(b(),T(Te,{fluid:"",class:"pa-0"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"8"},{default:l(()=>[e(le,{class:"mb-3"},{default:l(()=>[e(c,{cols:"3"},{default:l(()=>[e(te,{modelValue:t.value.memberName,"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.memberName=o),label:"Member Name",items:Object.values(z(tl)),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(te,{modelValue:t.value.rare,"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.rare=o),label:"Rarity",items:z(sl),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(te,{modelValue:t.value.styleType,"onUpdate:modelValue":s[2]||(s[2]=o=>t.value.styleType=o),label:"Style Type",items:Object.values(z(hl)).map(o=>o.en),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(te,{modelValue:t.value.mood,"onUpdate:modelValue":s[3]||(s[3]=o=>t.value.mood=o),label:"Mood",items:Object.values(z(Ul)).map(o=>o.en),"item-title":"text","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(F,{modelValue:t.value.cardName,"onUpdate:modelValue":s[4]||(s[4]=o=>t.value.cardName=o),label:"Card Name",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(F,{modelValue:t.value.kana,"onUpdate:modelValue":s[5]||(s[5]=o=>t.value.kana=o),label:"Kana",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(F,{modelValue:t.value.series,"onUpdate:modelValue":s[6]||(s[6]=o=>t.value.series=o),label:"Series",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{class:"mb-3"},{default:l(()=>[e(me,{class:"mb-2"},{default:l(()=>[...s[25]||(s[25]=[X("Unique Status",-1)])]),_:1}),e(fe,null,{default:l(()=>[e(il,{density:"compact"},{default:l(()=>[s[27]||(s[27]=y("thead",null,[y("tr",null,[y("th",null,"Training Level"),y("th",null,"Smile"),y("th",null,"Pure"),y("th",null,"Cool"),y("th",null,"Mental"),y("th",null,"BP")])],-1)),y("tbody",null,[y("tr",null,[y("td",Ha,[e(te,{modelValue:ue.value,"onUpdate:modelValue":s[7]||(s[7]=o=>ue.value=o),items:q,variant:"underlined",density:"compact","hide-details":""},null,8,["modelValue"])]),(b(),G(Q,null,ie(C,o=>y("td",{key:o,style:{width:"calc(100% / 6)"}},[e(F,{modelValue:ce.value[o],"onUpdate:modelValue":K=>ce.value[o]=K,type:"number",max:"99999",min:"0",variant:"underlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])])),64))]),y("tr",null,[s[26]||(s[26]=y("td",{style:{width:"calc(100% / 6)"}},null,-1)),(b(),G(Q,null,ie(C,o=>y("td",{key:o,style:{width:"calc(100% / 6)"}},[e(F,{modelValue:t.value.uniqueStatus[o],"onUpdate:modelValue":K=>t.value.uniqueStatus[o]=K,type:"number",max:"99999",min:"0",variant:"underlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue"])])),64))])])]),_:1})]),_:1})]),_:1}),y("div",ja,[f.value?(b(),T(de,{key:1},{default:l(()=>[e(me,{class:"d-flex text-no-wrap"},{default:l(()=>[s[28]||(s[28]=X(" Support Skill ",-1)),e(ge),e(I,{icon:"mdi-close",variant:"text",density:"compact",color:"error",onClick:s[9]||(s[9]=o=>f.value=!1)})]),_:1}),e(fe,null,{default:l(()=>[e(F,{label:"Support Skill Title",variant:"underlined",density:"compact","hide-details":"",class:"mb-5"}),e(le,null,{default:l(()=>[(b(!0),G(Q,null,ie(z(ma),o=>(b(),T(c,{key:o,cols:"3"},{default:l(()=>[y("div",Ka,[y("img",{src:z(R).getImagePath("icons/bonusSkill",o),class:"mr-2",style:{width:"35px","border-radius":"3.5px"}},null,8,Ja),y("span",za,H(o),1)]),e(le,{"no-gutters":""},{default:l(()=>[(b(),G(Q,null,ie(["initLevel","levelUp","upLevel"],(K,Z)=>e(c,{key:K,cols:"4"},{default:l(()=>[e(F,{modelValue:t.value.uniqueStatus.supportSkill.supportSkillList[o][K],"onUpdate:modelValue":ae=>t.value.uniqueStatus.supportSkill.supportSkillList[o][K]=ae,label:K,type:"number",max:"5",min:"0",variant:"underlined",density:"compact","hide-details":"",class:pl(`m${["r","x","l"][Z]}-1`)},null,8,["modelValue","onUpdate:modelValue","label","class"])]),_:2},1024)),64))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):(b(),T(I,{key:0,text:"Add Support Skill","prepend-icon":"mdi-plus",variant:"outlined",block:"",class:"mb-3",onClick:s[8]||(s[8]=o=>f.value=!0)}))]),e(de,{class:"mb-3"},{default:l(()=>[e(me,{class:"mb-2"},{default:l(()=>[...s[29]||(s[29]=[X("Gacha",-1)])]),_:1}),e(fe,null,{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"3"},{default:l(()=>[e(te,{modelValue:t.value.gacha.period,"onUpdate:modelValue":s[10]||(s[10]=o=>t.value.gacha.period=o),label:"Period",items:Object.values(z(Je)).map(o=>o.en),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:t.value.year,"onUpdate:modelValue":s[11]||(s[11]=o=>t.value.year=o),label:"Year",type:"number",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"1"},{default:l(()=>[e(F,{modelValue:t.value.split,"onUpdate:modelValue":s[12]||(s[12]=o=>t.value.split=o),label:"Sprit",type:"number",min:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(F,{modelValue:t.value.gacha.addSeason,"onUpdate:modelValue":s[13]||(s[13]=o=>t.value.gacha.addSeason=o),label:"Add Season",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),y("div",Ga,[x.value?(b(),T(de,{key:1},{default:l(()=>[e(me,{class:"d-flex text-no-wrap mb-2"},{default:l(()=>[s[30]||(s[30]=X(" Special Appeal ",-1)),e(ge),e(I,{icon:"mdi-close",variant:"text",density:"compact",color:"error",onClick:$})]),_:1}),e(fe,null,{default:l(()=>[e(We,{modelValue:t.value.specialAppeal,"onUpdate:modelValue":s[15]||(s[15]=o=>t.value.specialAppeal=o),type:"SA",onOpenDetail:Se},null,8,["modelValue"])]),_:1})]),_:1})):(b(),T(I,{key:0,text:"Add Special Appeal","prepend-icon":"mdi-plus",variant:"outlined",block:"",onClick:s[14]||(s[14]=o=>x.value=!0)}))]),e(de,{class:"mb-3"},{default:l(()=>[e(me,{class:"text-no-wrap mb-2"},{default:l(()=>[...s[31]||(s[31]=[X("Skill",-1)])]),_:1}),e(fe,null,{default:l(()=>[e(We,{modelValue:t.value.skill,"onUpdate:modelValue":s[16]||(s[16]=o=>t.value.skill=o),type:"skill",onOpenDetail:Se},null,8,["modelValue"])]),_:1})]),_:1}),y("div",null,[D.value?(b(),T(vl,{key:1,modelValue:t.value.characteristic,"onUpdate:modelValue":s[18]||(s[18]=o=>t.value.characteristic=o),onDelete:r,onOpenDetail:Se},null,8,["modelValue"])):(b(),T(I,{key:0,text:"Add Characteristic","prepend-icon":"mdi-plus",block:"",onClick:s[17]||(s[17]=o=>D.value=!0)}))])]),_:1}),e(c,{cols:"4"},{default:l(()=>[y("div",Xa,[(b(),G(Q,null,ie(["before","after"],o=>y("div",{key:o,class:"position-relative cursor-pointer",style:{width:"49%"},onClick:K=>P(o)},[y("p",Ya,H(o==="before"?"Before":"After"),1),e(Ue,{src:(o==="before"?M.value:J.value)||t.value.imageUrl[o]||z(Ol),width:"100%"},null,8,["src"]),(o==="before"?M.value:J.value)||t.value.imageUrl[o]?(b(),T(I,{key:0,icon:"mdi-close",size:"x-small",color:"error",style:{position:"absolute",top:"5px",right:"5px","z-index":"1"},onClick:je(K=>j(o),["stop"])},null,8,["onClick"])):ke("",!0),y("input",{ref_for:!0,ref:K=>o==="before"?w.value=K:n.value=K,type:"file",accept:"image/webp",class:"d-none",onChange:K=>L(K,o)},null,40,Za)],8,Wa)),64))]),e(Re,{label:"Result","auto-grow":"",readonly:"","model-value":se.value},null,8,["model-value"]),e(I,{color:"primary","prepend-icon":"mdi-content-copy",text:"COPY",class:"mr-2",onClick:s[19]||(s[19]=o=>B.navigator.clipboard.writeText(se.value))}),e(I,{color:"green","prepend-icon":"mdi-cloud-upload",text:"Dev Upload",onClick:Ve})]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(Ze)]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(te,{modelValue:t.value.rare,"onUpdate:modelValue":s[20]||(s[20]=o=>t.value.rare=o),label:"Rarity",items:z(sl),"item-title":"label","item-value":"value",required:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"8"},{default:l(()=>[e(Re,{modelValue:U.value,"onUpdate:modelValue":s[21]||(s[21]=o=>U.value=o)},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(I,{color:"green","prepend-icon":"mdi-cloud-upload",text:`${z(R).isDev?"Dev":"Prod"} Upload`,onClick:s[22]||(s[22]=o=>p())},null,8,["text"])]),_:1})]),_:1}),e(qa,{modelValue:k.value,"onUpdate:modelValue":s[23]||(s[23]=o=>k.value=o),"initial-values":Ce.value,onSave:xe},null,8,["modelValue","initial-values"]),e(Fe,{modelValue:d.value,"onUpdate:modelValue":s[24]||(s[24]=o=>d.value=o),timeout:3e3,color:A.value},{default:l(()=>[X(H(h.value),1)]),_:1},8,["modelValue","color"]),e(le,null,{default:l(()=>[(b(!0),G(Q,null,ie(_.value,o=>(b(),T(c,{key:o.name,cols:"2"},{default:l(()=>[e(de,{class:"cursor-pointer",onClick:K=>W(o.url)},{default:l(()=>[e(me,{class:"pa-0"},{default:l(()=>[e(Ue,{src:o.url,"aspect-ratio":"16/9",cover:""},null,8,["src"])]),_:2},1024),e(fe,{class:"py-2"},{default:l(()=>[X(H(o.name),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),et={style:{"max-width":"300px"}},lt={class:"d-flex justify-space-evenly mt-3"},at=be({__name:"AddMusic",setup(v){const R=m(!1),C=m("group"),$=m(!1),r=m(null),N=m([]),u=m(null),E=m(null),d=m(!1),h=m(!1),A=m("データを一時保存しました"),U=m("success"),k=m(!1),S=m(null),g=m(null),f=Pl,x=fl(),D=Me(),w=m({});Pe(()=>{const t=De(_e,"music");ol(t,p=>{const V=p.val();if(V&&(w.value=V,a.value.musicName==="")){const Y=Object.keys(V).length,se=x.pendingList.filter(Ve=>Ve.type==="music"&&!V[Object.keys(Ve.data)[0]]).length,ye=`m_${Y+se+1}`;a.value.ID=ye,a.value.ID_original=ye,a.value.ID_preset=ye}})}),re([()=>x.editTarget,w],([t,p])=>{t&&t.type==="music"&&t.id&&p&&Object.keys(p).length>0&&p[t.id]&&(S.value=t.id,P(),x.setEditTarget("",""))},{immediate:!0});const n=ee(()=>{let t=Object.entries(w.value);return g.value&&(t=t.filter(([p,V])=>{const Y=V.musicData.kana;return Y?Bl(Y.charAt(0))===g.value:!1})),t.map(([p,V])=>({title:V.title,value:p}))}),i=()=>{const t=Object.keys(w.value).length,p=x.pendingList.filter(Y=>Y.type==="music"&&!w.value[Object.keys(Y.data)[0]]).length,V=`m_${t+p+1}`;return{ID:V,ID_original:V,ID_preset:V,musicName:"",musicData:{kana:"",singer:el.HASUNOSORA,singer_group:"HASUNOSORA_105",singer_solo:[tl.KAHO],releaseDate:{year:2026,month:1,date:1},numbering:"",BPM:{original:150,inGame:150},time:{minuts:1,seconds:0,miliSeconds:0},cover:!1},imageURL:"",attribute:Il.SMILE.en,BHcount:0,level:0,term:105,center:tl.KAHO,bonusSkill:qe.BEAT_HEART_UP,singingMembers:[],scoreData:{difficultyLevel:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1},maxCombo:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1}}}},a=m(i()),M=/^[\u3040-\u309F\u30FC0-9]*$/,J=[t=>M.test(t)||"ひらがなと数字のみ入力可能です"],W=ee({get:()=>{const t=a.value.musicData.releaseDate;return`${t.year}-${String(t.month).padStart(2,"0")}-${String(t.date).padStart(2,"0")}`},set:t=>{if(!t)return;const[p,V,Y]=t.split("-").map(Number);a.value.musicData.releaseDate.year=p,a.value.musicData.releaseDate.month=V,a.value.musicData.releaseDate.date=Y}});re(k,t=>{t&&(a.value.musicData.releaseDate={year:2099,month:12,date:31})});const O=ee(()=>a.value.musicName!==""&&a.value.musicData.kana!==""&&M.test(a.value.musicData.kana)),_=ee(()=>{if(C.value==="group"){const t=a.value.musicData.singer_group;return ze[t].MEMBERS}else return a.value.musicData.singer_solo}),P=()=>{if(!S.value)return;const t=w.value[S.value];if(!t)return;if(R.value=!0,a.value.ID_preset=S.value,a.value.ID=R.value?S.value:a.value.ID_original,a.value.musicName=t.title,a.value.musicData.kana=t.musicData.kana,a.value.musicData.singer=t.musicData.singer,Object.values(el).includes(t.musicData.singer)){C.value="group";const Y=Object.entries(el).find(([Ve,B])=>B===t.musicData.singer),se=Y?Y[0]:null,ye=Object.entries(ze).find(([Ve,B])=>B.KEY===se&&JSON.stringify(B.MEMBERS)===JSON.stringify(t.singingMembers));ye&&(a.value.musicData.singer_group=ye[0])}else C.value="solo",a.value.musicData.singer_group=i().musicData.singer_group;a.value.musicData.singer_solo=t.singingMembers,a.value.musicData.releaseDate={...t.musicData.releaseDate},k.value=a.value.musicData.releaseDate.year===2099&&a.value.musicData.releaseDate.month===12&&a.value.musicData.releaseDate.date===31,a.value.musicData.numbering=t.musicData.numbering,a.value.musicData.BPM={...t.musicData.BPM},a.value.musicData.cover=t.musicData.cover;const p=t.musicData.time;a.value.musicData.time.minuts=Math.floor(p/60);const V=Math.floor(p%60);a.value.musicData.time.seconds=V,a.value.musicData.time.miliSeconds=parseFloat(((p-a.value.musicData.time.minuts*60-V)*10).toFixed(1)),a.value.imageURL=t.imageURL||"",a.value.attribute=t.attribute,a.value.BHcount=t.BHcount,a.value.level=t.level,a.value.term=t.term,a.value.center=t.center,a.value.bonusSkill=t.bonusSkill,a.value.singingMembers=[...t.singingMembers],t.scoreData?(d.value=!0,a.value.scoreData=JSON.parse(JSON.stringify(t.scoreData))):(d.value=!1,a.value.scoreData={difficultyLevel:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1},maxCombo:{NORMAL:1,HARD:1,EXPERT:1,MASTER:1}}),S.value=null,r.value=null},L=()=>{R.value=!1,S.value=null,d.value=!1,r.value=null,C.value="group",a.value=i(),k.value=!1},j=async()=>{try{const t=JSON.parse(xe.value),p=Object.keys(t)[0];if($.value=!0,u.value){const Y=Oe(ve.app),se=he(Y,`cdJacket/${u.value.name}`);try{if(await Ae(se),!confirm(`同名のファイル (${u.value.name}) が既に存在します。
上書きしますか？`)){$.value=!1;return}}catch{}const ye=await Ye(se,u.value),Ve=await Ae(ye.ref);t[p].imageURL=Ve,D.imageCache.llllMgr_musicImageUrls||(D.imageCache.llllMgr_musicImageUrls={}),D.imageCache.llllMgr_musicImageUrls[p]=Ve}const V={};V[`music/${p}`]=t[p],await Le(De(_e),V),A.value="Dev環境にデータをアップロードしました",U.value="success",h.value=!0,ce()}catch(t){console.error("Failed to parse JSON",t),A.value="アップロードに失敗しました",U.value="error",h.value=!0}finally{$.value=!1}},q=async()=>{if(!a.value.musicName)return;const t=Oe(ve.app),p=he(t,"cdJacket");try{const Y=(await kl(p)).items.find(se=>{const ye=se.name,Ve=ye.lastIndexOf(".");return(Ve!==-1?ye.substring(0,Ve):ye)===a.value.musicName});if(Y){const se=await Ae(Y);a.value.imageURL=se,D.imageCache.llllMgr_musicImageUrls||(D.imageCache.llllMgr_musicImageUrls={}),D.imageCache.llllMgr_musicImageUrls[a.value.ID]=se,A.value="画像URLを取得しました",U.value="success",h.value=!0}else A.value="画像が見つかりませんでした",U.value="warning",h.value=!0}catch(V){console.error("Failed to fetch image",V),A.value="画像の取得に失敗しました",U.value="error",h.value=!0}},ue=t=>{const p=Array.isArray(t)?t[0]:t;if(!p){ce();return}u.value=p;const V=new FileReader;V.onload=Y=>{E.value=Y.target?.result},V.readAsDataURL(p)},ce=()=>{u.value=null,E.value=null,N.value=[],r.value&&(r.value.value="")},Ce=()=>{r.value?.click()},Se=t=>{const p=t.target;p.files&&p.files.length>0&&ue(p.files[0])},xe=ee(()=>{const t=(a.value.musicData.time.minuts||0)*60+(a.value.musicData.time.seconds||0)+(a.value.musicData.time.miliSeconds||0)/10,p={[R.value?a.value.ID_preset:a.value.ID_original]:{title:a.value.musicName,musicData:{kana:a.value.musicData.kana,singer:C.value==="group"?el[ze[a.value.musicData.singer_group].KEY]:a.value.musicData.singer_solo.map(V=>ka(V)).join("、"),releaseDate:{year:a.value.musicData.releaseDate.year,month:a.value.musicData.releaseDate.month,date:a.value.musicData.releaseDate.date},numbering:a.value.musicData.numbering,BPM:{original:a.value.musicData.BPM.original,inGame:a.value.musicData.BPM.inGame},time:t,cover:a.value.musicData.cover},imageURL:a.value.imageURL,attribute:a.value.attribute,BHcount:a.value.BHcount,level:a.value.level,term:a.value.term,center:a.value.center,bonusSkill:a.value.bonusSkill,singingMembers:C.value==="group"?ze[a.value.musicData.singer_group].MEMBERS:a.value.musicData.singer_solo}};return d.value&&(p[R.value?a.value.ID_preset:a.value.ID_original].scoreData={difficultyLevel:{NORMAL:a.value.scoreData.difficultyLevel.NORMAL,HARD:a.value.scoreData.difficultyLevel.HARD,EXPERT:a.value.scoreData.difficultyLevel.EXPERT,MASTER:a.value.scoreData.difficultyLevel.MASTER},maxCombo:{NORMAL:a.value.scoreData.maxCombo.NORMAL,HARD:a.value.scoreData.maxCombo.HARD,EXPERT:a.value.scoreData.maxCombo.EXPERT,MASTER:a.value.scoreData.maxCombo.MASTER}}),JSON.stringify(p,null,2)});return(t,p)=>(b(),T(Te,{fluid:"",class:"pa-0"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"8"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"2"},{default:l(()=>[e(te,{modelValue:g.value,"onUpdate:modelValue":p[0]||(p[0]=V=>g.value=V),label:"五十音",items:z(f),"item-title":"title","item-value":"value",clearable:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"7"},{default:l(()=>[e(te,{modelValue:S.value,"onUpdate:modelValue":p[1]||(p[1]=V=>S.value=V),label:"Preset",items:n.value,"item-title":"title","item-value":"value",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"3"},{default:l(()=>[e(I,{color:"primary",text:"Set",disabled:!S.value,onClick:P},null,8,["disabled"]),e(I,{color:"warning",text:"Reset",class:"mx-2",onClick:L}),e(I,{color:"yellow","prepend-icon":"mdi-image-sync",text:"get",disabled:!a.value.musicName,onClick:q},null,8,["disabled"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(Ze)]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{"model-value":R.value?a.value.ID_preset:a.value.ID_original,label:"Music ID",readonly:"","prepend-inner-icon":"mdi-information",density:"compact",variant:"outlined","hide-details":""},null,8,["model-value"])]),_:1}),e(c,{cols:"10"},{default:l(()=>[e(Xe,{modelValue:R.value,"onUpdate:modelValue":p[2]||(p[2]=V=>R.value=V),label:"ID Override",color:"pink",disabled:a.value.ID_preset===a.value.ID_original,class:"pl-2",density:"compact","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(F,{modelValue:a.value.musicName,"onUpdate:modelValue":p[3]||(p[3]=V=>a.value.musicName=V),label:"Song Title",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(F,{modelValue:a.value.musicData.kana,"onUpdate:modelValue":p[4]||(p[4]=V=>a.value.musicData.kana=V),label:"Kana",required:"",rules:J,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(pa,{modelValue:C.value,"onUpdate:modelValue":p[5]||(p[5]=V=>C.value=V),label:"Singer",inline:"",density:"compact","hide-details":""},{default:l(()=>[e(_l,{label:"Group",value:"group",color:"pink",class:"mr-3"}),e(_l,{label:"Solo",value:"solo",color:"pink"})]),_:1},8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(te,{modelValue:a.value.musicData.singer_group,"onUpdate:modelValue":p[6]||(p[6]=V=>a.value.musicData.singer_group=V),items:Object.entries(z(ze)).map(([V,Y])=>({title:Y.NAME,value:V})),"item-title":"title","item-value":"value",label:"Group",disabled:C.value!=="group",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(te,{modelValue:a.value.musicData.singer_solo,"onUpdate:modelValue":p[7]||(p[7]=V=>a.value.musicData.singer_solo=V),items:z(fa)(),label:"Solo",multiple:"",disabled:C.value!=="solo",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1}),e(c,{cols:"3"},{default:l(()=>[e(F,{modelValue:W.value,"onUpdate:modelValue":p[8]||(p[8]=V=>W.value=V),label:"Release Date",type:"date",disabled:k.value,required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(c,{cols:"3"},{default:l(()=>[e(Xe,{modelValue:k.value,"onUpdate:modelValue":p[9]||(p[9]=V=>k.value=V),label:"Unknown Date",color:"pink",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(F,{modelValue:a.value.musicData.numbering,"onUpdate:modelValue":p[10]||(p[10]=V=>a.value.musicData.numbering=V),label:"Numbering",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.musicData.BPM.original,"onUpdate:modelValue":p[11]||(p[11]=V=>a.value.musicData.BPM.original=V),modelModifiers:{number:!0},label:"BPM (Original)",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.musicData.BPM.inGame,"onUpdate:modelValue":p[12]||(p[12]=V=>a.value.musicData.BPM.inGame=V),modelModifiers:{number:!0},label:"BPM (In Game)",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.musicData.time.minuts,"onUpdate:modelValue":p[13]||(p[13]=V=>a.value.musicData.time.minuts=V),modelModifiers:{number:!0},label:"Time (minuts)",type:"number",max:"9",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.musicData.time.seconds,"onUpdate:modelValue":p[14]||(p[14]=V=>a.value.musicData.time.seconds=V),modelModifiers:{number:!0},label:"Time (seconds)",type:"number",max:"59",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.musicData.time.miliSeconds,"onUpdate:modelValue":p[15]||(p[15]=V=>a.value.musicData.time.miliSeconds=V),modelModifiers:{number:!0},label:"Time (miliSeconds)",type:"number",step:"0.1",max:"99.9",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(Xe,{modelValue:a.value.musicData.cover,"onUpdate:modelValue":p[16]||(p[16]=V=>a.value.musicData.cover=V),label:"Cover",color:"pink",class:"pl-1",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(te,{modelValue:a.value.attribute,"onUpdate:modelValue":p[17]||(p[17]=V=>a.value.attribute=V),label:"Attribute",items:Object.values(z(Il)).map(V=>V.en),"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.BHcount,"onUpdate:modelValue":p[18]||(p[18]=V=>a.value.BHcount=V),modelModifiers:{number:!0},label:"BH Count",type:"number",max:"999",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.level,"onUpdate:modelValue":p[19]||(p[19]=V=>a.value.level=V),modelModifiers:{number:!0},label:"Level",type:"number",max:"1",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"2"},{default:l(()=>[e(F,{modelValue:a.value.term,"onUpdate:modelValue":p[20]||(p[20]=V=>a.value.term=V),modelModifiers:{number:!0},label:"Term",type:"number",min:"0",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(le,null,{default:l(()=>[e(c,{cols:"2"},{default:l(()=>[e(te,{modelValue:a.value.center,"onUpdate:modelValue":p[21]||(p[21]=V=>a.value.center=V),label:"Center",items:_.value,"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"3"},{default:l(()=>[e(te,{modelValue:a.value.bonusSkill,"onUpdate:modelValue":p[22]||(p[22]=V=>a.value.bonusSkill=V),label:"Bonus Skill",items:Object.entries(z(qe)).map(([V,Y])=>Y),"item-text":"label","item-value":"value",required:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(le,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[d.value?(b(),T(de,{key:1},{default:l(()=>[e(me,{class:"mb-2"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"6"},{default:l(()=>[...p[28]||(p[28]=[X("Difficulty Level",-1)])]),_:1}),e(c,{cols:"6",class:"d-flex"},{default:l(()=>[p[29]||(p[29]=X(" Max Combo ",-1)),e(ge),e(I,{icon:"mdi-close",variant:"text",density:"compact",color:"error",onClick:p[24]||(p[24]=V=>d.value=!1)})]),_:1})]),_:1})]),_:1}),e(fe,null,{default:l(()=>[e(le,null,{default:l(()=>[(b(),G(Q,null,ie(["difficultyLevel","maxCombo"],V=>e(c,{key:V,cols:"6"},{default:l(()=>[e(le,null,{default:l(()=>[(b(),G(Q,null,ie(["NORMAL","HARD","EXPERT","MASTER"],Y=>e(c,{key:Y,cols:"3"},{default:l(()=>[e(F,{modelValue:a.value.scoreData[V][Y],"onUpdate:modelValue":se=>a.value.scoreData[V][Y]=se,modelModifiers:{number:!0},label:Y,type:"number",max:"99",min:"1",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)),64))]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})):(b(),T(I,{key:0,text:"Include Score Data (Difficulty Level & Max Combo)","prepend-icon":"mdi-plus",block:"",onClick:p[23]||(p[23]=V=>d.value=!0)}))]),_:1})]),_:1})]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[e(I,{color:"primary","prepend-icon":"mdi-content-copy",text:"Copy",class:"mr-5",onClick:p[25]||(p[25]=V=>t.navigator.clipboard.writeText(xe.value.value))}),e(I,{color:"green","prepend-icon":"mdi-cloud-upload",text:"Dev Upload",disabled:!O.value,onClick:j},null,8,["disabled"])]),_:1}),e(c,{cols:"12",align:"center"},{default:l(()=>[y("div",et,[e(Ue,{src:E.value||a.value.imageURL||z(ya)},null,8,["src"]),y("div",lt,[e(I,{color:"primary","prepend-icon":"mdi-file-import",text:"Import Image",onClick:Ce}),e(I,{color:"error","prepend-icon":"mdi-close",text:"Delete",disabled:!u.value,onClick:ce},null,8,["disabled"])])]),y("input",{ref_key:"fileInputRef",ref:r,type:"file",accept:"image/webp",class:"d-none",onChange:Se},null,544)]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(F,{modelValue:a.value.imageURL,"onUpdate:modelValue":p[26]||(p[26]=V=>a.value.imageURL=V),label:"Image URL","prepend-icon":"mdi-link-variant",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),a.value.imageURL?(b(),T(c,{key:0,cols:"12",class:"text-center"})):ke("",!0),e(c,{cols:"12"},{default:l(()=>[e(Re,{label:"Result","auto-grow":"",readonly:"",rows:"42","model-value":xe.value},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Fe,{modelValue:h.value,"onUpdate:modelValue":p[27]||(p[27]=V=>h.value=V),timeout:3e3,color:U.value},{default:l(()=>[X(H(A.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),tt={style:{width:"15%"}},ut={style:{width:"5%"}},ot={style:{width:"5%"}},it={style:{width:"20%"}},nt={key:1},st={style:{width:"30%"}},dt={key:1},rt={style:{width:"25%"}},ct={key:1},mt=be({__name:"AddItem",setup(v){const R=Me(),C=m(105),$=m("Spring"),r=m(1),N=m(Array.from({length:15},()=>({skillBook:"ITEMS.NONE",piece:"ITEMS.NONE",charm:"ITEMS.NONE"}))),u=ee(()=>{const U=[{title:we.NONE,value:"ITEMS.NONE"}];return Object.entries(we.SKILL_BOOK).forEach(([k,S])=>{U.push({title:S,value:`ITEMS.SKILL_BOOK.${k}`})}),U}),E=ee(()=>{const U=[{title:we.NONE,value:"ITEMS.NONE"}];return Object.entries(we.CHARM).forEach(([k,S])=>{typeof S=="object"?Object.entries(S).forEach(([g,f])=>{U.push({title:f,value:`ITEMS.CHARM.${k}.${g}`})}):U.push({title:S,value:`ITEMS.CHARM.${k}`})}),U}),d=ee(()=>{const U=N.value.map(k=>`        {
          獲得可能アイテム: [${k.skillBook}, ${k.piece}, ${k.charm}],
          //'低確率獲得可能アイテム': ITEMS.SKILL_BOOK.LOW,
        }`).join(`,
`);return`    ${$.value}: [
      [
${U}
      ],
    ],`}),h=ee(()=>{const U=[{title:we.NONE,value:"ITEMS.NONE"}],k=S=>{Object.entries(we.PIECE[S]).forEach(([g,f])=>{U.push({title:f,value:`ITEMS.PIECE.${S}.${g}`})})};switch(k("GARNET"),k("CARNELIAN"),$.value){case"Spring":k("EMERALD"),k("DIA");break;case"Summer":k("PERIDOT"),k("RUBY");break;case"Autumn":k("TOPAZ"),k("SAPPHIRE");break;case"Winter":k("TURQUOISE"),k("AMETHYST");break}return U}),A=U=>{U=/技能書/.test(U)?U:U.split("(")[0];for(const k in $l)if(U===k)return $l[k]};return(U,k)=>(b(),T(Te,{fluid:"",class:"pa-0"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"8"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"4"},{default:l(()=>[e(te,{modelValue:C.value,"onUpdate:modelValue":k[0]||(k[0]=S=>C.value=S),items:[103,104,105],label:"Period",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(te,{modelValue:$.value,"onUpdate:modelValue":k[1]||(k[1]=S=>$.value=S),items:["Spring","Summer","Autumn","Winter"],label:"Season",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(te,{modelValue:r.value,"onUpdate:modelValue":k[2]||(k[2]=S=>r.value=S),items:[1,2,3,4,5],label:"Area",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(Ze,{class:"my-5"}),e(il,{density:"compact"},{default:l(()=>[k[4]||(k[4]=y("thead",null,[y("tr",null,[y("th",{style:{width:"15%"}},"期/季節"),y("th",{style:{width:"5%"}},"Area"),y("th",{style:{width:"5%"}},"Stage"),y("th",{style:{width:"20%"}},"Item (Skill Book)"),y("th",{style:{width:"30%"}},"Item (Piece)"),y("th",{style:{width:"25%"}},"Item (Charm)")])],-1)),y("tbody",null,[(b(),G(Q,null,ie(15,S=>y("tr",{key:S},[y("td",tt,H(`${C.value}期${$.value}`),1),y("td",ut,H(r.value),1),y("td",ot,H(S),1),y("td",it,[e(te,{modelValue:N.value[S-1].skillBook,"onUpdate:modelValue":g=>N.value[S-1].skillBook=g,items:u.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":""},{item:l(({props:g,item:f})=>[e(Ge,He({ref_for:!0},g,{title:f.title}),{prepend:l(()=>[f.title!==z(we).NONE?(b(),T(Ue,{key:0,src:z(R).getImagePath("icons/trainingItem",f.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):ke("",!0)]),_:2},1040,["title"])]),selection:l(({item:g})=>[g.title!==z(we).NONE?(b(),T(al,{key:0,pill:"",class:"pl-0",color:A(g.title)},{default:l(()=>[e(ll,{left:"",class:"mr-1"},{default:l(()=>[e(Ue,{src:z(R).getImagePath("icons/trainingItem",g.title)},null,8,["src"])]),_:2},1024),X(" "+H(g.title),1)]),_:2},1032,["color"])):(b(),G("span",nt,H(g.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])]),y("td",st,[e(te,{modelValue:N.value[S-1].piece,"onUpdate:modelValue":g=>N.value[S-1].piece=g,items:h.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":""},{item:l(({props:g,item:f})=>[e(Ge,He({ref_for:!0},g,{title:f.title}),{prepend:l(()=>[f.title!==z(we).NONE?(b(),T(Ue,{key:0,src:z(R).getImagePath("icons/trainingItem",f.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):ke("",!0)]),_:2},1040,["title"])]),selection:l(({item:g})=>[g.title!==z(we).NONE?(b(),T(al,{key:0,pill:"",class:"pl-0",color:A(g.title)},{default:l(()=>[e(ll,{left:"",class:"mr-1"},{default:l(()=>[e(Ue,{src:z(R).getImagePath("icons/trainingItem",g.title)},null,8,["src"])]),_:2},1024),X(" "+H(g.title),1)]),_:2},1032,["color"])):(b(),G("span",dt,H(g.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])]),y("td",rt,[e(te,{modelValue:N.value[S-1].charm,"onUpdate:modelValue":g=>N.value[S-1].charm=g,items:E.value,"item-title":"title","item-value":"value",variant:"underlined","hide-details":""},{item:l(({props:g,item:f})=>[e(Ge,He({ref_for:!0},g,{title:f.title}),{prepend:l(()=>[f.title!==z(we).NONE?(b(),T(Ue,{key:0,src:z(R).getImagePath("icons/trainingItem",f.title),style:{width:"40px"},class:"mr-2"},null,8,["src"])):ke("",!0)]),_:2},1040,["title"])]),selection:l(({item:g})=>[g.title!==z(we).NONE?(b(),T(al,{key:0,pill:"",class:"pl-0",color:A(g.title)},{default:l(()=>[e(ll,{left:"",class:"mr-1"},{default:l(()=>[e(Ue,{src:z(R).getImagePath("icons/trainingItem",g.title)},null,8,["src"])]),_:2},1024),X(" "+H(g.title),1)]),_:2},1032,["color"])):(b(),G("span",ct,H(g.title),1))]),_:1},8,["modelValue","onUpdate:modelValue","items"])])])),64))])]),_:1})]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(I,{color:"primary","prepend-icon":"mdi-content-copy",text:"COPY",class:"mb-3",onClick:k[3]||(k[3]=S=>U.navigator.clipboard.writeText(d.value))}),e(Re,{label:"Result","auto-grow":"",readonly:"",rows:"42","model-value":d.value},null,8,["model-value"])]),_:1})]),_:1})]),_:1}))}}),vt={class:"text-h5"},pt={class:"text-subtitle-2"},ft={class:"text-caption"},yt=be({__name:"EditSkillDataDialog",props:{modelValue:{type:Boolean},isNew:{type:Boolean},item:{default:()=>({name:"",ID:"",kana:"",text:[""],detail:{attr:"",type:[]}})},existingItems:{}},emits:["update:modelValue","save"],setup(v,{emit:R}){const C=v,$=R,r=Me(),N=yl(),u=m({...C.item}),E=m(!1),d=m(null),h=m(!1),A=n=>{const i=u.value[n];return!i||!C.isNew&&C.item&&i===C.item[n]?!1:C.existingItems.some(a=>a[n]===i)},U=[n=>n?/^[\u3040-\u309F0-9ー]+$/.test(n)||"Only Hiragana and Numbers are allowed":!0],k=[n=>n?/^[a-zA-Z0-9_-]+$/.test(n)?!C.isNew&&n===C.item?.ID?!0:!C.existingItems.some(a=>a.ID===n)||"ID already exists":'Only half-width alphanumeric characters, "_", and "-" are allowed':"ID is required"];re(()=>C.modelValue,n=>{n&&(u.value=JSON.parse(JSON.stringify(C.item)))});const S=n=>{$("update:modelValue",n)},g=()=>{d.value=null,E.value=!0},f=n=>{d.value=n,E.value=!0},x=n=>{u.value.detail.type.splice(n,1)},D=n=>{if(u.value.detail||(u.value.detail={attr:"",type:[]}),u.value.detail.type||(u.value.detail.type=[]),d.value!==null){if(u.value.detail.type.includes(n))return;u.value.detail.type[d.value]=n}else{if(u.value.detail.type.includes(n))return;u.value.detail.type.push(n)}E.value=!1,d.value=null},w=async()=>{const n=r.isDev?_e:ve;if(!u.value.name||!u.value.ID){$("save",{...u.value,error:"SkillName and ID are required"});return}if(C.isNew&&C.existingItems.some(W=>W.ID===u.value.ID)){$("save",{...u.value,error:"This ID already exists"});return}h.value=!0;const{ID:i,...a}=u.value,M={};M[`skills/skill/${i}`]=a;try{await Le(De(n),M),$("save",u.value),S(!1)}catch(J){console.error(J),$("save",{...u.value,error:"Error saving data"})}finally{h.value=!1}};return(n,i)=>(b(),T(Be,{"model-value":v.modelValue,"max-width":"1280px","onUpdate:modelValue":S},{default:l(()=>[e(de,null,{default:l(()=>[e(me,null,{default:l(()=>[y("span",vt,H(`${v.isNew?"New":"Edit"} Skill`),1)]),_:1}),e(fe,null,{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"4"},{default:l(()=>[e(F,{modelValue:u.value.name,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value.name=a),label:"SkillName",variant:"outlined",density:"compact","base-color":A("name")?"warning":void 0,color:A("name")?"warning":void 0,messages:A("name")?"Warning: Skill Name already exists":void 0},null,8,["modelValue","base-color","color","messages"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(F,{modelValue:u.value.kana,"onUpdate:modelValue":i[1]||(i[1]=a=>u.value.kana=a),label:"Kana",variant:"outlined",density:"compact",rules:U,"validate-on":"blur"},null,8,["modelValue"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(F,{modelValue:u.value.ID,"onUpdate:modelValue":i[2]||(i[2]=a=>u.value.ID=a),label:"ID",variant:"outlined",density:"compact",rules:k},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(de,null,{default:l(()=>[e(me,null,{default:l(()=>[...i[7]||(i[7]=[X("Text",-1)])]),_:1}),e(fe,null,{default:l(()=>[(b(!0),G(Q,null,ie(u.value.text,(a,M)=>(b(),G("div",{key:M,class:"d-flex align-center mb-4"},[e(F,{modelValue:u.value.text[M],"onUpdate:modelValue":J=>u.value.text[M]=J,label:`Text${M+1}`,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]),e(I,{icon:"mdi-delete",variant:"text",density:"compact",color:"error",class:"ml-3",disabled:u.value.text.length===1,onClick:J=>u.value.text.splice(M,1)},null,8,["disabled","onClick"])]))),128)),e(I,{"prepend-icon":"mdi-plus",text:"Add Text",variant:"outlined",block:"",onClick:i[3]||(i[3]=a=>u.value.text.push(""))})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(de,null,{default:l(()=>[e(me,null,{default:l(()=>[...i[8]||(i[8]=[X("Detail",-1)])]),_:1}),e(fe,null,{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[e(F,{modelValue:u.value.detail.attr,"onUpdate:modelValue":i[4]||(i[4]=a=>u.value.detail.attr=a),label:"Attr",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),(b(!0),G(Q,null,ie(u.value.detail.type,(a,M)=>(b(),T(c,{key:M,cols:"6",md:"4"},{default:l(()=>[e(de,{color:z(N).skillDetails[a]?.colorCode,class:"d-flex flex-column fill-height"},{default:l(()=>[e(me,{class:"d-flex text-no-wrap text-body-2"},{default:l(()=>[X(H(`Type ${M+1}`)+" ",1),e(ge),e(I,{icon:"mdi-close",density:"compact",color:"error",size:"small",onClick:J=>x(M)},null,8,["onClick"])]),_:2},1024),z(N).skillDetails[a]?(b(),T(fe,{key:0,class:"pb-0"},{default:l(()=>[y("p",pt,H(z(N).skillDetails[a].skillDetailName),1),y("p",ft,H(z(N).skillDetails[a].description),1)]),_:2},1024)):ke("",!0),e(ge),e(Ke,null,{default:l(()=>[e(I,{text:"Change Type",variant:"outlined",block:"",onClick:J=>f(M)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),128)),e(c,{cols:"6",md:"4"},{default:l(()=>[e(I,{"prepend-icon":"mdi-plus",text:"Add Type",variant:"outlined",class:"py-2 fill-height",block:"",onClick:g})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Ke,null,{default:l(()=>[e(ge),e(I,{color:"error",variant:"text",text:"Cancel",onClick:i[5]||(i[5]=a=>S(!1))}),e(I,{color:"primary",variant:"text",text:"Save",disabled:!u.value.name||!u.value.ID||A("ID"),loading:h.value,onClick:w},null,8,["disabled","loading"])]),_:1})]),_:1}),e(Ll,{modelValue:E.value,"onUpdate:modelValue":i[6]||(i[6]=a=>E.value=a),"existing-types":u.value.detail?.type||[],onSelect:D},null,8,["modelValue","existing-types"])]),_:1},8,["model-value"]))}}),kt=be({__name:"AddSkill",setup(v){const R=Me(),C=m({}),$=m(""),r=()=>{const x=De(ve,"skills/skill");ol(x,D=>{const w=D.val();C.value=w??{}})};Pe(r),re(()=>R.isDev,r);const N=ee(()=>{const x=[];if(!C.value)return x;for(const[D,w]of Object.entries(C.value))x.push({ID:D,...w});return x}),u=[{title:"ID",key:"ID"},{title:"Skill Name",key:"name"},{title:"Kana",key:"kana"},{title:"Attr",key:"detail.attr"},{title:"Edit",key:"edit",sortable:!1}],E=m(!1),d=m(!1),h=m({}),A=m(!1),U=m(""),k=m("success"),S=()=>{h.value={name:"",ID:"",kana:"",text:[""],detail:{attr:"",type:[]}},d.value=!0,E.value=!0},g=x=>{h.value=JSON.parse(JSON.stringify(x)),d.value=!1,E.value=!0},f=x=>{x.error?(U.value=x.error,k.value="error"):(U.value=`Saved to ${R.isDev?"Dev":"Prod"}`,k.value="success"),A.value=!0};return(x,D)=>(b(),T(Te,{fluid:"",class:"pa-0"},{default:l(()=>[e(de,null,{default:l(()=>[e(F,{modelValue:$.value,"onUpdate:modelValue":D[0]||(D[0]=w=>$.value=w),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",class:"ma-2"},{append:l(()=>[e(I,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:S})]),_:1},8,["modelValue"]),e(gl,{headers:u,items:N.value,search:$.value,density:"compact","items-per-page":50,hover:""},{"item.edit":l(({item:w})=>[e(Ml,{icon:"mdi-pencil",size:"small",onClick:n=>g(w)},null,8,["onClick"])]),_:2},1032,["items","search"])]),_:1}),e(yt,{modelValue:E.value,"onUpdate:modelValue":D[1]||(D[1]=w=>E.value=w),"is-new":d.value,item:h.value,"existing-items":N.value,onSave:f},null,8,["modelValue","is-new","item","existing-items"]),e(Fe,{modelValue:A.value,"onUpdate:modelValue":D[2]||(D[2]=w=>A.value=w),timeout:3e3,color:k.value},{default:l(()=>[X(H(U.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),gt=be({__name:"AddSkillDetail",setup(v){const R=Me(),C=yl(),$=m(""),r=ee(()=>Object.entries(ul).map(([D,w])=>({title:w,value:D}))),N=[{title:"ID",key:"id"},{title:"Skill Detail Name",key:"skillDetailName"},{title:"Color Code",key:"colorCode"},{title:"Skill Type",key:"skillTypeKey"},{title:"Description",key:"description"},{title:"Edit",key:"edit",sortable:!1}],u=ee(()=>{const D=Object.entries(C.skillDetails).map(([w,n])=>({id:w,...typeof n=="object"?n:{value:n}}));return $.value?D.filter(w=>w.skillTypeKey===$.value):D}),E=m(!1),d=m({id:"",skillDetailName:"",colorCode:"",description:"",skillTypeKey:"heartCaptcha"}),h=m(!1),A=m(!1),U=m(""),k=m("success"),S=()=>{d.value={id:"",skillDetailName:"",colorCode:"",description:"",skillTypeKey:"heartCaptcha"},h.value=!0,E.value=!0},g=D=>{d.value={...D},h.value=!1,E.value=!0},f=()=>{E.value=!1},x=async()=>{const D={};if(!d.value.id){U.value="ID is required",k.value="error",A.value=!0;return}if(h.value&&u.value.some(i=>i.id===d.value.id)){U.value="ID already exists",k.value="error",A.value=!0;return}const{id:w,...n}=d.value;D[`skills/skillDetail/${w}`]=n;try{await Le(De(ve),D),U.value=`Saved to ${R.isDev?"Dev":"Prod"}`,k.value="success",A.value=!0,E.value=!1}catch(i){console.error(i),U.value="Error saving data",k.value="error",A.value=!0}};return(D,w)=>(b(),T(Te,{fluid:"",class:"pa-0"},{default:l(()=>[e(de,null,{default:l(()=>[e(te,{modelValue:$.value,"onUpdate:modelValue":w[0]||(w[0]=n=>$.value=n),items:r.value,label:"Filter by Skill Type","prepend-inner-icon":"mdi-filter",variant:"outlined","hide-details":"",class:"ma-2",clearable:""},{append:l(()=>[e(I,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:S})]),_:1},8,["modelValue","items"]),e(gl,{headers:N,items:u.value,density:"compact","items-per-page":-1,hover:""},{"item.colorCode":l(({value:n})=>[n?(b(),T(al,{key:0,color:n,size:"small",variant:"flat"},{default:l(()=>[X(H(n),1)]),_:2},1032,["color"])):ke("",!0)]),"item.skillTypeKey":l(({value:n})=>[X(H(z(ul)[n]||n),1)]),"item.edit":l(({item:n})=>[e(I,{icon:"mdi-pencil",size:"small",onClick:i=>g(n)},null,8,["onClick"])]),_:2},1032,["items"])]),_:1}),e(Be,{modelValue:E.value,"onUpdate:modelValue":w[6]||(w[6]=n=>E.value=n),"max-width":"600px"},{default:l(()=>[e(de,null,{default:l(()=>[e(me,null,{default:l(()=>[...w[8]||(w[8]=[X("Edit Skill Detail",-1)])]),_:1}),e(fe,null,{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[e(F,{modelValue:d.value.id,"onUpdate:modelValue":w[1]||(w[1]=n=>d.value.id=n),label:"ID",disabled:!h.value,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","disabled"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(F,{modelValue:d.value.skillDetailName,"onUpdate:modelValue":w[2]||(w[2]=n=>d.value.skillDetailName=n),label:"Skill Detail Name",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(F,{modelValue:d.value.colorCode,"onUpdate:modelValue":w[3]||(w[3]=n=>d.value.colorCode=n),label:"Color Code",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(te,{modelValue:d.value.skillTypeKey,"onUpdate:modelValue":w[4]||(w[4]=n=>d.value.skillTypeKey=n),items:r.value,"item-title":"title","item-value":"value",label:"Skill Type",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(Re,{modelValue:d.value.description,"onUpdate:modelValue":w[5]||(w[5]=n=>d.value.description=n),label:"Description",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Ke,null,{default:l(()=>[e(ge),e(I,{text:"Cancel",color:"error",onClick:f}),e(I,{text:"Save",color:"primary",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Fe,{modelValue:A.value,"onUpdate:modelValue":w[7]||(w[7]=n=>A.value=n),timeout:3e3,color:k.value},{default:l(()=>[X(H(U.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),bt={class:"text-h5"},Vt={class:"d-flex justify-space-evenly mt-3"},Dt=be({__name:"EditEventDataDialog",props:{modelValue:{type:Boolean},eventData:{},isNew:{type:Boolean}},emits:["update:modelValue","save"],setup(v,{emit:R}){const C=v,$=R,r=m({}),N=m(null),u=m(null),E=m(null),d=["liveGP","live","movie","other"],h=n=>{if(!n||!Array.isArray(n)||n.length<5)return"";const[i,a,M,J,W]=n;return`${i}-${String(a).padStart(2,"0")}-${String(M).padStart(2,"0")}T${String(J).padStart(2,"0")}:${String(W).padStart(2,"0")}`},A=n=>{if(!n)return[];const i=new Date(n);return[i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()]};re(()=>C.modelValue,n=>{n&&C.eventData&&(r.value=JSON.parse(JSON.stringify(C.eventData)),g())});const U=ee({get:()=>h(r.value.firstDay),set:n=>r.value.firstDay=A(n)}),k=ee({get:()=>h(r.value.lastDay),set:n=>r.value.lastDay=A(n)}),S=n=>{const i=Array.isArray(n)?n[0]:n;if(!i){g();return}E.value=i;const a=new FileReader;a.onload=M=>{N.value=M.target?.result},a.readAsDataURL(i)},g=()=>{E.value=null,N.value=null,u.value&&(u.value.value="")},f=()=>{u.value?.click()},x=n=>{const i=n.target;i.files&&i.files.length>0&&S(i.files[0])},D=()=>{$("update:modelValue",!1)},w=()=>{$("save",{event:r.value,file:E.value})};return(n,i)=>(b(),T(Be,{"model-value":v.modelValue,"max-width":"1000px","onUpdate:modelValue":D},{default:l(()=>[e(de,null,{default:l(()=>[e(me,null,{default:l(()=>[y("span",bt,H(`${v.isNew?"New":"Edit"} Event`),1)]),_:1}),e(fe,{class:"px-4 py-2"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"8"},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[e(F,{modelValue:r.value.id,"onUpdate:modelValue":i[0]||(i[0]=a=>r.value.id=a),label:"Event ID",readonly:!v.isNew,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","readonly"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(F,{modelValue:r.value.title,"onUpdate:modelValue":i[1]||(i[1]=a=>r.value.title=a),label:"Event Title",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(c,{cols:"8"},{default:l(()=>[e(F,{modelValue:r.value.text,"onUpdate:modelValue":i[2]||(i[2]=a=>r.value.text=a),label:"Sub Title",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(te,{modelValue:r.value.type,"onUpdate:modelValue":i[3]||(i[3]=a=>r.value.type=a),label:"Event Type",items:d,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(F,{modelValue:U.value,"onUpdate:modelValue":i[4]||(i[4]=a=>U.value=a),label:"First Day",type:"datetime-local",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:l(()=>[e(F,{modelValue:k.value,"onUpdate:modelValue":i[5]||(i[5]=a=>k.value=a),label:"Last Day",type:"datetime-local",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{cols:"4"},{default:l(()=>[e(Ue,{src:N.value||r.value.imageUrl||z(Ol)},null,8,["src"]),y("div",Vt,[e(I,{text:"Import Image","prepend-icon":"mdi-file-import",color:"primary",onClick:f}),e(I,{text:"Delete","prepend-icon":"mdi-close",color:"error",disabled:!E.value,onClick:g},null,8,["disabled"])]),y("input",{ref_key:"fileInputRef",ref:u,type:"file",accept:"image/webp",style:{display:"none"},onChange:x},null,544)]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(F,{modelValue:r.value.link,"onUpdate:modelValue":i[6]||(i[6]=a=>r.value.link=a),label:"URL",variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Ke,{class:"py-0"},{default:l(()=>[e(ge),e(I,{text:"Cancel",color:"red",variant:"text",onClick:D}),e(I,{text:"Save",color:"primary",variant:"text",disabled:!r.value.id||!r.value.title||!U.value||!k.value,onClick:w},null,8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),St={class:"text-right mb-3"},xt=be({__name:"AddEvent",setup(v){const R=Me(),C=m(!1),$=m(""),r=m("success"),N=m(2e3),u=m(!1),E=m(!1),d=[{title:"ID",key:"id",sortable:!1},{title:"Title",key:"title",sortable:!1},{title:"SubTitle",key:"text",sortable:!1},{title:"First Day",key:"firstDay"},{title:"Last Day",key:"lastDay"},{title:"Edit",key:"edit",sortable:!1}],h=n=>{if(!n||!Array.isArray(n))return"";const[i,a,M,J,W]=n;return`${i}/${String(a).padStart(2,"0")}/${String(M).padStart(2,"0")} ${String(J).padStart(2,"0")}:${String(W).padStart(2,"0")}`},A=m({}),U=async()=>{const n=R.isDev?_e:ve,i=await Nl(De(n,"eventInformation"));i.exists()?A.value=i.val():A.value={}};Pe(U),re(()=>R.isDev,U);const k=ee(()=>Object.entries(A.value).map(([n,i])=>({id:n,...i}))),S=async()=>{const n=R.isDev?_e:ve,i=De(n,"cards");try{const a=await Nl(i);if(a.exists()){const M=a.val(),J=(W,O)=>{for(const _ in W)_===O?delete W[_]:typeof W[_]=="object"&&W[_]!==null&&J(W[_],O)};J(M,"fluctuationStatus"),await ga(i,M),$.value="Updated Card List (removed fluctuationStatus)",r.value="success",C.value=!0}}catch(a){console.error(a),$.value="Error updating card list",r.value="error",C.value=!0}},g=m(null),f=(n,i)=>{const a=JSON.parse(JSON.stringify(i));n==="copy"&&(a.id=""),g.value=a,E.value=n!=="edit",u.value=!0},x=()=>{g.value={id:"",title:"",text:"",type:"liveGP",firstDay:[],lastDay:[],link:"",imageUrl:""},E.value=!0,u.value=!0},D=async n=>{if(!confirm(`Are you sure you want to delete "${n.title}"?`))return;const i=R.isDev?_e:ve;try{await ba(De(i,`eventInformation/${n.id}`)),$.value="Deleted successfully",r.value="success",C.value=!0,await U()}catch(a){console.error(a),$.value="Error deleting event",r.value="error",C.value=!0}},w=async({event:n,file:i})=>{const a=R.isDev?_e:ve,{id:M,...J}=n;try{if($.value="Uploading Now...",r.value="yellow",N.value=-1,C.value=!0,i){const W=Oe(ve.app),O=he(W,`eventInformation/${i.name}`),_=await Ye(O,i),P=await Ae(_.ref);J.imageUrl=P}await Le(De(a,`eventInformation/${M}`),J),$.value="Saved successfully",r.value="success",N.value=5e3,u.value=!1,await U()}catch(W){console.error(W),$.value="Error saving event",r.value="error",N.value=5e3}};return(n,i)=>(b(),T(Te,{fluid:"",class:"pa-0"},{default:l(()=>[y("div",St,[e(ge),e(I,{color:"primary","prepend-icon":"mdi-plus",text:"New",onClick:x})]),e(gl,{headers:d,items:k.value,class:"elevation-1","items-per-page":-1,"sort-by":[{key:"firstDay",order:"asc"}],hover:""},{"item.firstDay":l(({value:a})=>[X(H(h(a)),1)]),"item.lastDay":l(({value:a})=>[X(H(h(a)),1)]),"item.edit":l(({item:a})=>[e(I,{class:"mr-2",size:"small",variant:"tonal",icon:"mdi-pencil",onClick:M=>f("edit",a)},null,8,["onClick"]),e(I,{class:"mr-2",size:"small",variant:"tonal",icon:"mdi-content-copy",onClick:M=>f("copy",a)},null,8,["onClick"]),e(I,{size:"small",variant:"tonal",color:"error",icon:"mdi-delete",onClick:M=>D(a)},null,8,["onClick"])]),_:2},1032,["items"]),e(Dt,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value=a),"event-data":g.value,"is-new":E.value,onSave:w},null,8,["modelValue","event-data","is-new"]),e(le,{class:"mt-2"},{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[e(I,{text:"Update Card List",color:"yellow",onClick:S})]),_:1})]),_:1}),e(Fe,{modelValue:C.value,"onUpdate:modelValue":i[1]||(i[1]=a=>C.value=a),color:r.value,timeout:N.value},{default:l(()=>[X(H($.value),1)]),_:1},8,["modelValue","color","timeout"])]),_:1}))}}),wt={key:0},Ct={style:{"white-space":"pre-wrap"}},Ut=be({__name:"MngInfo",setup(v){const R=m([]),C=m([]),$=m(!1),r=m(""),N=m(""),u=m(!1),E=m(""),d=m("success"),h=Oe(ve.app),A=he(h,"info"),U=async()=>{try{const x=await kl(A);C.value=x.items.map(D=>({name:D.name,ref:D}))}catch(x){console.error(x),f("Failed to fetch file list","error")}},k=async()=>{if(!R.value||R.value.length===0)return;const x=R.value[0],D=he(h,`info/${x.name}`);try{await Ye(D,x),f("Upload successful","success"),R.value=[],await U()}catch(w){console.error(w),f("Upload failed","error")}},S=async x=>{try{const D=await Ae(x.ref),n=await(await fetch(D)).text();r.value=x.name,N.value=n,$.value=!0}catch(D){console.error(D),f("Failed to load file content","error")}},g=async x=>{if(confirm(`Are you sure you want to delete "${x.name}"?`))try{await Da(x.ref),f("Deleted successfully","success"),await U()}catch(D){console.error(D),f("Delete failed","error")}},f=(x,D)=>{E.value=x,d.value=D,u.value=!0};return Pe(()=>{U()}),(x,D)=>(b(),T(Te,{fluid:""},{default:l(()=>[e(le,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[...D[4]||(D[4]=[y("h2",null,"Info Management (MD Files)",-1)])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(Va,{modelValue:R.value,"onUpdate:modelValue":D[0]||(D[0]=w=>R.value=w),label:"Select MD File",accept:".md","show-size":"","prepend-icon":"mdi-file-document-outline",variant:"outlined",density:"compact"},{"append-inner":l(()=>[e(I,{color:"primary",size:"small",class:"ml-2",disabled:!R.value||R.value.length===0,onClick:k},{default:l(()=>[...D[5]||(D[5]=[X(" Upload ",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(de,null,{default:l(()=>[e(me,null,{default:l(()=>[...D[6]||(D[6]=[X("File List (storage/info)",-1)])]),_:1}),e(il,{density:"compact"},{default:l(()=>[D[8]||(D[8]=y("thead",null,[y("tr",null,[y("th",null,"Name"),y("th",null,"Actions")])],-1)),y("tbody",null,[(b(!0),G(Q,null,ie(C.value,w=>(b(),G("tr",{key:w.name},[y("td",null,H(w.name),1),y("td",null,[e(I,{icon:"mdi-eye",size:"small",variant:"text",color:"info",onClick:n=>S(w)},null,8,["onClick"]),e(I,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:n=>g(w)},null,8,["onClick"])])]))),128)),C.value.length===0?(b(),G("tr",wt,[...D[7]||(D[7]=[y("td",{colspan:"2",class:"text-center"},"No files found.",-1)])])):ke("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),e(Be,{modelValue:$.value,"onUpdate:modelValue":D[2]||(D[2]=w=>$.value=w),"max-width":"800px",scrollable:""},{default:l(()=>[e(de,null,{default:l(()=>[e(me,{class:"d-flex justify-space-between align-center"},{default:l(()=>[y("span",null,H(r.value),1),e(I,{icon:"mdi-close",variant:"text",onClick:D[1]||(D[1]=w=>$.value=!1)})]),_:1}),e(fe,{style:{"max-height":"600px","overflow-y":"auto"}},{default:l(()=>[y("pre",Ct,H(N.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Fe,{modelValue:u.value,"onUpdate:modelValue":D[3]||(D[3]=w=>u.value=w),color:d.value,timeout:3e3},{default:l(()=>[X(H(E.value),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),ht={class:"d-flex align-center"},_t=be({__name:"AddData",setup(v){const R=m("pendingDataList"),C=Me(),$=Sa(),r=m(0),N=async()=>{const d=xa();try{await wa(d),$.push({name:"Home"})}catch(h){console.error("Logout failed",h)}},u=()=>{r.value++};re(()=>C.isDev,()=>{u()});const E=d=>{R.value=`${d}${d==="card"?"List":""}`};return(d,h)=>(b(),T(Te,{fluid:"",class:"py-2 px-0"},{default:l(()=>[h[3]||(h[3]=y("h1",null,"DATA MANAGEMENT",-1)),y("div",ht,[e(Xe,{modelValue:z(C).isDev,"onUpdate:modelValue":h[0]||(h[0]=A=>z(C).isDev=A),label:"isDev",color:"pink",density:"compact","hide-details":"","hide-input":"",class:"px-2"},null,8,["modelValue"]),e(I,{text:"Logout",color:"error","prepend-icon":"mdi-logout",size:"small",class:"mr-2",onClick:N}),e(I,{text:"Sync","prepend-icon":"mdi-refresh",size:"small",color:"primary",onClick:u})]),e(Rl,{modelValue:R.value,"onUpdate:modelValue":h[1]||(h[1]=A=>R.value=A),color:"pink"},{default:l(()=>[e(Ne,{value:"pendingDataList",text:"Pending Data"}),e(Ne,{value:"cardList",text:"Card"}),e(Ne,{value:"skillList",text:"Skill"}),e(Ne,{value:"skillDetail",text:"Skill Detail"}),e(Ne,{value:"music",text:"Music"}),e(Ne,{value:"item",text:"Item"}),e(Ne,{value:"event",text:"Event"}),e(Ne,{value:"info",text:"Info"})]),_:1},8,["modelValue"]),e(Ze,{class:"mb-2"}),e(Tl,{modelValue:R.value,"onUpdate:modelValue":h[2]||(h[2]=A=>R.value=A),class:"pt-3"},{default:l(()=>[e(Ee,{value:"pendingDataList"},{default:l(()=>[(b(),T(Ia,{key:r.value,onEdit:E}))]),_:1}),e(Ee,{value:"cardList"},{default:l(()=>[(b(),T(Qa,{key:r.value}))]),_:1}),e(Ee,{value:"skillList"},{default:l(()=>[(b(),T(kt,{key:r.value}))]),_:1}),e(Ee,{value:"skillDetail"},{default:l(()=>[(b(),T(gt,{key:r.value}))]),_:1}),e(Ee,{value:"music"},{default:l(()=>[(b(),T(at,{key:r.value}))]),_:1}),e(Ee,{value:"item"},{default:l(()=>[(b(),T(mt,{key:r.value}))]),_:1}),e(Ee,{value:"event"},{default:l(()=>[(b(),T(xt,{key:r.value}))]),_:1}),e(Ee,{value:"info"},{default:l(()=>[(b(),T(Ut,{key:r.value}))]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{_t as default};
